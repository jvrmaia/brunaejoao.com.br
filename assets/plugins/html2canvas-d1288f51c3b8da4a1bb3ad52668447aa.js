!function(e,t,a){"use strict";function n(t){l.logging&&e.console&&e.console.log&&e.console.log(t)}function i(e){return{zindex:e,children:[]}}function r(e,t){var a=[];return{storage:a,width:e,height:t,fillRect:function(){a.push({type:"function",name:"fillRect",arguments:arguments})},drawImage:function(){a.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){a.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){a.push({type:"variable",name:e,arguments:t})}}}var s,o,d,l={};l.Util={},l.Util.backgroundImage=function(e){return/data:image\/.*;base64,/i.test(e)||/^(-webkit|-moz|linear-gradient|-o-)/.test(e)?e:('url("'===e.toLowerCase().substr(0,5)?(e=e.substr(5),e=e.substr(0,e.length-2)):(e=e.substr(4),e=e.substr(0,e.length-1)),e)},l.Util.Bounds=function(e){var t,a={};return e.getBoundingClientRect?(t=e.getBoundingClientRect(),a.top=t.top,a.bottom=t.bottom||t.top+t.height,a.left=t.left,a.width=t.width||t.right-t.left,a.height=t.height||t.bottom-t.top,a):void 0},l.Util.getCSS=function(n,i){function r(e,t){var a,i=n.runtimeStyle&&n.runtimeStyle[e],r=n.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(t)&&/^-?\d/.test(t)&&(a=r.left,i&&(n.runtimeStyle.left=n.currentStyle.left),r.left="fontSize"===e?"1em":t||0,t=r.pixelLeft+"px",r.left=a,i&&(n.runtimeStyle.left=i)),/^(thin|medium|thick)$/i.test(t)?t:Math.round(parseFloat(t))+"px"}var d;if(e.getComputedStyle)s!==n&&(o=t.defaultView.getComputedStyle(n,null)),d=o[i],"backgroundPosition"===i&&(d=(d.split(",")[0]||"0 0").split(" "),d[0]=-1===d[0].indexOf("%")?r(i+"X",d[0]):d[0],d[1]=d[1]===a?d[0]:d[1],d[1]=-1===d[1].indexOf("%")?r(i+"Y",d[1]):d[1]);else if(n.currentStyle)if("backgroundPosition"===i)d=[r(i+"X",n.currentStyle[i+"X"]),r(i+"Y",n.currentStyle[i+"Y"])];else if(d=r(i,n.currentStyle[i]),/^(border)/i.test(i)&&/^(medium|thin|thick)$/i.test(d))switch(d){case"thin":d="1px";break;case"medium":d="0px";break;case"thick":d="5px"}return d},l.Util.BackgroundPosition=function(e,t,a){var n,i,r,s,o=l.Util.getCSS(e,"backgroundPosition");return 1===o.length&&(s=o,o=[],o[0]=s,o[1]=s),-1!==o[0].toString().indexOf("%")?(r=parseFloat(o[0])/100,i=t.width*r-a.width*r):i=parseInt(o[0],10),-1!==o[1].toString().indexOf("%")?(r=parseFloat(o[1])/100,n=t.height*r-a.height*r):n=parseInt(o[1],10),{top:n,left:i}},l.Util.Extend=function(e,t){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},l.Util.Children=function(e){var t;try{t=e.nodeName&&"IFRAME"===e.nodeName.toUpperCase()?e.contentDocument||e.contentWindow.document:function(e){var t=[];return null!==e&&!function(e,t){var n=e.length,i=0;if("number"==typeof t.length)for(var r=t.length;r>i;i++)e[n++]=t[i];else for(;t[i]!==a;)e[n++]=t[i++];return e.length=n,e}(t,e),t}(e.childNodes)}catch(i){n("html2canvas.Util.Children failed with exception: "+i.message),t=[]}return t},function(){l.Generate={};var e=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/];l.Generate.parseGradient=function(t,a){var n,i,r,s,o,d,l,m,u=e.length;for(i=0;u>i&&!(r=t.match(e[i]));i+=1);if(r)switch(r[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},o=r[2].match(/\w+/g))for(d=o.length,i=0;d>i;i+=1)switch(o[i]){case"top":n.y0=0,n.y1=a.height;break;case"right":n.x0=a.width,n.x1=0;break;case"bottom":n.y0=a.height,n.y1=0;break;case"left":n.x0=0,n.x1=a.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=a.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=a.height/2),o=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(d=o.length,l=1/Math.max(d-1,1),i=0;d>i;i+=1)m=o[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),m[2]?(s=parseFloat(m[2]),s/="%"===m[3]?100:a.width):s=i*l,n.colorStops.push({color:m[1],stop:s});break;case"-webkit-gradient":if(n={type:"radial"===r[2]?"circle":r[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},o=r[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),o&&(n.x0=o[1]*a.width/100,n.y0=o[2]*a.height/100,n.x1=o[3]*a.width/100,n.y1=o[4]*a.height/100),o=r[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(d=o.length,i=0;d>i;i+=1)m=o[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),s=parseFloat(m[2]),"from"===m[1]&&(s=0),"to"===m[1]&&(s=1),n.colorStops.push({color:m[3],stop:s});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},o=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),o&&(n.x0=o[1]*a.width/100,n.y0=o[2]*a.height/100,n.x1=a.width-n.x0,n.y1=a.height-n.y0),o=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(d=o.length,l=1/Math.max(d-1,1),i=0;d>i;i+=1)m=o[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),m[2]?(s=parseFloat(m[2]),m[3]&&(s/=100)):s=i*l,n.colorStops.push({color:m[1],stop:s});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:a.width,y1:a.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},o=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),o&&(n.cx=o[1]*a.width/100,n.cy=o[2]*a.height/100),o=r[3].match(/\w+/),m=r[4].match(/[a-z-]*/),o&&m)switch(m[0]){case"farthest-corner":case"cover":case"":var c=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2));n.rx=n.ry=Math.max(c,h,p,f);break;case"closest-corner":var c=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2));n.rx=n.ry=Math.min(c,h,p,f);break;case"farthest-side":"circle"===o[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=o[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===o[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=o[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(o=r[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(d=o.length,l=1/Math.max(d-1,1),i=0;d>i;i+=1)m=o[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),m[2]?(s=parseFloat(m[2]),s/="%"===m[3]?100:a.width):s=i*l,n.colorStops.push({color:m[1],stop:s})}return n},l.Generate.Gradient=function(e,a){var i,r,s,o,d,m=t.createElement("canvas"),u=m.getContext("2d");if(m.width=a.width,m.height=a.height,i=l.Generate.parseGradient(e,a),d=new Image,i)if("linear"===i.type){for(r=u.createLinearGradient(i.x0,i.y0,i.x1,i.y1),s=0,o=i.colorStops.length;o>s;s+=1)try{r.addColorStop(i.colorStops[s].stop,i.colorStops[s].color)}catch(c){n(["failed to add color stop: ",c,"; tried to add: ",i.colorStops[s],"; stop: ",s,"; in: ",e])}u.fillStyle=r,u.fillRect(0,0,a.width,a.height),d.src=m.toDataURL()}else if("circle"===i.type){for(r=u.createRadialGradient(i.cx,i.cy,0,i.cx,i.cy,i.rx),s=0,o=i.colorStops.length;o>s;s+=1)try{r.addColorStop(i.colorStops[s].stop,i.colorStops[s].color)}catch(c){n(["failed to add color stop: ",c,"; tried to add: ",i.colorStops[s],"; stop: ",s,"; in: ",e])}u.fillStyle=r,u.fillRect(0,0,a.width,a.height),d.src=m.toDataURL()}else if("ellipse"===i.type){var h,p=t.createElement("canvas"),f=p.getContext("2d"),y=Math.max(i.rx,i.ry),g=2*y;for(p.width=p.height=g,r=f.createRadialGradient(i.rx,i.ry,0,i.rx,i.ry,y),s=0,o=i.colorStops.length;o>s;s+=1)try{r.addColorStop(i.colorStops[s].stop,i.colorStops[s].color)}catch(c){n(["failed to add color stop: ",c,"; tried to add: ",i.colorStops[s],"; stop: ",s,"; in: ",e])}f.fillStyle=r,f.fillRect(0,0,g,g),u.fillStyle=i.colorStops[s-1].color,u.fillRect(0,0,m.width,m.height),h=new Image,h.onload=function(){u.drawImage(h,i.cx-i.rx,i.cy-i.ry,2*i.rx,2*i.ry),d.src=m.toDataURL()},h.src=p.toDataURL()}return d},l.Generate.ListAlpha=function(e){var t,a="";do t=e%26,a=String.fromCharCode(t+64)+a,e/=26;while(26*e>26);return a},l.Generate.ListRoman=function(e){var t,a=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],n=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],i="",r=a.length;if(0>=e||e>=4e3)return e;for(t=0;r>t;t+=1)for(;e>=n[t];)e-=n[t],i+=a[t];return i}}(),l.Parse=function(s,o){function d(){return{width:Math.max(Math.max(Q.body.scrollWidth,Q.documentElement.scrollWidth),Math.max(Q.body.offsetWidth,Q.documentElement.offsetWidth),Math.max(Q.body.clientWidth,Q.documentElement.clientWidth)),height:Math.max(Math.max(Q.body.scrollHeight,Q.documentElement.scrollHeight),Math.max(Q.body.offsetHeight,Q.documentElement.offsetHeight),Math.max(Q.body.clientHeight,Q.documentElement.clientHeight))}}function m(e,t){var a=parseInt(W(e,t),10);return isNaN(a)?0:a}function u(e,t,a,n,i,r){"transparent"!==r&&(e.setVariable("fillStyle",r),e.fillRect(t,a,n,i),G+=1)}function c(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(e,t,a){return e.length>0?t+a.toUpperCase():void 0});case"uppercase":return e.toUpperCase();default:return e}}function h(e){return e.replace(/^\s*/g,"").replace(/\s*$/g,"")}function p(e,t){if(V[e+"-"+t]!==a)return V[e+"-"+t];var n,i,r,s=Q.createElement("div"),o=Q.createElement("img"),d=Q.createElement("span");return s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,U.appendChild(s),o.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",d.style.fontFamily=e,d.style.fontSize=t,d.style.margin=0,d.style.padding=0,d.appendChild(Q.createTextNode("Hidden Text")),s.appendChild(d),s.appendChild(o),n=o.offsetTop-d.offsetTop+1,s.removeChild(d),s.appendChild(Q.createTextNode("Hidden Text")),s.style.lineHeight="normal",o.style.verticalAlign="super",i=o.offsetTop-s.offsetTop+1,r={baseline:n,lineWidth:1,middle:i},V[e+"-"+t]=r,U.removeChild(s),r}function f(e,t,a,n){h(e).length>0&&(n.fillText(e,t,a),G+=1)}function y(e,t,a){var n,i,r,s,d,m,y,g,M,b,v,_,w,k=a.ctx,A=W(e,"fontFamily"),x=W(e,"fontSize"),C=W(e,"color"),j=W(e,"textDecoration"),D=W(e,"textAlign"),S=W(e,"letterSpacing"),T=W(e,"fontWeight"),H=W(e,"fontStyle"),I=W(e,"fontVariant"),N=!1,$=0;if(t.nodeValue=c(t.nodeValue,W(e,"textTransform")),i=h(t.nodeValue),i.length>0){switch("none"!==j&&(r=p(A,x)),D=D.replace(["-webkit-auto"],["auto"]),s=o.letterRendering===!1&&/^(left|right|justify|auto)$/.test(D)&&/^(normal|none)$/.test(S)?t.nodeValue.split(/(\b| )/):t.nodeValue.split(""),parseInt(T,10)){case 401:T="bold";break;case 400:T="normal"}for(k.setVariable("fillStyle",C),k.setVariable("font",H+" "+I+" "+T+" "+x+" "+A),N?k.setVariable("textAlign","right"):k.setVariable("textAlign","left"),g=t,M=0,d=s.length;d>M;M+=1){if(y=null,q.rangeBounds)("none"!==j||0!==h(s[M]).length)&&(y=s[M],Q.createRange?(b=Q.createRange(),b.setStart(t,$),b.setEnd(t,$+y.length)):b=U.createTextRange(),n=b.getBoundingClientRect()?b.getBoundingClientRect():{});else{if("string"!=typeof g.nodeValue)continue;m=g.splitText(s[M].length),v=g.parentNode,_=Q.createElement("wrapper"),w=g.cloneNode(!0),_.appendChild(g.cloneNode(!0)),v.replaceChild(_,g),n=l.Util.Bounds(_),y=g.nodeValue,g=m,v.replaceChild(w,_)}switch(null!==y&&f(y,n.left,n.bottom,k),j){case"underline":u(k,n.left,Math.round(n.top+r.baseline+r.lineWidth),n.width,1,C);break;case"overline":u(k,n.left,n.top,n.width,1,C);break;case"line-through":u(k,n.left,Math.ceil(n.top+r.middle+r.lineWidth),n.width,1,C)}$+=s[M].length}}}function g(e,t){var a,n,i=Q.createElement("boundelement");return i.style.display="inline",a=e.style.listStyleType,e.style.listStyleType="none",i.appendChild(Q.createTextNode(t)),e.insertBefore(i,e.firstChild),n=l.Util.Bounds(i),e.removeChild(i),e.style.listStyleType=a,n}function M(e){var t=-1,a=1,n=e.parentNode.childNodes;if(e.parentNode){for(;n[++t]!==e;)1===n[t].nodeType&&a++;return a}return-1}function b(e,t,a){var n,i,r,s,o,d=W(e,"listStylePosition"),m=W(e,"listStyleType"),u=W(e,"fontWeight");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(m)){switch(r=M(e),m){case"decimal":s=r;break;case"decimal-leading-zero":s=1===r.toString().length?r="0"+r.toString():r.toString();break;case"upper-roman":s=l.Generate.ListRoman(r);break;case"lower-roman":s=l.Generate.ListRoman(r).toLowerCase();break;case"lower-alpha":s=l.Generate.ListAlpha(r).toLowerCase();break;case"upper-alpha":s=l.Generate.ListAlpha(r)}switch(s+=". ",o=g(e,s),u){case 401:u="bold";break;case 400:u="normal"}if(L.setVariable("fillStyle",W(e,"color")),L.setVariable("font",W(e,"fontVariant")+" "+u+" "+W(e,"fontStyle")+" "+W(e,"fontSize")+" "+W(e,"fontFamily")),"inside"!==d)return;L.setVariable("textAlign","left"),n=a.left,i=o.bottom,f(s,n,i,L)}}function v(e){var t=s[e];return t&&t.succeeded===!0?t.img:!1}function _(e,t){var a=Math.max(e.left,t.left),n=Math.max(e.top,t.top),i=Math.min(e.left+e.width,t.left+t.width),r=Math.min(e.top+e.height,t.top+t.height);return{left:a,top:n,width:i-a,height:r-n}}function w(e,t){var a;return t?"auto"!==e?(B=!0,a=i(e),t.children.push(a),a):t:a=i(0)}function k(e,t,a,n){var i,r,s,o,d,l,c,h=a.left,p=a.top,f=a.width,y=a.height,g=function(e){var t,a=[],n=["Top","Right","Bottom","Left"];for(t=0;4>t;t+=1)a.push({width:m(e,"border"+n[t]+"Width"),color:W(e,"border"+n[t]+"Color")});return a}(e);for(i=0;4>i;i+=1)if(r=g[i],r.width>0){switch(s=h,o=p,d=f,l=y-g[2].width,i){case 0:l=g[0].width;break;case 1:s=h+f-g[1].width,d=g[1].width;break;case 2:o=o+y-g[2].width,l=g[2].width;break;case 3:d=g[3].width}c={left:s,top:o,width:d,height:l},n&&(c=_(c,n)),c.width>0&&c.height>0&&u(t,s,o,c.width,c.height,r.color)}return g}function A(e,t,a){var i,r,s,o,d,l=Q.createElement("valuewrap"),m=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];for(i=0,o=m.length;o>i;i+=1){d=m[i];try{l.style[d]=W(e,d)}catch(u){n("html2canvas: Parse: Exception caught in renderFormValue: "+u.message)}}l.style.borderColor="black",l.style.borderStyle="solid",l.style.display="block",l.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(l.style.lineHeight=W(e,"height")),l.style.top=t.top+"px",l.style.left=t.left+"px",r="SELECT"===e.nodeName?e.options[e.selectedIndex].text:e.value,s=Q.createTextNode(r),l.appendChild(s),U.appendChild(l),y(e,s,a),U.removeChild(l)}function x(e,t,a,n,i,r,s,o,d,l){e.drawImage(t,a,n,i,r,s,o,d,l),G+=1}function C(e,t,a,n,i,r,s,o){var d=0,l=0;s-a>0&&(d=s-a),o-n>0&&(l=o-n),x(e,t,d,l,i-d,r-l,a+d,n+l,i-d,r-l)}function j(e,t,a,n,i,r,s){var o,d,l=Math.min(t.width,r);for(a.top=a.top-Math.ceil(a.top/t.height)*t.height,d=i+a.top;s+i>d;)o=Math.floor(d+t.height)>s+i?s+i-d:t.height,C(e,t,n+a.left,d,l,o,n,i),d=Math.floor(d+t.height)}function D(e,t,a,n,i,r,s){var o,d,l=Math.min(t.height,s);for(a.left=a.left-Math.ceil(a.left/t.width)*t.width,d=n+a.left;r+n>d;)o=Math.floor(d+t.width)>r+n?r+n-d:t.width,C(e,t,d,i+a.top,o,l,n,i),d=Math.floor(d+t.width)}function S(e,t,a){var i,r,s,o,d,m,u,c,h,p,f,y,g=W(e,"backgroundImage"),M=W(e,"backgroundRepeat").split(",")[0];if(/data:image\/.*;base64,/i.test(g)||/^(-webkit|-moz|linear-gradient|-o-)/.test(g)||(g=g.split(",")[0]),"undefined"!=typeof g&&/^(1|none)$/.test(g)===!1)if(g=l.Util.backgroundImage(g),i=v(g),r=l.Util.BackgroundPosition(e,t,i),i)switch(M){case"repeat-x":D(a,i,r,t.left,t.top,t.width,t.height);break;case"repeat-y":j(a,i,r,t.left,t.top,t.width,t.height);break;case"no-repeat":o=t.width-r.left,h=t.height-r.top,d=r.left,m=r.top,u=r.left+t.left,c=r.top+t.top,0>d?(d=Math.abs(d),u+=d,o=Math.min(t.width,i.width-d)):(o=Math.min(o,i.width),d=0),0>m?(m=Math.abs(m),c+=m,h=Math.min(t.height,i.height-m)):(h=Math.min(h,i.height),m=0),h>0&&o>0&&x(a,i,d,m,o,h,u,c,o,h);break;default:for(r.top=r.top-Math.ceil(r.top/i.height)*i.height,s=t.top+r.top;s<t.height+t.top;)p=Math.min(i.height,t.height+t.top-s),f=Math.floor(s+i.height)>p+s?p+s-s:i.height,s<t.top?(y=t.top-s,s=t.top):y=0,D(a,i,r,t.left,s,t.width,f),y>0&&(r.top+=y),s=Math.floor(s+i.height)-y}else n("html2canvas: Error loading background:"+g)}function T(e,t){var a,i,s,c,h,p,f,y,g,M,C,j,D=l.Util.Bounds(e),T=D.left,H=D.top,I=D.width,N=D.height,$=W(e,"backgroundColor"),z=W(e,"position"),F=W(e,"opacity");switch(t?P={}:(P=d(),t={opacity:1}),i=w(W(e,"zIndex"),t.zIndex),s={ctx:r(P.width||I,P.height||N),zIndex:i,opacity:F*t.opacity,cssPosition:z},t.clip&&(s.clip=l.Util.Extend({},t.clip)),o.useOverflow===!0&&/(hidden|scroll|auto)/.test(W(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(s.clip?s.clip=_(s.clip,D):s.clip=D),c=i.children.push(s),p=i.children[c-1].ctx,p.setVariable("globalAlpha",s.opacity),h=k(e,p,D,!1),s.borders=h,J.test(e.nodeName)&&"transparent"!==o.iframeDefault&&($="default"===o.iframeDefault?"#efefef":o.iframeDefault),f={left:T+h[3].width,top:H+h[0].width,width:I-(h[1].width+h[3].width),height:N-(h[0].width+h[2].width)},s.clip&&(f=_(f,s.clip)),f.height>0&&f.width>0&&(u(p,f.left,f.top,f.width,f.height,$),S(e,f,p)),e.nodeName){case"IMG":y=e.getAttribute("src"),a=v(y),a?(g=m(e,"paddingLeft"),M=m(e,"paddingTop"),C=m(e,"paddingRight"),j=m(e,"paddingBottom"),x(p,a,0,0,a.width,a.height,T+g+h[3].width,H+M+h[0].width,D.width-(h[1].width+h[3].width+g+C),D.height-(h[0].width+h[2].width+M+j))):n("html2canvas: Error loading <img>:"+y);break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&e.value.length>0&&A(e,D,s);break;case"TEXTAREA":e.value.length>0&&A(e,D,s);break;case"SELECT":e.options.length>0&&A(e,D,s);break;case"LI":b(e,s,f);break;case"CANVAS":g=m(e,"paddingLeft"),M=m(e,"paddingTop"),C=m(e,"paddingRight"),j=m(e,"paddingBottom"),x(p,e,0,0,e.width,e.height,T+g+h[3].width,H+M+h[0].width,D.width-(h[1].width+h[3].width+g+C),D.height-(h[0].width+h[2].width+M+j))}return i.children[c-1]}function H(e,t){if("none"!==W(e,"display")&&"hidden"!==W(e,"visibility")&&(t=T(e,t)||t,L=t.ctx,!J.test(e.nodeName))){var a,n,i,r=l.Util.Children(e);for(a=0,i=r.length;i>a;a+=1)n=r[a],1===n.nodeType?H(n,t):3===n.nodeType&&y(e,n,t)}}e.scroll(0,0);var I,N,$,z,F,L,P,E,Y,O,q={rangeBounds:!1,svgRendering:o.svgRendering&&function(){var e=new Image,i=t.createElement("canvas"),r=i.getContext===a?!1:i.getContext("2d");if(r===!1)return!1;i.width=i.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{r.drawImage(e,0,0),i.toDataURL()}catch(s){return!1}return n("html2canvas: Parse: SVG powered rendering available"),!0}()},R=o.elements===a?t.body:o.elements[0],B=!1,G=0,V={},Q=R.ownerDocument,J=new RegExp("("+o.ignoreElements+")"),U=Q.body;s=s||{},Q.createRange&&(I=Q.createRange(),I.getBoundingClientRect&&(N=Q.createElement("boundtest"),N.style.height="123px",N.style.display="block",U.appendChild(N),I.selectNode(N),$=I.getBoundingClientRect(),z=$.height,123===z&&(q.rangeBounds=!0),U.removeChild(N)));var W=l.Util.getCSS;for(F=T(R,null),q.svgRendering&&!function(e){function t(e){var a,n,r,s,o,d=l.Util.Children(e),m=d.length;for(o=0;m>o;o+=1)if(s=d[o],3===s.nodeType)i+=s.nodeValue.replace(/\</g,"&lt;").replace(/\>/g,"&gt;");else if(1===s.nodeType&&!/^(script|meta|title)$/.test(s.nodeName.toLowerCase())){if(i+="<"+s.nodeName.toLowerCase(),s.hasAttributes())for(a=s.attributes,r=a.length,n=0;r>n;n+=1)i+=" "+a[n].name+'="'+a[n].value+'"';i+=">",t(s),i+="</"+s.nodeName.toLowerCase()+">"}}var a=new Image,n=d(),i="";t(e),a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+n.width+"' height='"+n.height+"'>","<foreignObject width='"+n.width+"' height='"+n.height+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",i.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),a.onload=function(){F.svgRender=a}}(t.documentElement),E=0,Y=R.children,O=Y.length;O>E;E+=1)H(Y[E],F);return F.backgroundColor=W(t.documentElement,"backgroundColor"),F},l.Preload=function(i){function r(e){_.href=e,_.href=_.href;var t=_.protocol+_.host;return t===u}function s(){n("html2canvas: start: images: "+f.numLoaded+" / "+f.numTotal+" (failed: "+f.numFailed+")"),!f.firstRun&&f.numLoaded>=f.numTotal&&(n("Finished loading images: # "+f.numTotal+" (failed: "+f.numFailed+")"),"function"==typeof i.complete&&i.complete(f))}function o(t,n,r){var o,d,l=i.proxy;_.href=t,t=_.href,o="html2canvas_"+y++,r.callbackname=o,l+=l.indexOf("?")>-1?"&":"?",l+="url="+encodeURIComponent(t)+"&callback="+o,d=M.createElement("script"),e[o]=function(t){"error:"===t.substring(0,6)?(r.succeeded=!1,f.numLoaded++,f.numFailed++,s()):(m(n,r),n.src=t),e[o]=a;try{delete e[o]}catch(i){}d.parentNode.removeChild(d),d=null,delete r.script,delete r.callbackname},d.setAttribute("type","text/javascript"),d.setAttribute("src",l),r.script=d,e.document.body.appendChild(d)}function d(e){var t,i,r,o,m=l.Util.Children(e),u=!1;try{var h=m.length;for(t=0;h>t;t+=1)d(m[t])}catch(p){}try{u=e.nodeType}catch(y){u=!1,n("html2canvas: failed to access some element's nodeType - Exception: "+y.message)}if(1===u||u===a){try{i=l.Util.getCSS(e,"backgroundImage")}catch(p){n("html2canvas: failed to get background-image - Exception: "+p.message)}i&&"1"!==i&&"none"!==i&&(/^(-webkit|-o|-moz|-ms|linear)-/.test(i)?(o=l.Generate.Gradient(i,l.Util.Bounds(e)),o!==a&&(f[i]={img:o,succeeded:!0},f.numTotal++,f.numLoaded++,s())):(r=l.Util.backgroundImage(i.match(/data:image\/.*;base64,/i)?i:i.split(",")[0]),c.loadImage(r)))}}function m(t,n){t.onload=function(){n.timer!==a&&e.clearTimeout(n.timer),f.numLoaded++,n.succeeded=!0,t.onerror=t.onload=null,s()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(n.timer),i.proxy)){var a=t.src;return t=new Image,n.img=t,t.src=a,void o(t.src,t,n)}f.numLoaded++,f.numFailed++,n.succeeded=!1,t.onerror=t.onload=null,s()}}var u,c,h,p,f={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},y=0,g=i.elements[0]||t.body,M=g.ownerDocument,b=M.images,v=b.length,_=M.createElement("a"),w=function(e){return e.crossOrigin!==a}(new Image);for(_.href=e.location.href,u=_.protocol+_.host,c={loadImage:function(t){var n,s;t&&f[t]===a&&(n=new Image,t.match(/data:image\/.*;base64,/i)?(n.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),s=f[t]={img:n},f.numTotal++,m(n,s)):r(t)||i.allowTaint===!0?(s=f[t]={img:n},f.numTotal++,m(n,s),n.src=t):w&&!i.allowTaint&&i.useCORS?(n.crossOrigin="anonymous",s=f[t]={img:n},f.numTotal++,m(n,s),n.src=t,n.customComplete=function(){this.img.complete?this.img.onerror():this.timer=e.setTimeout(this.img.customComplete,100)}.bind(s),n.customComplete()):i.proxy&&(s=f[t]={img:n},f.numTotal++,o(t,n,s)))},cleanupDOM:function(r){var o,d;if(!f.cleanupDone){n(r&&"string"==typeof r?"html2canvas: Cleanup because: "+r:"html2canvas: Cleanup after timeout: "+i.timeout+" ms.");for(d in f)if(f.hasOwnProperty(d)&&(o=f[d],"object"==typeof o&&o.callbackname&&o.succeeded===a)){e[o.callbackname]=a;try{delete e[o.callbackname]}catch(l){}o.script&&o.script.parentNode&&(o.script.setAttribute("src","about:blank"),o.script.parentNode.removeChild(o.script)),f.numLoaded++,f.numFailed++,n("html2canvas: Cleaned up failed img: '"+d+"' Steps: "+f.numLoaded+" / "+f.numTotal)}e.stop!==a?e.stop():t.execCommand!==a&&t.execCommand("Stop",!1),t.close!==a&&t.close(),f.cleanupDone=!0,r&&"string"==typeof r||s()}},renderingDone:function(){p&&e.clearTimeout(p)}},i.timeout>0&&(p=e.setTimeout(c.cleanupDOM,i.timeout)),n("html2canvas: Preload starts: finding background-images"),f.firstRun=!0,d(g),n("html2canvas: Preload: Finding images"),h=0;v>h;h+=1)c.loadImage(b[h].getAttribute("src"));return f.firstRun=!1,n("html2canvas: Preload: Done."),f.numTotal===f.numLoaded&&s(),c},l.Renderer=function(e,a){function n(e){var t,a,r,s,o,d,l,m,u=[],c=[],h=e.children;for(t=0,o=h.length;o>t;t+=1)d=h[t],d.children&&d.children.length>0?(u.push(d),c.push(d.zindex)):i.push(d);for(c.sort(function(e,t){return e-t}),a=0,r=c.length;r>a;a+=1)for(s=c[a],l=0,m=u.length;m>=l;l+=1)if(u[l].zindex===s){d=u.splice(l,1),n(d[0]);break}}var i=[];if(n(e.zIndex),"function"!=typeof a._renderer._create)throw new Error("Invalid renderer defined");return a._renderer._create(e,a,t,i,l)},d=function(t,i){var r,s,o={logging:!1,elements:t,proxy:"http://html2canvas.appspot.com/",timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,iframeDefault:"default",ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,flashcanvas:a,width:null,height:null,taintTest:!0,renderer:"Canvas"};if(o=l.Util.Extend(i,o),"string"==typeof o.renderer&&l.Renderer[o.renderer]!==a)o._renderer=l.Renderer[o.renderer](o);else{if("function"!=typeof o.renderer)throw"Unknown renderer";o._renderer=o.renderer(o)}return l.logging=o.logging,o.complete=function(e){("function"!=typeof o.onpreloaded||o.onpreloaded(e)!==!1)&&(r=l.Parse(e,o),("function"!=typeof o.onparsed||o.onparsed(r)!==!1)&&(s=l.Renderer(r,o),"function"==typeof o.onrendered&&o.onrendered(s)))},e.setTimeout(function(){l.Preload(o)},0),{render:function(e,t){return l.Renderer(e,l.Util.Extend(t,o))},parse:function(e,t){return l.Parse(e,l.Util.Extend(t,o))},preload:function(e){return l.Preload(l.Util.Extend(e,o))},log:n}},d.log=n,d.Renderer={Canvas:a},l.Renderer.Canvas=function(i){i=i||{};var r,s=t,o=i.canvas||s.createElement("canvas"),d=!1,l=!1,m=!1,u=2880;if(o.getContext)n("html2canvas: Renderer: using canvas renderer"),m=!0;else if(i.flashcanvas!==a){d=!0,n("html2canvas: Renderer: canvas not available, using flashcanvas");var c=s.createElement("script");c.src=i.flashcanvas,c.onload=function(t,i){var r;return t.onload!==a?i:void(t.onreadystatechange!==a?(r=function(){"loaded"!==t.readyState&&"complete"!==t.readyState?e.setTimeout(r,250):i()},e.setTimeout(r,250)):n("html2canvas: Renderer: Can't track when flashcanvas is loaded"))}(c,function(){"undefined"!=typeof e.FlashCanvas&&(n("html2canvas: Renderer: Flashcanvas initialized"),e.FlashCanvas.initElement(o),m=!0,l!==!1&&r._create.apply(null,l))}),s.body.appendChild(c)}return r={_create:function(e,i,r,s,c){if(!m)return l=arguments,o;var h,p,f,y,g,M,b,v,_,w=o.getContext("2d"),k=t.createElement("canvas"),A=k.getContext!==a,x=A?k.getContext("2d"):{},C=[];if(o.width=o.style.width=d?Math.min(u,i.width||e.ctx.width):i.width||e.ctx.width,o.height=o.style.height=d?Math.min(u,i.height||e.ctx.height):i.height||e.ctx.height,_=w.fillStyle,w.fillStyle=e.backgroundColor,w.fillRect(0,0,o.width,o.height),w.fillStyle=_,i.svgRendering&&e.svgRender!==a)w.drawImage(e.svgRender,0,0);else for(p=0,f=s.length;f>p;p+=1){if(h=s.splice(0,1)[0],h.canvasPosition=h.canvasPosition||{},w.textBaseline="bottom",h.clip&&(w.save(),w.beginPath(),w.rect(h.clip.left,h.clip.top,h.clip.width,h.clip.height),w.clip()),h.ctx.storage)for(y=0,b=h.ctx.storage.length;b>y;y+=1)switch(v=h.ctx.storage[y],v.type){case"variable":w[v.name]=v.arguments;break;case"function":if("fillRect"===v.name)(!d||v.arguments[0]+v.arguments[2]<u&&v.arguments[1]+v.arguments[3]<u)&&w.fillRect.apply(w,v.arguments);else if("fillText"===v.name)(!d||v.arguments[1]<u&&v.arguments[2]<u)&&w.fillText.apply(w,v.arguments);else if("drawImage"===v.name&&v.arguments[8]>0&&v.arguments[7]){if(A&&i.taintTest&&-1===C.indexOf(v.arguments[0].src)){x.drawImage(v.arguments[0],0,0);try{x.getImageData(0,0,1,1)}catch(j){k=r.createElement("canvas"),x=k.getContext("2d");continue}C.push(v.arguments[0].src)}w.drawImage.apply(w,v.arguments)}}h.clip&&w.restore()}return n("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),f=i.elements.length,1===f&&"object"==typeof i.elements[0]&&"BODY"!==i.elements[0].nodeName&&d===!1?(M=c.Util.Bounds(i.elements[0]),g=r.createElement("canvas"),g.width=M.width,g.height=M.height,w=g.getContext("2d"),w.drawImage(o,M.left,M.top,M.width,M.height,0,0,M.width,M.height),o=null,g):o}}},e.html2canvas=d}(window,document);