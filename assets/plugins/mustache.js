var Mustache;!function(e){"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define?define(e):Mustache=e}(function(){function e(e,t){return RegExp.prototype.test.call(e,t)}function t(t){return!e(f,t)}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e){return String(e).replace(/[&<>"'\/]/g,function(e){return b[e]})}function i(e){this.string=e,this.tail=e,this.pos=0}function r(e,t){this.view=e,this.parent=t,this.clearCache()}function s(){this.clearCache()}function o(e){for(var t,n=e[3],a=n;(t=e[4])&&t.length;)e=t[t.length-1],a=e[3];return[n,a]}function l(e){function t(e,t,a){if(!n[e]){var i=l(t);n[e]=function(e,t){return i(e,t,a)}}return n[e]}var n={};return function(n,a,i){for(var r,s,l="",d=0,u=e.length;u>d;++d)switch(r=e[d],r[0]){case"#":s=i.slice.apply(i,o(r)),l+=n._section(r[1],a,s,t(d,r[4],i));break;case"^":l+=n._inverted(r[1],a,t(d,r[4],i));break;case">":l+=n._partial(r[1],a);break;case"&":l+=n._name(r[1],a);break;case"name":l+=n._escaped(r[1],a);break;case"text":l+=r[1]}return l}}function d(e){for(var t,n,a=[],i=a,r=[],s=0;s<e.length;++s)switch(t=e[s],t[0]){case"#":case"^":t[4]=[],r.push(t),i.push(t),i=t[4];break;case"/":if(0===r.length)throw new Error("Unopened section: "+t[1]);if(n=r.pop(),n[1]!==t[1])throw new Error("Unclosed section: "+n[1]);i=r.length>0?r[r.length-1][4]:a;break;default:i.push(t)}if(n=r.pop())throw new Error("Unclosed section: "+n[1]);return a}function u(e){for(var t,n,a=[],i=0;i<e.length;++i)t=e[i],n&&"text"===n[0]&&"text"===t[0]?(n[1]+=t[1],n[3]=t[3]):(n=t,a.push(t));return a}function m(e){if(2!==e.length)throw new Error("Invalid tags: "+e.join(" "));return[new RegExp(n(e[0])+"\\s*"),new RegExp("\\s*"+n(e[1]))]}var c={};c.name="mustache.js",c.version="0.7.0",c.tags=["{{","}}"],c.Scanner=i,c.Context=r,c.Writer=s;var h=/\s*/,p=/\s+/,f=/\S/,y=/\s*=/,g=/\s*\}/,M=/#|\^|\/|>|\{|&|=|!/,v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};c.escape=a,i.prototype.eos=function(){return""===this.tail},i.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},i.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},r.make=function(e){return e instanceof r?e:new r(e)},r.prototype.clearCache=function(){this._cache={}},r.prototype.push=function(e){return new r(e,this)},r.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."===e)t=this.view;else for(var n=this;n;){if(e.indexOf(".")>0){var a=e.split("."),i=0;for(t=n.view;t&&i<a.length;)t=t[a[i++]]}else t=n.view[e];if(null!=t)break;n=n.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},s.prototype.clearCache=function(){this._cache={},this._partialCache={}},s.prototype.compile=function(e,t){var n=this._cache[e];if(!n){var a=c.parse(e,t);n=this._cache[e]=this.compileTokens(a,e)}return n},s.prototype.compilePartial=function(e,t,n){var a=this.compile(t,n);return this._partialCache[e]=a,a},s.prototype.compileTokens=function(e,t){var n=l(e),a=this;return function(e,i){if(i)if("function"==typeof i)a._loadPartial=i;else for(var s in i)a.compilePartial(s,i[s]);return n(a,r.make(e),t)}},s.prototype.render=function(e,t,n){return this.compile(e)(t,n)},s.prototype._section=function(e,t,n,a){var i=t.lookup(e);switch(typeof i){case"object":if(v(i)){for(var r="",s=0,o=i.length;o>s;++s)r+=a(this,t.push(i[s]));return r}return i?a(this,t.push(i)):"";case"function":var l=this,d=function(e){return l.render(e,t)},u=i.call(t.view,n,d);return null!=u?u:"";default:if(i)return a(this,t)}return""},s.prototype._inverted=function(e,t,n){var a=t.lookup(e);return!a||v(a)&&0===a.length?n(this,t):""},s.prototype._partial=function(e,t){e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},s.prototype._name=function(e,t){var n=t.lookup(e);return"function"==typeof n&&(n=n.call(t.view)),null==n?"":String(n)},s.prototype._escaped=function(e,t){return c.escape(this._name(e,t))},c.parse=function(e,a){function r(){if(k&&!x)for(;w.length;)_.splice(w.pop(),1);else w=[];k=!1,x=!1}a=a||c.tags;for(var s,o,l,f,v=m(a),b=new i(e),_=[],w=[],k=!1,x=!1;!b.eos();){if(s=b.pos,l=b.scanUntil(v[0]))for(var C=0,A=l.length;A>C;++C)f=l.charAt(C),t(f)?w.push(_.length):x=!0,_.push(["text",f,s,s+1]),s+=1,"\n"===f&&r();if(s=b.pos,!b.scan(v[0]))break;if(k=!0,o=b.scan(M)||"name",b.scan(h),"="===o)l=b.scanUntil(y),b.scan(y),b.scanUntil(v[1]);else if("{"===o){var D=new RegExp("\\s*"+n("}"+a[1]));l=b.scanUntil(D),b.scan(g),b.scanUntil(v[1]),o="&"}else l=b.scanUntil(v[1]);if(!b.scan(v[1]))throw new Error("Unclosed tag at "+b.pos);_.push([o,l,s,b.pos]),("name"===o||"{"===o||"&"===o)&&(x=!0),"="===o&&(a=l.split(p),v=m(a))}return _=u(_),d(_)};var _=new s;return c.clearCache=function(){return _.clearCache()},c.compile=function(e,t){return _.compile(e,t)},c.compilePartial=function(e,t,n){return _.compilePartial(e,t,n)},c.compileTokens=function(e,t){return _.compileTokens(e,t)},c.render=function(e,t,n){return _.render(e,t,n)},c.to_html=function(e,t,n,a){var i=c.render(e,t,n);return"function"!=typeof a?i:void a(i)},c}());