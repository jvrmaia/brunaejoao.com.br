!function(){var e={},t=function(e){this.__class__="Validator",this.__version__="1.2.2",this.options=e||{},this.bindingKey=this.options.bindingKey||"_validatorjsConstraint"};t.prototype={constructor:t,validate:function(e,t,n){if("string"!=typeof e&&"object"!=typeof e)throw new Error("You must validate an object or a string");return"string"==typeof e||s(e)?this._validateString(e,t,n):this.isBinded(e)?this._validateBindedObject(e,t):this._validateObject(e,t,n)},bind:function(e,t){if("object"!=typeof e)throw new Error("Must bind a Constraint to an object");return e[this.bindingKey]=new n(t),this},unbind:function(e){return"undefined"==typeof e._validatorjsConstraint?this:(delete e[this.bindingKey],this)},isBinded:function(e){return"undefined"!=typeof e[this.bindingKey]},getBinded:function(e){return this.isBinded(e)?e[this.bindingKey]:null},_validateString:function(e,t,n){var a,r=[];s(t)||(t=[t]);for(var o=0;o<t.length;o++){if(!(t[o]instanceof i))throw new Error("You must give an Assert or an Asserts array to validate a string");a=t[o].check(e,n),!0!==a&&r.push(a)}return r.length?r:!0},_validateObject:function(e,t,a){if("object"!=typeof t)throw new Error("You must give a constraint to validate an object");return t instanceof i?t.check(e,a):t instanceof n?t.check(e,a):new n(t).check(e,a)},_validateBindedObject:function(e,t){return e[this.bindingKey].check(e,t)}},t.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var n=function(e,t){if(this.__class__="Constraint",this.options=t||{},this.nodes={},e)try{this._bootstrap(e)}catch(n){throw new Error("Should give a valid mapping object to Constraint",n,e)}};n.prototype={constructor:n,isRequired:function(e,t,a){for(var i=this.get(e),r=s(i)?i:[i],o=r.length-1;o>=0;o--){if(i=r[o],"Required"===i.__class__&&r[o].requiresValidation(t))return!0;if(a&&("Collection"===i.__class__&&(i=i.constraint),i instanceof n)){i.options.deepRequired=a;for(var l in i.nodes)if(i.isRequired(l,t,a))return!0}}return!1},check:function(e,t){var n,a={};for(var o in this.nodes){var l=this.isRequired(o,t,this.options.deepRequired);if(this.has(o,e)||this.options.strict||l)try{this.has(o,this.options.strict||l?e:void 0)||(new i).HaveProperty(o).validate(e),n=this._check(o,e[o],t),(s(n)&&n.length>0||!s(n)&&!r(n))&&(a[o]=n)}catch(d){a[o]=d}}return r(a)?!0:a},add:function(e,t){if(t instanceof i||s(t)&&t[0]instanceof i)return this.nodes[e]=t,this;if("object"==typeof t&&!s(t))return this.nodes[e]=t instanceof n?t:new n(t,this.options),this;throw new Error("Should give an Assert, an Asserts array, a Constraint",t)},has:function(e,t){return t="undefined"!=typeof t?t:this.nodes,"undefined"!=typeof t[e]},get:function(e,t){return this.has(e)?this.nodes[e]:t||null},remove:function(e){var t=[];for(var n in this.nodes)n!==e&&(t[n]=this.nodes[n]);return this.nodes=t,this},_bootstrap:function(e){if(e instanceof n)return this.nodes=e.nodes;for(var t in e)this.add(t,e[t])},_check:function(e,t,a){if(this.nodes[e]instanceof i)return this._checkAsserts(t,[this.nodes[e]],a);if(s(this.nodes[e]))return this._checkAsserts(t,this.nodes[e],a);if(this.nodes[e]instanceof n)return this.nodes[e].check(t,a);throw new Error("Invalid node",this.nodes[e])},_checkAsserts:function(e,t,n){for(var a,i=[],r=0;r<t.length;r++)a=t[r].check(e,n),"undefined"!=typeof a&&!0!==a&&i.push(a);return i}};var a=function(e,t,n){if(this.__class__="Violation",!(e instanceof i))throw new Error("Should give an assertion implementing the Assert interface");this.assert=e,this.value=t,"undefined"!=typeof n&&(this.violation=n)};a.prototype={show:function(){var e={assert:this.assert.__class__,value:this.value};return this.violation&&(e.violation=this.violation),e},__toString:function(){return"undefined"!=typeof this.violation&&(this.violation='", '+this.getViolation().constraint+" expected was "+this.getViolation().expected),this.assert.__class__+' assert failed for "'+this.value+this.violation||""},getViolation:function(){var e,t;for(e in this.violation)t=this.violation[e];return{constraint:e,expected:t}}};var i=function(e){this.__class__="Assert",this.__parentClass__=this.__class__,this.groups=[],"undefined"!=typeof e&&this.addGroup(e)};i.extend=function(e){function t(){i.apply(this,arguments)}if("object"!=typeof e)throw new Error("Invalid parameter: `asserts` should be an object");if(0===Object.keys(e).length)throw new Error("Invalid parameter: `asserts` should have at least one property");t.prototype=Object.create(i.prototype),t.prototype.constructor=t;for(var n in e){if("function"!=typeof e[n])throw new Error("The extension assert must be a function");t.prototype[n]=e[n]}return t},i.prototype={construct:i,requiresValidation:function(e){return e&&!this.hasGroup(e)?!1:!e&&this.hasGroups()?!1:!0},check:function(e,t){if(!this.requiresValidation(t))return!0;try{return this.validate(e,t)}catch(n){return n}},hasGroup:function(e){return s(e)?this.hasOneOf(e):"Any"===e?!0:this.hasGroups()?-1!==this.groups.indexOf(e):"Default"===e},hasOneOf:function(e){for(var t=0;t<e.length;t++)if(this.hasGroup(e[t]))return!0;return!1},hasGroups:function(){return this.groups.length>0},addGroup:function(e){return s(e)?this.addGroups(e):(this.hasGroup(e)||this.groups.push(e),this)},removeGroup:function(e){for(var t=[],n=0;n<this.groups.length;n++)e!==this.groups[n]&&t.push(this.groups[n]);return this.groups=t,this},addGroups:function(e){for(var t=0;t<e.length;t++)this.addGroup(e[t]);return this},HaveProperty:function(e){return this.__class__="HaveProperty",this.node=e,this.validate=function(e){if("undefined"==typeof e[this.node])throw new a(this,e,{value:this.node});return!0},this},Blank:function(){return this.__class__="Blank",this.validate=function(e){if("string"!=typeof e)throw new a(this,e,{value:t.errorCode.must_be_a_string});if(""!==e.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new a(this,e);return!0},this},Callback:function(e){if(this.__class__="Callback",this.arguments=Array.prototype.slice.call(arguments),1===this.arguments.length?this.arguments=[]:this.arguments.splice(0,1),"function"!=typeof e)throw new Error("Callback must be instanciated with a function");return this.fn=e,this.validate=function(e){var t;try{t=this.fn.apply(this,[e].concat(this.arguments))}catch(n){throw new a(this,e,{error:n})}if(!0!==t)throw new a(this,e,{result:t});return!0},this},Choice:function(e){if(this.__class__="Choice",!s(e)&&"function"!=typeof e)throw new Error("Choice must be instanciated with an array or a function");return this.list=e,this.validate=function(e){for(var t="function"==typeof this.list?this.list():this.list,n=0;n<t.length;n++)if(e===t[n])return!0;throw new a(this,e,{choices:t})},this},Collection:function(e){return this.__class__="Collection",this.constraint="undefined"!=typeof e?e instanceof i?e:new n(e):!1,this.validate=function(e,n){var i,o=new t,l=0,d={},u=this.groups.length?this.groups:n;if(!s(e))throw new a(this,e,{value:t.errorCode.must_be_an_array});for(var m=0;m<e.length;m++)i=this.constraint?o.validate(e[m],this.constraint,u):o.validate(e[m],u),r(i)||(d[l]=i),l++;return r(d)?!0:d},this},Count:function(e){return this.__class__="Count",this.count=e,this.validate=function(e){if(!s(e))throw new a(this,e,{value:t.errorCode.must_be_an_array});var n="function"==typeof this.count?this.count(e):this.count;if(isNaN(Number(n)))throw new Error("Count must be a valid interger",n);if(n!==e.length)throw new a(this,e,{count:n});return!0},this},Email:function(){return this.__class__="Email",this.validate=function(e){var n=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!=typeof e)throw new a(this,e,{value:t.errorCode.must_be_a_string});if(!n.test(e))throw new a(this,e);return!0},this},EqualTo:function(e){if(this.__class__="EqualTo","undefined"==typeof e)throw new Error("EqualTo must be instanciated with a value or a function");return this.reference=e,this.validate=function(e){var t="function"==typeof this.reference?this.reference(e):this.reference;if(t!==e)throw new a(this,e,{value:t});return!0},this},GreaterThan:function(e){if(this.__class__="GreaterThan","undefined"==typeof e)throw new Error("Should give a threshold value");return this.threshold=e,this.validate=function(e){if(""===e||isNaN(Number(e)))throw new a(this,e,{value:t.errorCode.must_be_a_number});if(this.threshold>=e)throw new a(this,e,{threshold:this.threshold});return!0},this},GreaterThanOrEqual:function(e){if(this.__class__="GreaterThanOrEqual","undefined"==typeof e)throw new Error("Should give a threshold value");return this.threshold=e,this.validate=function(e){if(""===e||isNaN(Number(e)))throw new a(this,e,{value:t.errorCode.must_be_a_number});if(this.threshold>e)throw new a(this,e,{threshold:this.threshold});return!0},this},InstanceOf:function(e){if(this.__class__="InstanceOf","undefined"==typeof e)throw new Error("InstanceOf must be instanciated with a value");return this.classRef=e,this.validate=function(e){if(!0!=e instanceof this.classRef)throw new a(this,e,{classRef:this.classRef});return!0},this},IsString:function(){return this.__class__="IsString",this.validate=function(e){if(!o(e))throw new a(this,e,{value:t.errorCode.must_be_a_string});return!0},this},Length:function(e){if(this.__class__="Length",!e.min&&!e.max)throw new Error("Length assert must be instanciated with a { min: x, max: y } object");return this.min=parseInt(e.min),this.max=parseInt(e.max),this.validate=function(e){if("string"!=typeof e&&!s(e))throw new a(this,e,{value:t.errorCode.must_be_a_string_or_array});if("undefined"!=typeof this.min&&this.min===this.max&&e.length!==this.min)throw new a(this,e,{min:this.min,max:this.max});if("undefined"!=typeof this.max&&e.length>this.max)throw new a(this,e,{max:this.max});if("undefined"!=typeof this.min&&e.length<this.min)throw new a(this,e,{min:this.min});return!0},this},LessThan:function(e){if(this.__class__="LessThan","undefined"==typeof e)throw new Error("Should give a threshold value");return this.threshold=e,this.validate=function(e){if(""===e||isNaN(Number(e)))throw new a(this,e,{value:t.errorCode.must_be_a_number});if(this.threshold<=e)throw new a(this,e,{threshold:this.threshold});return!0},this},LessThanOrEqual:function(e){if(this.__class__="LessThanOrEqual","undefined"==typeof e)throw new Error("Should give a threshold value");return this.threshold=e,this.validate=function(e){if(""===e||isNaN(Number(e)))throw new a(this,e,{value:t.errorCode.must_be_a_number});if(this.threshold<e)throw new a(this,e,{threshold:this.threshold});return!0},this},NotNull:function(){return this.__class__="NotNull",this.validate=function(e){if(null===e||"undefined"==typeof e)throw new a(this,e);return!0},this},NotBlank:function(){return this.__class__="NotBlank",this.validate=function(e){if("string"!=typeof e)throw new a(this,e,{value:t.errorCode.must_be_a_string});if(""===e.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new a(this,e);return!0},this},NotEqualTo:function(e){if(this.__class__="NotEqualTo","undefined"==typeof e)throw new Error("NotEqualTo must be instanciated with a value or a function");return this.reference=e,this.validate=function(e){var t="function"==typeof this.reference?this.reference(e):this.reference;if(t===e)throw new a(this,e,{value:t});return!0},this},Null:function(){return this.__class__="Null",this.validate=function(e){if(null!==e)throw new a(this,e);return!0},this},Range:function(e,t){if(this.__class__="Range","undefined"==typeof e||"undefined"==typeof t)throw new Error("Range assert expects min and max values");return this.min=e,this.max=t,this.validate=function(e){try{return"string"==typeof e&&isNaN(Number(e))||s(e)?(new i).Length({min:this.min,max:this.max}).validate(e):(new i).GreaterThanOrEqual(this.min).validate(e)&&(new i).LessThanOrEqual(this.max).validate(e),!0}catch(t){throw new a(this,e,t.violation)}return!0},this},Regexp:function(e,n){if(this.__class__="Regexp","undefined"==typeof e)throw new Error("You must give a regexp");return this.regexp=e,this.flag=n,this.validate=function(e){if("string"!=typeof e)throw new a(this,e,{value:t.errorCode.must_be_a_string});if(!new RegExp(this.regexp,this.flag).test(e))throw new a(this,e,{regexp:this.regexp,flag:this.flag});return!0},this},Required:function(){return this.__class__="Required",this.validate=function(e){if("undefined"==typeof e)throw new a(this,e);try{"string"==typeof e?(new i).NotNull().validate(e)&&(new i).NotBlank().validate(e):!0===s(e)&&(new i).Length({min:1}).validate(e)}catch(t){throw new a(this,e)}return!0},this},Unique:function(e){return this.__class__="Unique","object"==typeof e&&(this.key=e.key),this.validate=function(e){var n,i=[];if(!s(e))throw new a(this,e,{value:t.errorCode.must_be_an_array});for(var r=0;r<e.length;r++)if(n="object"==typeof e[r]?e[r][this.key]:e[r],"undefined"!=typeof n){if(-1!==i.indexOf(n))throw new a(this,e,{value:n});i.push(n)}return!0},this}},e.Assert=i,e.Validator=t,e.Violation=a,e.Constraint=n,Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var a=0;if(arguments.length>1&&(a=Number(arguments[1]),a!=a?a=0:0!==a&&a!=1/0&&a!=-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=n)return-1;for(var i=a>=0?a:Math.max(n-Math.abs(a),0);n>i;i++)if(i in t&&t[i]===e)return i;return-1});var r=function(e){for(var t in e)return!1;return!0},s=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(e){return"[object String]"===Object.prototype.toString.call(e)};"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:window["undefined"!=typeof validatorjs_ns?validatorjs_ns:"Validator"]=e}();