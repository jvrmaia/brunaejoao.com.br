(function(){function e(e){function n(e){e+="";var t=e.split(":"),n=~e.indexOf("-")?-1:1,a=Math.abs(+t[0]),i=parseInt(t[1],10)||0,r=parseInt(t[2],10)||0;return n*(60*a+i+r/60)}function a(e,t,a,i,r,s,o,l,d,u){this.name=e,this.startYear=+t,this.endYear=+a,this.month=+i,this.day=+r,this.dayRule=+s,this.time=n(o),this.timeRule=+l,this.offset=n(d),this.letters=u||""}function i(e,t){this.rule=t,this.start=t.start(e)}function r(e,t){return e.isLast?-1:t.isLast?1:t.start-e.start}function s(e){this.name=e,this.rules=[]}function o(t,a,i,r,s,o){var l,d="string"==typeof s?s.split("_"):[9999];for(this.name=t,this.offset=n(a),this.ruleSet=i,this.letters=r,l=0;d.length>l;l++)d[l]=+d[l];this.until=e.utc(d).subtract("m",n(o))}function l(e,t){return e.until-t.until}function d(e){this.name=c(e),this.displayName=e,this.zones=[]}function u(e){var t,n,a;for(t in e)for(a=e[t],n=0;a.length>n;n++)m(t+"	"+a[n])}function m(e){if(w[e])return w[e];var t=e.split(/\s/),n=c(t[0]),i=new a(n,t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);return w[e]=i,y(n).add(i),i}function c(e){return(e||"").toLowerCase().replace(/\//g,"_")}function h(e){var t,n,a;for(t in e)for(a=e[t],n=0;a.length>n;n++)f(t+"	"+a[n])}function p(e){var t;for(t in e)C[c(t)]=c(e[t])}function f(e){if(x[e])return x[e];var t=e.split(/\s/),n=c(t[0]),a=new o(n,t[1],y(t[2]),t[3],t[4],t[5]);return x[e]=a,g(t[0]).add(a),a}function y(e){return e=c(e),k[e]||(k[e]=new s(e)),k[e]}function g(e){var t=c(e);return C[t]&&(t=C[t]),A[t]||(A[t]=new d(e)),A[t]}function M(e){e&&(e.zones&&h(e.zones),e.rules&&u(e.rules),e.links&&p(e.links))}var v,b=e.fn.zoneName,_=e.fn.zoneAbbr,w={},k={},x={},A={},C={},D=1,j=2,S=7,T=8;return a.prototype={contains:function(e){return e>=this.startYear&&this.endYear>=e},start:function(t){return t=Math.min(Math.max(t,this.startYear),this.endYear),e.utc([t,this.month,this.date(t),0,this.time])},date:function(e){return this.dayRule===S?this.day:this.dayRule===T?this.lastWeekday(e):this.weekdayAfter(e)},weekdayAfter:function(t){for(var n=this.day,a=e([t,this.month,1]).day(),i=this.dayRule+1-a;n>i;)i+=7;return i},lastWeekday:function(t){var n=this.day,a=n%7,i=e([t,this.month+1,1]).day(),r=e([t,this.month,1]).daysInMonth(),s=r+(a-(i-1))-7*~~(n/7);return a>=i&&(s-=7),s}},i.prototype={equals:function(e){return e&&e.rule===this.rule?864e5>Math.abs(e.start-this.start):!1}},s.prototype={add:function(e){this.rules.push(e)},ruleYears:function(e,t){var n,a,s,o=e.year(),l=[];for(n=0;this.rules.length>n;n++)a=this.rules[n],a.contains(o)?l.push(new i(o,a)):a.contains(o+1)&&l.push(new i(o+1,a));return l.push(new i(o-1,this.lastYearRule(o-1))),t&&(s=new i(o-1,t.lastRule()),s.start=t.until.clone().utc(),s.isLast=t.ruleSet!==this,l.push(s)),l.sort(r),l},rule:function(e,t,n){var a,i,r,s,o,l=this.ruleYears(e,n),d=0;for(n&&(i=n.offset+n.lastRule().offset,r=9e4*Math.abs(i)),o=l.length-1;o>-1;o--)s=a,a=l[o],a.equals(s)||(n&&!a.isLast&&r>=Math.abs(a.start-n.until)&&(d+=i-t),a.rule.timeRule===j&&(d=t),a.rule.timeRule!==D&&a.start.add("m",-d),d=a.rule.offset+t);for(o=0;l.length>o;o++)if(a=l[o],e>=a.start&&!a.isLast)return a.rule;return v},lastYearRule:function(e){var t,n,a,i=v,r=-1e30;for(t=0;this.rules.length>t;t++)n=this.rules[t],e>=n.startYear&&(a=n.start(e),a>r&&(r=a,i=n));return i}},o.prototype={rule:function(e,t){return this.ruleSet.rule(e,this.offset,t)},lastRule:function(){return this._lastRule||(this._lastRule=this.rule(this.until)),this._lastRule},format:function(e){return this.letters.replace("%s",e.letters)}},d.prototype={zoneAndRule:function(e){var t,n,a;for(e=e.clone().utc(),t=0;this.zones.length>t&&(n=this.zones[t],!(n.until>e));t++)a=n;return[n,n.rule(e,a)]},add:function(e){this.zones.push(e),this.zones.sort(l)},format:function(e){var t=this.zoneAndRule(e);return t[0].format(t[1])},offset:function(e){var t=this.zoneAndRule(e);return-(t[0].offset+t[1].offset)}},e.updateOffset=function(e){var t;e._z&&(t=e._z.offset(e),16>Math.abs(t)&&(t/=60),e.zone(t))},e.fn.tz=function(t){return t?(this._z=g(t),this._z&&e.updateOffset(this),this):this._z?this._z.displayName:void 0},e.fn.zoneName=function(){return this._z?this._z.format(this):b.call(this)},e.fn.zoneAbbr=function(){return this._z?this._z.format(this):_.call(this)},e.tz=function(){var t,n=[],a=arguments.length-1;for(t=0;a>t;t++)n[t]=arguments[t];return e.apply(null,n).tz(arguments[a])},e.tz.add=M,e.tz.addRule=m,e.tz.addZone=f,e.tz.version=t,v=m("- 0 9999 0 0 0 0 0 0"),e}var t="0.0.1";"function"==typeof define&&define.amd?define("moment-timezone",["moment"],e):"undefined"!=typeof window&&window.moment?e(window.moment):"undefined"!=typeof module&&(module.exports=e(require("./moment")))}).apply(this);