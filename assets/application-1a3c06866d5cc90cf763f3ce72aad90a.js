function init_I18n(){form_helper_messages={empty:"",chars:I18n.t("formhelper.chars"),"waiting-validation":I18n.t("formhelper.waiting_validation"),"error-required":I18n.t("formhelper.error_required"),"success-required":I18n.t("formhelper.success_required"),"email-invalid-format":I18n.t("formhelper.email_invalid_format"),"email-ok":I18n.t("formhelper.email_ok"),"fullname-invalid-format":I18n.t("formhelper.fullname_invalid_format"),"fullname-ok":I18n.t("formhelper.fullname_ok"),"name-invalid-format":I18n.t("formhelper.name_invalid_format"),"name-ok":I18n.t("formhelper.name_ok"),"cpf-invalid-format":I18n.t("formhelper.cpf_invalid_format"),"cpf-ok":I18n.t("formhelper.cpf_ok"),"date-invalid-format":I18n.t("formhelper.date_invalid_format"),"date-ok":I18n.t("formhelper.date_ok"),"password-rep-ok":I18n.t("formhelper.password_rep_ok"),"password-rep-invalid":I18n.t("formhelper.password_rep_invalid"),"date-invalid-old":I18n.t("formhelper.date_invalid_old"),"password-too-short":I18n.t("formhelper.password_too_short"),"password-weak":I18n.t("formhelper.password_weak"),"password-good":I18n.t("formhelper.password_good"),"password-power":I18n.t("formhelper.password_power"),"chosen-not-found":I18n.t("formhelper.chosen_not_found"),"main-element-is-not-a-form":I18n.t("formhelper.main_element_is_not_a_form"),"template-not-found":I18n.t("formhelper.template_not_found"),"creditcard-fail":I18n.t("formhelper.creditcard_fail"),"creditcard-number-ok":I18n.t("formhelper.creditcard_number_ok"),"creditcard-number-fail0-visa":I18n.t("formhelper.creditcard_number_fail0_visa"),"creditcard-number-fail0-master":I18n.t("formhelper.creditcard_number_fail0_master"),"creditcard-number-fail0-amex":I18n.t("formhelper.creditcard_number_fail0_amex"),"creditcard-number-fail0-elo":I18n.t("formhelper.creditcard_number_fail0_elo"),"creditcard-number-fail1":I18n.t("formhelper.creditcard_number_fail1"),"creditcard-securitycode-ok":I18n.t("formhelper.creditcard_securitycode_ok"),"creditcard-securitycode-fail-visa":I18n.t("formhelper.creditcard_securitycode_fail_visa"),"creditcard-securitycode-fail-master":I18n.t("formhelper.creditcard_securitycode_fail_master"),"creditcard-securitycode-fail-amex":I18n.t("formhelper.creditcard_securitycode_fail_amex"),"creditcard-securitycode-fail-elo":I18n.t("formhelper.creditcard_securitycode_fail_elo")}}function backbone_proccess_error(e){if(!e.getAllResponseHeaders())return!1;var t=e.responseText;try{var o=JSON.parse(t);o.code&&99==o.code||Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}catch(a){}return!0}function getfu(e){var t=null;return(test=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(location.search))&&(t=1*decodeURIComponent(test[1])),t||(test=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(Backbone.history.fragment))&&(t=1*decodeURIComponent(test[1])),t}function get_meta(e,t){var o="";if(meta_content_cache[e]&&!t)o=meta_content_cache[e];else{var a=$("meta[name='"+e+"']");a.get(0)&&(o=$("meta[name='"+e+"']").attr("content"),meta_content_cache[e]=o)}return o}function set_meta(e,t){$('meta[name="'+e+'"]').attr("content",t)}function loadGoogleMapsApi(){var e=get_meta("lang");if(e=e.replace("_","-"),"undefined"==typeof google){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyD2UiOa9DmVjfpHnVHoz8yAJyh4LkQ2AQ8&sensor=true&channel=icasei-front&language="+e+"&callback=loadGoogleMapsApiReady",t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)}else loadGoogleMapsApiReady()}function loadGoogleMapsApiReady(){$("body").trigger("gmap_loaded")}function load_css(e){if("true"!=get_meta("CD")){var t=document.createElement("LINK");t.rel="stylesheet",t.type="text/css",t.href=e;var o=document.getElementsByTagName("HEAD");null!=o[0]&&o[0].appendChild(t)}}function load_js(e,t,o){if("true"==get_meta("CD"))return void(null!=t&&t.call(this));var a=$("head script[src~='"+e+"']");if(o&&a.get(0)&&a.remove(),a=$("head script[src~='"+e+"']"),a.get(0))null!=t&&t.call(this);else{var n=document.createElement("SCRIPT");n.type="text/javascript",n.src=e,n.async=!0,n.defer=!0;var i=t;null!=i&&(n.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&i&&(i.call(this),i=null)},n.onload=function(){i&&(i.call(this),i=null)});var s=document.getElementsByTagName("HEAD");null!=s[0]&&s[0].appendChild(n)}}function load_noivos(e,t){var o="";e&&(o=e),"true"==get_meta("CD")&&(o=get_meta("noivos"));var a=new Noivo;a.fetch({cache:!1,data:{login:o},success:function(){set_meta("csrf-token",a.get("csrf")),window.noivo=a,t&&t.call(a,!0)},error:function(e,t,o){if("true"!=get_meta("CD"))backbone_proccess_error(t);else{var a=t.responseText;console.error(a)}}})}function check_localdata(e){var t=$("script[id='"+e+"']");return t.get(0)?!0:!1}function check_localstorage(e){return"true"==get_meta("CD")?!0:!1}function render_template(e,t,o,a){var n=null,i="",s=$("#"+e);if(s.get(0))return i=s.html(),n=new EJS({text:i}).render(o),void a.call(null,n);var r={lang:get_meta("lang")},l=$.param(r);return a?$.ajax({url:t,type:"GET",dataType:"text",data:l,success:function(e,t){n=new EJS({text:e}).render(o),a.call(null,n)}}):($.ajax({url:t,type:"GET",dataType:"text",async:!1,data:l,success:function(e,t){i=e}}),n=new EJS({text:i}).render(o)),n}function loadCss(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function load_start(){new Date}function load_end(){new Date}function get_main_container(){return $(".inner-content")}function change_content(e,t,o){var a=function(){window.animating=!0;var a=get_main_container();o.container&&(a=$(o.container));var n=!0;"undefined"!=typeof o.destroy_view&&(n=o.destroy_view);var i=500;"undefined"!=typeof o.animation_time&&(i=o.animation_time),o.no_scroll||$("body,html").animate({scrollTop:0},400),a.animate({opacity:0},i,function(){App&&App.current_view&&n&&(App.current_view.remove&&App.current_view.remove(),App.current_view=null),a.empty(),AngularHelper.compile(a,e),$(document).trigger("icasei_content_change"),t&&t.call(this),a.animate({opacity:1},i,function(){window.animating=!1})});var s=1*$("#menu").height(),r=1*$("body").height();s>r?$("body").height(s+150):$("#menu").height(s)};if(o.template){var n=$(".template-layout-"+o.template);n.get(0)?a():render_template("template_main_"+o.template+"_id","/templates/backbone/"+o.noivos.get("id_noivo")+"/layout/"+o.noivos.get("template_html_version")+"/"+o.template,{noivos:o.noivos.attributes},function(e){$("#main_template").empty().append($(e)),$(document).trigger("icasei_template_change"),a()})}else a()}function I18n_translate(){return I18n.t.apply(I18n,arguments)}function get_image_path(e,t,o){return o?"/userfiles/"+e.charAt(0)+"/"+e+"/imagens/"+o+"/"+t:"/userfiles/"+e.charAt(0)+"/"+e+"/imagens/"+t}function image_thumb(e,t){var o=1;0==t.scale&&(o=t.scale);var a=1;0==t.crop&&(a=t.crop);var n=0;0!=t.use&&(n=t.use);var i=0;t.width&&(i=t.width);var s=0;t.height&&(s=t.height);var r=0;t.min_width&&(r=t.min_width);var l=0;t.min_height&&(l=t.min_height);var c="";return t.where&&(c=t.where),"/images/thumb?scale="+o+"&crop="+a+"&use="+n+"&where="+c+"&width="+i+"&height="+s+"&min_width="+r+"&min_height="+l+"&img=/produtos/"+e}function user_image_thumb(e,t){var o=t.login,a=1;"scale"in t&&(a=t.scale);var n=1;"crop"in t&&(n=t.crop);var i=0;"width"in t&&(i=t.width);var s=0;"height"in t&&(s=t.height);var r=0;"min_width"in t&&(r=t.min_width);var l=0;"min_height"in t&&(l=t.min_height);var c=0;"effect"in t&&(c=t.effect);var d="";return"where"in t&&(d=t.where),"/images/thumb/"+a+"/"+n+"/"+d+"/"+i+"/"+s+"/"+r+"/"+l+"/"+c+"/"+o.charAt(0)+"/"+o+"/"+e}function store_image_thumb(e,t){var o=1;0==t.scale&&(o=t.scale);var a=1;0==t.crop&&(a=t.crop);var n="";t.where&&(n=t.where);var i=0;t.width&&(i=t.width);var s=0;t.height&&(s=t.height);var r=0;t.min_width&&(r=t.min_width);var l=0;t.min_height&&(l=t.min_height);var c=0;t.effect&&(c=t.effect);var d=0;t.left&&(d=t.left);var m=0;t.top&&(m=t.top);var p=0;return t.use&&(p=t.use),"/images/thumb/"+o+"/"+a+"/"+n+"/"+i+"/"+s+"/"+r+"/"+l+"/"+c+"/"+d+"/"+m+"/"+p+"/"+e}function date_format(e,t,o){return"UTC"==o?moment.utc(e).format(t):moment(e).format(t)}function currency_format(e,t){return Globalize.format(e,t)}function pular(){var e=$("meta[name='root']").attr("content"),t=$("meta[name='lang']").attr("content");Backbone.history.navigate(e+"/"+t+"/home",!0)}function share_facebook(){var e=$("meta[name='nomecasal']").attr("content"),t=($("meta[name='noivos']").attr("content"),$("meta[name='dominio']").attr("content"),$("meta[name='imagem_capa']").attr("content"));e=e.replace(/\&/g,"e");var o=document.location.href,a=t,n="Site de casamento de "+e,i="Compartilhamento de p\xe1gina",s="Compartilhou uma p\xe1gina do site de casamento de "+e,r="http://sites.icasei.com.br/social/facebook/confirm",l="https://www.facebook.com/dialog/feed?app_id=211260932253820&link="+o+"&picture="+a+"&name="+n+"&caption="+i+"&description="+s+"&redirect_uri="+r;return window.open(l,"_blank"),!1}function share_twitter(){var e=encodeURIComponent($("meta[name='nomecasal']").attr("content"));$("meta[name='noivos']").attr("content");e=e.replace(/\&/g,"e");var t=($("meta[name='dominio']").attr("content"),$("meta[name='root']").attr("content"),{long_url:encodeURIComponent(window.location)}),o=$.param(t),a="";return $.ajax({url:"/social/shortener",type:"POST",data:o,dataType:"json",async:!1,success:function(t){a="Compartilhou uma p\xe1gina do site de casamento de "+e+": "+t.id,window.open("http://twitter.com/home?status="+a,"_blank")}}),!1}function share_pinterest(){var e=encodeURIComponent($("meta[name='nomecasal']").attr("content"));$("meta[name='noivos']").attr("content");e=e.replace(/\&/g,"e");var t=($("meta[name='dominio']").attr("content"),$("meta[name='root']").attr("content"),$("meta[name='imagem_capa']").attr("content")),o=encodeURIComponent(document.location.href),a=encodeURIComponent(t),n="Site de casamento de "+e;return window.open("http://pinterest.com/pin/create/button/?url="+o+"&media="+a+"&description="+n,"_blank"),!1}function closeWindow(){if("loja"==window.name)window.close();else{var e=get_meta("root");document.location.href=e}}function _icasei_log(e,t){if("true"!=get_meta("CD"),!1){obj={type:"Javascript: "+e,message:t,referer:document.location.href};var o=$.param(obj);jQuery.ajax({url:"/services/error",data:o,dataType:"text",type:"POST",success:function(e,t){},error:function(e,t,o){}})}}function params_to_string(e){str="";for(var t=0;t<e.length;t++)try{str+=JSON.stringify(e[t])+";"}catch(o){}return str}function infinite_pagination(e,t){$(".infinite-pagination a").length>1&&($(".infinite-pagination").append('<ul class="temp" />'),$(window).scroll(function(){clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){var o=$(".infinite-loading"),a=$(".infinite-pagination"),n=a.find(">a").length,i=a.find(">a.active").index(".infinite-pagination>a")+1;if(n>i&&(!t||t>i)){var s=a.find("a:eq("+i+")"),r=s.attr("href"),l=(a.find(".temp"),$(e)),c=l.height()+l.offset().top,d=$(document).scrollTop()+$(window).height();d>c&&o.is(":hidden")&&o.fadeIn(300,function(){$("body > div.loading").jLoading("ignore",!0),$.post(r,{post:1},function(e){$("body > div.loading").jLoading("ignore",!1),l.append(e),o.hide(),a.find(">a").removeClass("active"),s.addClass("active"),i==n-1&&$(".after-pagination").show()})})}else{var i=a.find(">a.active").index(".infinite-pagination>a")+1;if(n>i){var s=a.find("a:eq("+i+")"),r=s.attr("href"),l=(a.find(".temp"),$(e)),c=l.height()+l.offset().top,d=$(document).scrollTop()+$(window).height();d>c&&o.is(":hidden")&&$("#manual_load_more").data("page",i).off("click").on("click",function(){$("#manual_load_more").hide(),o.fadeIn(300,function(){$("body > div.loading").jLoading("ignore",!0),$.post(r,{post:1},function(e){$("body > div.loading").jLoading("ignore",!1),l.append(e),o.hide(),a.find(">a").removeClass("active"),s.addClass("active"),i==n-1&&$(".after-pagination").show()})})}).show()}}},250))}))}var iCaseiApp=angular.module("iCaseiApp",["ngAnimate","iCaseiControllers","ngCookies"]);iCaseiApp.config(["$controllerProvider","$compileProvider",function(e,t){iCaseiApp.controllerProvider=e.register,iCaseiApp.lazyController=function(t,o){window[t+"_controller"]||(window[t+"_controller"]=!0,e.register(t,o))},iCaseiApp.lazyDirective=function(e,o){window[e+"_directive"]||(window[e+"_directive"]=!0,t.directive(e,o))}}]),iCaseiApp.config(["$httpProvider",function(e){e.defaults.headers.common["X-CSRF-Token"]=$("meta[name=csrf-token]").attr("content")}]),iCaseiApp.directive("script",function(){return{restrict:"E",scope:!1,link:function(e,t,o){if("text/javascript-lazy"===o.type){var a=t.text(),n=new Function(a);n()}}}});var iCaseiControllers=angular.module("iCaseiControllers",[]);window.iCaseiApp=iCaseiApp,window.iCaseiControllers=iCaseiControllers;var AngularHelper=function(){var e=function(){};return e.compile=function(e,t){var o=angular.element(e).injector();o.invoke(["$window","$location","$compile","$rootScope",function(o,a,n,i){var s=e.append(t).scope();n(e)(s||i),s.$apply()}])},e}(),backboneObjects=new Object,meta_content_cache=new Array,form_helper_messages={},App=function(){};!function(e){BaseBackboneView=Backbone.View.extend({initialize:function(){var e=this;this.render=_.wrap(this.render,function(t){this.beforeRender(),t.call(e),this.afterRender()}),this.remove=_.wrap(this.remove,function(t){e.before_remove.call(e),t.call(e),e.after_remove.call(e)})},infinite_pagination:function(t,o){var a=this;e(".infinite-pagination").data("loading");e(".infinite-pagination a").length>1&&(e(".infinite-pagination").append('<ul class="temp" />'),e(window).scroll(function(){clearTimeout(e.data(this,"scrollTimer")),e.data(this,"scrollTimer",setTimeout(function(){var n=e(".infinite-loading"),i=e(".infinite-pagination");if(i.find(">a.active").length>=1){var s=i.find(">a").length,r=i.find(">a.active").index(".infinite-pagination>a")+1;if(s>r){var l=i.find("a:eq("+r+")"),c=l.data("page"),d=(i.find(".temp"),e(t)),m=d.height()+d.offset().top,p=e(document).scrollTop()+e(window).height();p>m&&n.is(":hidden")&&n.fadeIn(300,function(){e("body > div.loading").jLoading("ignore",!0),o.call(a,function(){n.hide(),i.find(">a").removeClass("active"),l.addClass("active"),r==s-1&&e(".after-pagination").show()},{page:c,container:d})})}}},250))}))},beforeRender:function(){},afterRender:function(){},before_remove:function(){},after_remove:function(){}}),Backbone.Model.prototype.toJSON=function(){if(this._isSerializing)return this.id||this.cid;this._isSerializing=!0;var e=_.clone(this.attributes);return _.each(e,function(t,o){t&&t.toJSON&&_.isFunction(t.toJSON)&&(e[o]=t.toJSON())}),this._isSerializing=!1,e},"true"!=get_meta("CD")&&(Backbone.History.oldLoadUrl=Backbone.History.prototype.loadUrl,Backbone.History.prototype.loadUrl=function(e){var t=this.fragment=this.getFragment(e);if(void 0!==window.ga){var o=get_meta("noivos"),a=get_meta("ga_dominio");window.ga("create","UA-1786921-1","auto",{allowLinker:!0}),window.ga("require","linker"),window.ga("linker:autoLink",a),window.ga("set",{dimension1:"front"}),window.ga("send","event","Site","Front",o),window.ga("send","pageview","/"+t);var n=get_meta("custom_google_tc");""!=n&&(window.ga("create",n,"auto",{name:"noivo"}),window.ga("noivo.send","pageview","/"+t))}else console.error("Google analytics not initialized");return Backbone.History.oldLoadUrl.call(this,e)})}(jQuery),$(document).ajaxError(function(e,t,o,a){if(!t.getAllResponseHeaders()||0===t.status)return e.stopPropagation(),!1;var n=t.responseText,i=null;try{"/services/error"!=o.url&&console.error("Erro global ("+o.url+"): "+a+"<br/>"+n),i=JSON.parse(n)}catch(e){i=null}if(i&&i.code&&99==i.code){var s=get_meta("root");return Backbone.history.navigate(s+"/protected",!0),e.stopPropagation(),!1}}),$(document).ready(function(){init_I18n(),window.loading=$(".loading"),window.loading.jLoading(),"true"==get_meta("CD")?Backbone.history.start({pushState:!1,hashChange:!0,root:"/",replace:!1}):Backbone.history.start({pushState:!0,hashChange:!0,root:"/",replace:!1}),$(document).delegate("a","click",function(e){var t=$(this).attr("backbone");if(!t||"false"!=t){var o=$(this).data("selectedclass"),a=$(this).data("menuselector"),n=$(this).attr("href");n&&(n.indexOf("://")>=0||n.indexOf("javascript:")>=0||n.indexOf("mailto:")>=0)||(window.last_href!=n&&window.loading.jLoading("abortAllConnections"),e.preventDefault(),Backbone.history.navigate(n,{trigger:!0}),window.last_href=n,o&&a&&($(a).removeClass(o),$(this).parent().addClass(o)))}})}),jQuery.extend({backboneParseQueryString:function(){var e={},t=window.location.search.replace("?",""),o=t.split("&");return $.each(o,function(t,o){var a=o.split("=");e[a[0]]=a[1]}),e}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,o,a,n,i,s,r,l="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)t=e.charCodeAt(c++),o=e.charCodeAt(c++),a=e.charCodeAt(c++),n=t>>2,i=(3&t)<<4|o>>4,s=(15&o)<<2|a>>6,r=63&a,isNaN(o)?s=r=64:isNaN(a)&&(r=64),l=l+this._keyStr.charAt(n)+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(r);return l},decode:function(e){var t,o,a,n,i,s,r,l="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)n=this._keyStr.indexOf(e.charAt(c++)),i=this._keyStr.indexOf(e.charAt(c++)),s=this._keyStr.indexOf(e.charAt(c++)),r=this._keyStr.indexOf(e.charAt(c++)),t=n<<2|i>>4,o=(15&i)<<4|s>>2,a=(3&s)<<6|r,l+=String.fromCharCode(t),64!=s&&(l+=String.fromCharCode(o)),64!=r&&(l+=String.fromCharCode(a));return l=Base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var a=e.charCodeAt(o);128>a?t+=String.fromCharCode(a):a>127&&2048>a?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},_utf8_decode:function(e){for(var t="",o=0,a=c1=c2=0;o<e.length;)a=e.charCodeAt(o),128>a?(t+=String.fromCharCode(a),o++):a>191&&224>a?(c2=e.charCodeAt(o+1),t+=String.fromCharCode((31&a)<<6|63&c2),o+=2):(c2=e.charCodeAt(o+1),c3=e.charCodeAt(o+2),t+=String.fromCharCode((15&a)<<12|(63&c2)<<6|63&c3),o+=3);return t}};try{EJS.Helpers.prototype.I18n_translate=I18n_translate}catch(e){}try{EJS.Helpers.prototype.get_image_path=get_image_path}catch(e){}try{EJS.Helpers.prototype.image_thumb=image_thumb}catch(e){}try{EJS.Helpers.prototype.user_image_thumb=user_image_thumb}catch(e){}try{EJS.Helpers.prototype.store_image_thumb=store_image_thumb}catch(e){}try{EJS.Helpers.prototype.date_format=date_format}catch(e){}var number_format=currency_format;try{EJS.Helpers.prototype.currency_format=currency_format,EJS.Helpers.prototype.number_format=number_format}catch(e){}$(document).ready(function(){var e=null;$("#lang .lang-slct").on("click",function(){e?(clearTimeout(e),e=null):($("#lang .lang-list").css({opacity:0}).toggle(),$("#lang .lang-list").is(":visible")&&$("#lang .lang-list").animate({opacity:1},500))}),$("#lang .lang-slct").on("mouseleave",function(){e||(e=setTimeout(function(){$("#lang .lang-list").animate({opacity:0},500,function(){$("#lang .lang-list").hide(),e=null})},300))}),$("#lang .lang-list").on("mouseenter",function(){e?(clearTimeout(e),e=null):($("#lang .lang-list").css({opacity:0}).show(),$("#lang .lang-list").animate({opacity:1},500))}),$("#lang .lang-list").on("mouseleave",function(){e||(e=setTimeout(function(){$("#lang .lang-list").animate({opacity:0},500,function(){$("#lang .lang-list").hide(),e=null})},300))})}),$(document).ready(function(){if(init_I18n(),"true"==get_meta("music")){var e=(get_meta("ID"),get_meta("player_sel")),t=$('<div id="music" class="'+e+'"><div id="player1" class="music-player"></div><div id="music_icon" class="side"><div class="on-off"></div><div class="note"></div><div class="eq"></div></div></div><div id="preloader" style="display:none" class="music-icon-stoped"></div><div id="preloader1" style="display:none" class="music-icon"></div>');t.css("visibility","hidden"),$("body").prepend(t);var o=t.width();t.find(".note").click(function(){1==t.attr("music_hidden")?($(this).removeClass("nopen").addClass("nclose"),t.attr("music_hidden","0"),t.animate({left:"0px"},500)):($(this).removeClass("nclose").addClass("nopen"),t.attr("music_hidden","1"),t.animate({left:-o+"px"},500))}),t.find(".eq,.on-off").click(function(){$(".play-area div").trigger("click")}),t.css("left",-o+"px"),t.attr("music_hidden","1"),t.css("visibility","");var a=get_meta("autoplay"),n=get_meta("volume"),i=!1,s=null;"?prw=1"==window.location.search&&(a="false"),a&&"true"==a.toLowerCase()?(a=!0,i=!1):a&&"false"==a.toLowerCase()?(a=!1,i=!1):(a=!0,i=!0),n&&(n=parseInt(n));var r=$("#music .music-player");if(r.get(0)){var l="";"true"!=get_meta("CD")&&(l="/");var c=$("#music_icon");template="player_custom",(navigator.userAgent.match(/iphone/i)||navigator.userAgent.match(/android/i))&&(template="mobile"),r.audioPlayer({template:template,cssTemplate:"new",autoPlay:a,askToPlay:i,volume:n,pauseaE:function(){s&&s.pause()},element:"#music_playlist a",basePath:l+"assets/flash/audioplayer",loadingStr:I18n.t("audioplayer.loading_str"),askTitleStr:I18n.t("audioplayer.ask_title_str"),askStr:I18n.t("audioplayer.ask_str"),askBtns:[I18n.t("audioplayer.ask_yes"),I18n.t("audioplayer.ask_no")],onNotSupport:function(){},onStop:function(){c.removeClass("music-icon").addClass("music-icon-stoped")},onPause:function(){c.removeClass("music-icon").addClass("music-icon-stoped")},onPlay:function(){c.removeClass("music-icon-stoped").addClass("music-icon")}}),0===e.indexOf("player6")&&(t.css("height","154px"),$("#lang").css("bottom","165px"),$(".div-aux-1").append('<div id="move_barr" class="tuner-bar"></div>'),$(".control").delegate(".prev,.next","click",function(){null===s&&(s=document.createElement("audio"),s.src="/assets/audioplayer/player6/Loop.mp3",s.volume=.4),s.play(),$("#move_barr").animate({left:"+=30"},1e3,function(){$("#move_barr").animate({left:"-=10"},500,function(){$("#move_barr").animate({left:"+=50"},100,function(){$("#move_barr").animate({left:"-=65"},1e3,function(){s&&s.pause()})})})})}))}}});var FB=null;$(document).ready(function(){init_I18n(),$(document).on("icasei_template_change",function(){var e=get_meta("noivos");if(load_noivos(e,function(e){if(e){var t=this,o=Math.round((moment(date_format(t.get("data_casamento_dt"),"DD[/]MM[/]YYYY"),"DD[/]MM[/]YYYY").toDate()-moment(date_format(t.get("data_atual"),"DD[/]MM[/]YYYY"),"DD[/]MM[/]YYYY").toDate())/864e5),a="";if(o>0)a=1==o?I18n.t("layout.tomorrow"):I18n.t("layout.future_wedding_date",{dias:o});else if(0>o)if(-1==o)a=I18n.t("layout.yesterday");else{var n=-1*o;a=I18n.t("layout.past_wedding_date",{dias:n})}else a=I18n.t("layout.today");var i=t.get("qtd_acessos");$("#header #days").html(a),0>o&&1!=t.get("disableetiqueta")&&($("#header #married").show(),$("#married").show()),$("#footer .qtd-pessoas").html(i)}}),"true"!=get_meta("CD"))if(null!=FB&&null!=FB.XFBML)FB.XFBML.parse();else{var t=I18n.t("layout.facebook_language");load_js("//connect.facebook.net/"+t+"/all.js",function(){try{FB&&(FB.init({appId:"211260932253820",status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.XFBML.parse())}catch(e){console.error("Erro ao iniciar facebook")}})}}),$(document).trigger("icasei_template_change")});var HomeController=null;!function(e){HomeController=Backbone.Router.extend({routes:{index:"load",":login":"load",":login/":"load",":login/index":"load",":login/:lang":"load","*action":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this,o=new TemplateImagemHome,a=new HomeFlash,n=!1,i=!1,s=function(){if(n&&i)if(a&&a.has("id_home_flash"))backboneObjects.index_view=new IndexView({noivos:t,imagem_home:o,flash:a,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"flash",noivos:t})}else App.current_view=e,this.render()}});else{var e=get_meta("root"),s=get_meta("first_page");Backbone.history.navigate(e+"/"+s,!0)}};o.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){n=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),a.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){i=!0,s.call(this)},error:function(e,t,o){var a=get_meta("root"),n=get_meta("first_page");Backbone.history.navigate(a+"/"+n,!0)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.home_controller=new HomeController}(jQuery);var AboutController=null;!function(e){AboutController=Backbone.Router.extend({routes:{about:"load",":login/about":"load",":lang/about":"load",":login/:lang/about":"load",":login/about.html":"load",":login/:lang/about.html":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this,o=new TemplateAbout,a=new MenuNoivo,n=!1,i=!1,s=function(){n&&i&&(backboneObjects.about_view=new AboutView({noivos:t,about:o,pagina:a,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,e.render()}}))};o.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){n=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),a.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),id_recurso:7},success:function(){i=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.about_controller=new AboutController}(jQuery);var AlbumController=null;!function(e){AlbumController=Backbone.Router.extend({routes:{":login/album/show/:id.html":"load",":login/album/show/:id/:page.html":"load",":login/:lang/album/show/:id.html":"loadLang",":login/:lang/album/show/:id/:page.html":"loadLang","album/show/:id":"loadAlbum","album/show/:id/:page":"loadAlbum",":login/album/show/:id":"load",":login/album/show/:id/:page":"load","album/:lang/show/:id":"loadAlbumLang","album/:lang/show/:id/:page":"loadAlbumLang",":login/:lang/album/show/:id":"loadLang",":login/:lang/album/show/:id/:page":"loadLang"},load:function(e,t,o){this.loadAlbum(t,o,e)},loadLang:function(e,t,o,a){this.loadAlbum(o,a,e)},loadAlbumLang:function(e,t){this.loadAlbum(t)},loadAlbum:function(e,t,o){load_noivos(o,function(o){if(o){var a=this,n=new TemplateAlbum;n.fetch({cache:!1,data:{id_noivo:a.get("id_noivo"),id:e,page:t},success:function(){"v2"==a.get("template_html_version")?backboneObjects.album_view=new AlbumViewV2({noivos:a,photos:n,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"front",noivos:a})}else App.current_view=e,this.render()}}):backboneObjects.album_view=new AlbumView({noivos:a,photos:n,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"front",noivos:a})}else App.current_view=e,this.render()}})},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.album_controller=new AlbumController}(jQuery);var BestmanController=null;!function(e){BestmanController=Backbone.Router.extend({routes:{bestman:"load",":login/bestman":"load",":lang/bestman":"load",":login/:lang/bestman":"load",":login/bestman.html":"load",":login/:lang/bestman.html":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this,o=new TemplatePadrinhoCategorias,a=new MenuNoivo,n=!1,i=!1,s=function(){n&&i&&(backboneObjects.bestman_view=new BestmanView({noivos:t,categories:o,pagina:a,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,this.render()}}))};o.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){n=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),a.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),id_recurso:24},success:function(){i=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.bestman_controller=new BestmanController}(jQuery);var BlogController=null;!function(e){BlogController=Backbone.Router.extend({routes:{":login/blog.html":"load",":login/:lang/blog.html":"loadLang",blog:"loadBlog","blog/:page":"loadBlog",":login/blog":"load",":login/blog/:page":"load",":lang/blog":"loadBlogLang",":lang/blog/:page":"loadBlogLang",":login/:lang/blog":"loadLang",":login/:lang/blog/:page":"loadLang"},load:function(e,t){this.loadBlog(t,e)},loadLang:function(e,t,o){this.loadBlog(o,e)},loadBlogLang:function(e,t){this.loadBlog(t)},loadBlog:function(e,t){e||(e="1"),load_noivos(t,function(t){if(t){var o=this,a=new TemplateBlogPost,n=new MenuNoivo,i=new Captcha,s=!1,r=!1,l=!1,c=function(){s&&r&&l&&("v2"==o.get("template_html_version")?backboneObjects.blog_view=new BlogViewV2({noivos:o,entries:a,pagina:n,captcha:i,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"front",noivos:o})}else App.current_view=e,this.render()}}):backboneObjects.blog_view=new BlogView({noivos:o,entries:a,pagina:n,captcha:i,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"front",noivos:o})}else App.current_view=e,this.render()}}))};a.fetch({cache:!1,data:{id_noivo:o.get("id_noivo"),page:e},success:function(){s=!0,c.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),n.fetch({cache:!1,data:{id_noivo:o.get("id_noivo"),id_recurso:22},success:function(){r=!0,c.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),i.fetch({cache:!1,data:{object:"comment"},success:function(){l=!0,c.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.blog_controller=new BlogController}(jQuery);var GiftController=null;!function(e){GiftController=Backbone.Router.extend({routes:{gifts:"load",":login/gifts":"load",":lang/gifts":"load",":login/:lang/gifts":"load",":login/gifts.html":"load",":login/:lang/gifts.html":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this,o=new TemplatePresente,a=new MenuNoivo,n=!1,i=!1,s=function(){n&&i&&(backboneObjects.gift_view=new GiftView({noivos:t,gift:o,pagina:a,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,this.render()}}))};o.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){n=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),a.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),id_recurso:8},success:function(){i=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.gift_controller=new GiftController}(jQuery);var HomeController=null;!function(e){HomeController=Backbone.Router.extend({routes:{":login/home":"load",":login/home/index":"load",home:"load",":login/:lang/home":"load",":login/:lang/home/index":"load",":lang/home":"load",":login/home":"load",":login/:lang/home":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this,o=new TemplateHome,a=new TemplateImagemHome,n=new TemplateEnquete,i=new UltimasFotos,s=new MenuNoivo,r=new MenuNoivo,l=!1,c=!1,d=!1,m=!1,p=!1,u=!1,h=function(){l&&c&&d&&m&&p&&u&&("v2"==t.get("template_html_version")?backboneObjects.home_view=new HomeViewV2({noivos:t,imagens:a,home:o,enquete:n,ultimas_fotos:i,template_rsvp:s,pagina:r,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,this.render()}}):backboneObjects.home_view=new HomeView({noivos:t,imagens:a,home:o,enquete:n,pagina:r,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,this.render()}}))};o.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){l=!0,h.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),a.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){
c=!0,h.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),n.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){d=!0,h.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),i.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),max:8},success:function(){m=!0,h.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),s.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),id_recurso:11},success:function(){p=!0,h.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),r.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),id_recurso:6},success:function(){u=!0,h.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.home_controller=new HomeController}(jQuery);var MessagesController=null;!function(e){MessagesController=Backbone.Router.extend({routes:{messages:"load",":login/messages":"load",":lang/messages":"load",":login/:lang/messages":"load",":login/messages":"load",":login/:lang/messages":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this,o=new TemplateMsgsNoivo,a=new MenuNoivo,n=new Captcha,i=!1,s=!1,r=!1,l=function(){i&&s&&r&&("v2"==t.get("template_html_version")?backboneObjects.messages_view=new MessagesViewV2({noivos:t,messages:o,pagina:a,captcha:n,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,this.render()}}):backboneObjects.messages_view=new MessagesView({noivos:t,messages:o,pagina:a,captcha:n,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,this.render()}}))};o.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){i=!0,l.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),a.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),id_recurso:13},success:function(){s=!0,l.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),n.fetch({cache:!1,data:{object:"message"},success:function(){r=!0,l.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.messages_controller=new MessagesController}(jQuery);var PagesController=null;!function(e){PagesController=Backbone.Router.extend({routes:{":login/pages/show/:id.html":"loadPage",":login/:lang/pages/show/:id.html":"loadPageLang","pages/show/:id":"load",":login/pages/show/:id":"loadPage",":lang/pages/show/:id":"loadLang",":login/:lang/pages/show/:id":"loadPageLang"},load:function(e){this.loadPage(null,e)},loadLang:function(e,t){this.loadPage(null,t)},loadPageLang:function(e,t,o){this.loadPage(e,o)},loadPage:function(e,t){load_noivos(e,function(e){if(e){var o=this,a=new MenuNoivo;a.fetch({cache:!1,data:{id_noivo:o.get("id_noivo"),id_menu_noivo:t},success:function(){backboneObjects.pages_view=new PagesView({noivos:o,pagina:a,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"front",noivos:o})}else App.current_view=e,this.render()}})},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.pages_controller=new PagesController}(jQuery);var PlacesController=null;!function(e){PlacesController=Backbone.Router.extend({routes:{":login/places/:place_id.html":"load",":login/:lang/places/:place_id.html":"loadLang","places/:place_id":"loadPlace",":login/places/:place_id":"load",":lang/places/:place_id":"loadPlaceLang",":login/:lang/places/:place_id":"loadPlaceLangLogin"},initialize:function(e){},load:function(e,t){this.loadPlace(t,e)},loadLang:function(e,t,o){this.loadPlace(o,e)},loadPlaceLangLogin:function(e,t,o){this.loadPlace(o,e)},loadPlaceLang:function(e,t){this.loadPlace(t)},loadPlace:function(e,t){load_noivos(t,function(t){if(t){var o=this,a=new TemplateLocal,n=new MenuNoivo,i=!1,s=!1,r=function(){i&&s&&("v2"==o.get("template_html_version")?backboneObjects.places_view=new PlacesViewV2({noivos:o,local:a,pagina:n,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"front",noivos:o})}else App.current_view=e,this.render()}}):backboneObjects.places_view=new PlacesView({noivos:o,local:a,pagina:n,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"front",noivos:o})}else App.current_view=e,this.render()}}))};a.fetch({cache:!1,data:{id_noivo:o.get("id_noivo"),id:e},success:function(){i=!0,r.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),n.fetch({cache:!1,data:{id_noivo:o.get("id_noivo"),id_recurso:e},success:function(){s=!0,r.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.places_controller=new PlacesController}(jQuery);var ProtectedController=null;!function(e){ProtectedController=Backbone.Router.extend({routes:{"protected":"load",":login/protected":"load",":lang/protected":"load",":login/:lang/protected":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this;backboneObjects.protected_view=new ProtectedView({noivos:t,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"protected",noivos:t})}else App.current_view=e,this.render()}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.protected_controller=new ProtectedController}(jQuery);var RsvpController=null;!function(e){RsvpController=Backbone.Router.extend({routes:{rsvp:"load",":login/rsvp":"load",":lang/rsvp":"load",":login/:lang/rsvp":"load",":login/rsvp.html":"load",":login/:lang/rsvp.html":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this,o=new TemplateRsvpConfig,a=new MenuNoivo,n=!1,i=!1,s=function(){n&&i&&("v2"==t.get("template_html_version")?backboneObjects.rsvp_view=new RsvpViewV2({noivos:t,rsvp_config:o,pagina:a,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,e.render()}}):backboneObjects.rsvp_view=new RsvpView({noivos:t,rsvp_config:o,pagina:a,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,e.render()}}))};o.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){n=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),a.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),id_recurso:11},success:function(){i=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.rsvp_controller=new RsvpController}(jQuery);var StoreController=null;id_loja_sel=getfu("id_loja"),id_loja_sel="undefined"==typeof id_loja_sel?1:id_loja_sel,function(e){StoreController=Backbone.Router.extend({routes:{":login/store.html":"load",":login/store/index/:id.html":"load",":login/:lang/store.html":"loadLang",":login/:lang/store/index/:id.html":"loadLang",store:"loadStore","store/index/:id":"loadStore",":login/store":"load",":login/store/index/:id":"load","store/cart":"loadCart",":login/store/cart":"loadCart","store/cart_info":"loadCartInfo",":login/store/cart_info":"loadCartInfo","store/payment":"loadPayment",":login/store/payment":"loadPayment","store/confirm":"loadConfirm",":login/store/confirm":"loadConfirm",":lang/store":"loadStoreLang",":lang/store/index/:id":"loadStoreLang",":login/:lang/store":"loadLang",":login/:lang/store/index/:id":"loadLang",":lang/store/cart":"loadCart",":login/:lang/store/cart":"loadCart",":lang/store/cart_info":"loadCartInfo",":login/:lang/store/cart_info":"loadCartInfo",":lang/store/payment":"loadPayment",":login/:lang/store/payment":"loadPayment",":lang/store/confirm":"loadConfirm",":login/:lang/store/confirm":"loadConfirm"},init_loja:function(e,t,o){id_loja_sel=getfu("id_loja")||1;var a=this;if(this.info&&(id_loja_sel=this.info.id_loja_sel),this.info)e&&a.info.id_loja!=e&&(a.info.id_loja=e),o&&o.call(a,e);else if(this.info={order:5,id_loja_categoria:-2,id_loja:e?e:9,id_loja_sel:"undefined"==typeof id_loja_sel?1:id_loja_sel},e)e&&a.info.id_loja!=e&&(a.info.id_loja=e),o&&o.call(a,e);else{var n=new Cart;n.fetch({data:{id_noivo:t.get("id_noivo"),id_loja:e},success:function(){e=n.get("id_loja"),e||(e=9),a.info.id_loja=e,o&&o.call(a,e)},error:function(){e=9,a.info.id_loja=e,o&&o.call(a,e)}})}},loadConfirm:function(e){var t=this;load_noivos(e,function(e){if(e){var o=this;t.init_loja(null,o,function(e){cart=new Cart,cart.fetch({data:{id_noivo:o.get("id_noivo"),use_last:!0},success:function(){var e=new TemplateLojaDado;e.fetch({data:{id_noivo:o.get("id_noivo")},success:function(){backboneObjects.confirm_view=new ConfirmView({noivos:o,cart:cart,loja_dado:e,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"store",noivos:o})}else App.current_view=e,this.render()}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})})}})},loadPayment:function(e){var t=this;load_noivos(e,function(e){if(e){var o=this;t.init_loja(null,o,function(e){cart=new Cart,cart.fetch({data:{id_noivo:o.get("id_noivo")},success:function(){if(cart.get("products").length<=0)return void Backbone.history.navigate("/"+o.get("login")+"/store",!0);var e=new TemplateLojaDado;e.fetch({data:{id_noivo:o.get("id_noivo")},success:function(){var t=new CotaTiposPagamentosNoivo;t.fetch({data:{id_noivo:o.get("id_noivo")},success:function(){backboneObjects.payment_view=new PaymentView({noivos:o,cart:cart,loja_dado:e,tipos_pagamentos:t,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"store",noivos:o})}else App.current_view=e,this.render()}})},error:function(e,t,o){backbone_proccess_error(t)}})},error:function(e,t,o){backbone_proccess_error(t)}})},error:function(e,t,o){backbone_proccess_error(t)}})})}})},loadCartInfo:function(e){var t=this;load_noivos(e,function(e){if(e){var o=this;t.init_loja(null,o,function(e){var a=new TemplateLojaDado;a.fetch({data:{id_noivo:o.get("id_noivo")},success:function(){var e=new Cart;e.fetch({data:{id_noivo:o.get("id_noivo")},success:function(){backboneObjects.cart_info_view=new CartInfoView({noivos:o,cart:e,loja_dados:a,id_loja:t.info.id_loja,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"store",noivos:o})}else App.current_view=e,this.render()}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})})}})},loadCart:function(e){var t=this;load_noivos(e,function(e){if(e){var o=this;t.init_loja(null,o,function(e){var a=new TemplateLojaDado;a.fetch({data:{id_noivo:o.get("id_noivo")},success:function(){var e=new Cart;e.fetch({data:{id_noivo:o.get("id_noivo")},success:function(){backboneObjects.cart_view=new CartView({noivos:o,cart:e,loja_dados:a,id_loja:t.info.id_loja,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"store",noivos:o})}else App.current_view=e,this.render()}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})})}})},load:function(e,t){this.loadStore(t,e)},loadLang:function(e,t,o){this.loadStore(o,e)},loadStoreLang:function(e,t){this.loadStore(t)},loadStore:function(e,t){var o=this;try{e=e?parseInt(e):9}catch(a){e=9}load_noivos(t,function(t){if(t){var a=this;o.init_loja(e,a,function(e){var t=new MenuNoivo;t.fetch({cache:!1,data:{id_noivo:a.get("id_noivo"),id_recurso:e,id_loja:id_loja_sel},success:function(){var n=new TemplateLojaDado;n.fetch({cache:!1,data:{id_noivo:a.get("id_noivo")},success:function(){0==n.get("mostraordenacao")&&(o.info.id_loja_categoria=-1);var i=new TemplateProdutos;i.fetch({cache:!1,data:{id_noivo:a.get("id_noivo"),id:t.get("recurso").id_tipo_loja,id_loja_categoria:o.info.id_loja_categoria,order:o.info.order,id_loja:id_loja_sel},success:function(){var s=new LojaCategorias;s.fetch({data:{id_noivo:a.get("id_noivo"),id_loja:id_loja_sel},success:function(){cart=new Cart,cart.fetch({cache:!1,data:{id_noivo:a.get("id_noivo"),id_loja:e},success:function(){backboneObjects.store_view=new StoreView({noivos:a,pagina:t,produtos:i,loja_dados:n,categorias:s,info:o.info,cart:cart,onload:function(){var e=this;if(0==this.adopted){var t=this.$el;change_content(t,function(){App.current_view=e,e.render()},{template:"store",noivos:a})}else App.current_view=e,this.render()}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es. (cart)",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es (categorias).",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es. (produtos)",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar informa\xe7\xf5es. (loja_dados)",function(){},{title:"ERRO",closeText:"[Fechar]"})}})},error:function(){Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})}})})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.store_controller=new StoreController}(jQuery);var SuppliersController=null;!function(e){SuppliersController=Backbone.Router.extend({routes:{suppliers:"load",":login/suppliers":"load",":lang/suppliers":"load",":login/:lang/suppliers":"load",":login/suppliers.html":"load",":login/:lang/suppliers.html":"load"},load:function(e){load_noivos(e,function(e){if(e){var t=this,o=new TemplateFornecedores,a=new MenuNoivo,n=!1,i=!1,s=function(){n&&i&&(backboneObjects.suppliers_view=new SuppliersView({noivos:t,fornecedores:o,pagina:a,onload:function(){var e=this;if(0==this.adopted){var o=this.$el;change_content(o,function(){App.current_view=e,e.render()},{template:"front",noivos:t})}else App.current_view=e,this.render()}}))};o.fetch({cache:!1,data:{id_noivo:t.get("id_noivo")},success:function(){n=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}}),a.fetch({cache:!1,data:{id_noivo:t.get("id_noivo"),id_recurso:14},success:function(){i=!0,s.call(this)},error:function(e,t,o){backbone_proccess_error(t)}})}else Boxy.alert("Erro ao carregar noivos.",function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),backboneObjects.suppliers_controller=new SuppliersController}(jQuery);var Captcha=null;!function(e){var t=null,o=null;check_localstorage("data_captcha")?t=new Backbone.LocalStorage("data_captcha"):o=new Backbone.LocalData("data_captcha"),Captcha=Backbone.Model.extend({urlRoot:"/services/captcha",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var Cart=null,CartProduct=null,CartItems=null;!function(e){var t=null,o=null;check_localstorage("data_cart")?t=new Backbone.LocalStorage("data_cart"):o=new Backbone.LocalData("data_cart"),Cart=Backbone.Model.extend({urlRoot:"/services/cart",localStorage:t,localData:o,defaults:{},initialize:function(){}}),t=null,check_localstorage("cart_product")&&(t=new Backbone.LocalStorage("cart_product")),CartProduct=Backbone.Model.extend({urlRoot:"/services/cart",idAttribute:"id_loja_produtos",localStorage:t,localData:o,defaults:{},initialize:function(){}}),CartProducts=Backbone.Collection.extend({urlRoot:"/services/cart",localStorage:t,model:CartProduct})}(jQuery);var CotaTipoPagamentoNoivo=null,CotaTiposPagamentosNoivo=null;!function(e){var t=null,o=null;check_localstorage("data_cota_tipo_pagamento_noivo")?t=new Backbone.LocalStorage("data_cota_tipo_pagamento_noivo"):o=new Backbone.LocalData("data_cota_tipo_pagamento_noivo"),CotaTipoPagamentoNoivo=Backbone.Model.extend({urlRoot:"/services/cota_tipo_pagamento_noivo",idAttribute:"id_pagamento_noivo",localStorage:t,localData:o,defaults:{},initialize:function(){}}),CotaTiposPagamentosNoivo=Backbone.Collection.extend({model:CotaTipoPagamentoNoivo,localStorage:t,localData:o,url:"/services/cota_tipo_pagamento_noivo"})}(jQuery);var HomeFlash=null;!function(e){var t=null,o=null;check_localstorage("data_home_flash")?t=new Backbone.LocalStorage("data_home_flash"):o=new Backbone.LocalData("data_home_flash"),HomeFlash=Backbone.Model.extend({urlRoot:"/services/home_flash",idAttribute:"id_home_flash",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var LojaCategoria=null,LojaCategorias=null;!function(e){var t=null,o=null;check_localstorage("data_loja_categoria")?t=new Backbone.LocalStorage("data_loja_categoria"):o=new Backbone.LocalData("data_loja_categoria"),LojaCategoria=Backbone.Model.extend({urlRoot:"/services/loja_categoria",idAttribute:"id_loja_categoria",localStorage:t,localData:o,defaults:{},initialize:function(){}}),LojaCategorias=Backbone.Collection.extend({model:LojaCategoria,localStorage:t,localData:o,url:"/services/loja_categoria"})}(jQuery);var MenuNoivo=null;!function(e){var t=null,o=null;check_localstorage("data_menu_noivo")?t=new Backbone.LocalStorage("data_menu_noivo"):o=new Backbone.LocalData("data_menu_noivo"),MenuNoivo=Backbone.Model.extend({urlRoot:"/services/menu_noivo",idAttribute:"id_menu_noivo",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var Noivo=null;!function(e){var t=null,o=null;check_localstorage("data_noivo")?t=new Backbone.LocalStorage("data_noivo"):o=new Backbone.LocalData("data_noivo"),Noivo=Backbone.Model.extend({urlRoot:"/services/noivo",idAttribute:"id_noivo",localStorage:t,localData:o,defaults:{},initialize:function(){},parse:function(e){return e.data_casamento_dt=moment(e.data_casamento_dt,"YYYY-MM-DDTHH:mm:ss").toDate(),e}})}(jQuery);var TemplateAbout=null;!function(e){var t=null,o=null;check_localstorage("data_template_about")?t=new Backbone.LocalStorage("data_template_about"):o=new Backbone.LocalData("data_template_about"),TemplateAbout=Backbone.Model.extend({urlRoot:"/services/template_about",idAttribute:"id_template_sobre",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateAlbum=null;!function(e){var t=null,o=null;check_localstorage("data_template_album")?t=new Backbone.LocalStorage("data_template_album"):o=new Backbone.LocalData("data_template_album"),TemplateAlbum=Backbone.Model.extend({urlRoot:"/services/template_album",idAttribute:"id_template_album",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateBlogComentario=null;!function(e){var t=null,o=null;check_localstorage("data_template_blog_comentario")?t=new Backbone.LocalStorage("data_template_blog_comentario"):o=new Backbone.LocalData("data_template_blog_comentario"),TemplateBlogComentario=Backbone.Model.extend({urlRoot:"/services/template_blog_comentario",idAttribute:"id_template_blog_comentario",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateBlogPost=null,TemplateBlogPosts=null;!function(e){var t=null,o=null;check_localstorage("data_template_blog_post")?t=new Backbone.LocalStorage("data_template_blog_post"):o=new Backbone.LocalData("data_template_blog_post"),TemplateBlogPost=Backbone.Model.extend({urlRoot:"/services/template_blog_post",idAttribute:"id_template_blog_post",localStorage:t,localData:o,defaults:{},initialize:function(){}}),TemplateBlogPosts=Backbone.Collection.extend({model:TemplateBlogPost,localStorage:t,localData:o,url:"/services/template_blog_post"})}(jQuery);var TemplateEnquete=null;!function(e){var t=null,o=null;check_localstorage("data_template_enquete")?t=new Backbone.LocalStorage("data_template_enquete"):o=new Backbone.LocalData("data_template_enquete"),TemplateEnquete=Backbone.Model.extend({urlRoot:"/services/template_enquete",idAttribute:"id_enquete",localStorage:t,localData:o,defaults:{}})}(jQuery);var TemplateEnqueteResposta=null;!function(e){var t=null,o=null;check_localstorage("data_template_enqete_resposta")?t=new Backbone.LocalStorage("data_template_enquete_resposta"):o=new Backbone.LocalData("data_template_enquete_resposta"),TemplateEnqueteResposta=Backbone.Model.extend({urlRoot:"/services/template_enquete_resposta",idAttribute:"id_enquete",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateEnqueteUsuario=null;!function(e){var t=null,o=null;check_localstorage("data_template_enquete_usuario")?t=new Backbone.LocalStorage("data_template_enquete_usuario"):o=new Backbone.LocalData("data_template_enquete_usuario"),TemplateEnqueteUsuario=Backbone.Model.extend({urlRoot:"/services/template_enquete_usuario",idAttribute:"id_enquete",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateFornecedor=null,TemplateFornecedores=null;!function(e){var t=null,o=null;check_localstorage("data_template_fornecedor")?t=new Backbone.LocalStorage("data_template_fornecedor"):o=new Backbone.LocalData("data_template_fornecedor"),TemplateFornecedor=Backbone.Model.extend({urlRoot:"/services/template_fornecedor",idAttribute:"id_template_fornecedores",localStorage:t,localData:o,defaults:{},initialize:function(){}}),TemplateFornecedores=Backbone.Collection.extend({model:TemplateFornecedor,localStorage:t,localData:o,url:"/services/template_fornecedor"})}(jQuery);var TemplateHome=null;!function(e){var t=null,o=null;check_localstorage("data_template_home")?t=new Backbone.LocalStorage("data_template_home"):o=new Backbone.LocalData("data_template_home"),TemplateHome=Backbone.Model.extend({urlRoot:"/services/template_home",idAttribute:"id_template_home",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateImagemHome=null,TemplateImagensHome=null;!function(e){var t=null,o=null;check_localstorage("data_template_imagem_home")?t=new Backbone.LocalStorage("data_template_imagem_home"):o=new Backbone.LocalData("data_template_imagem_home"),TemplateImagemHome=Backbone.Model.extend({urlRoot:"/services/template_imagem_home",idAttribute:"id_imagem",localStorage:t,localData:o,defaults:{},initialize:function(){}}),TemplateImagensHome=Backbone.Collection.extend({model:TemplateImagemHome,localStorage:t,localData:o,url:"/services/template_imagem_home"})}(jQuery);var TemplateLocal=null;!function(e){var t=null,o=null;check_localstorage("data_template_local")?t=new Backbone.LocalStorage("data_template_local"):o=new Backbone.LocalData("data_template_local"),TemplateLocal=Backbone.Model.extend({urlRoot:"/services/template_local",idAttribute:"id_template_local",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateLojaDado=null;!function(e){var t=null,o=null;check_localstorage("data_template_loja_dado")?t=new Backbone.LocalStorage("data_template_loja_dado"):o=new Backbone.LocalData("data_template_loja_dado"),TemplateLojaDado=Backbone.Model.extend({urlRoot:"/services/template_loja_dado",idAttribute:"id_template_loja_dados",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateMsgNoivo=null,TemplateMsgsNoivo=null;!function(e){var t=null,o=null;check_localstorage("data_template_msg_noivo")?t=new Backbone.LocalStorage("data_template_msg_noivo"):o=new Backbone.LocalData("data_template_msg_noivo"),TemplateMsgNoivo=Backbone.Model.extend({urlRoot:"/services/template_msg_noivo",idAttribute:"id_template_msg_noivos",localStorage:t,localData:o,defaults:{},initialize:function(){}}),TemplateMsgsNoivo=Backbone.Collection.extend({model:TemplateMsgNoivo,localStorage:t,localData:o,url:"/services/template_msg_noivo"})}(jQuery);var TemplatePadrinhoCategoria=null,TemplatePadrinhoCategorias=null;!function(e){var t=null,o=null;check_localstorage("data_template_padrinho_categoria")?t=new Backbone.LocalStorage("data_template_padrinho_categoria"):o=new Backbone.LocalData("data_template_padrinho_categoria"),TemplatePadrinhoCategoria=Backbone.Model.extend({urlRoot:"/services/template_padrinho_categoria",idAttribute:"id_template_padrinhos_categoria",localStorage:t,localData:o,defaults:{},initialize:function(){}}),TemplatePadrinhoCategorias=Backbone.Collection.extend({model:TemplatePadrinhoCategoria,localStorage:t,localData:o,url:"/services/template_padrinho_categoria"})}(jQuery);var TemplatePresente=null;!function(e){var t=null,o=null;check_localstorage("data_template_presente")?t=new Backbone.LocalStorage("data_template_presente"):o=new Backbone.LocalData("data_template_presente"),TemplatePresente=Backbone.Model.extend({urlRoot:"/services/template_presente",idAttribute:"id_template_presentes",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateProduto=null,TemplateProdutos=null;!function(e){var t=null,o=null;check_localstorage("data_template_produto")?t=new Backbone.LocalStorage("data_template_produto"):o=new Backbone.LocalData("data_template_produto"),TemplateProduto=Backbone.Model.extend({urlRoot:"/services/template_produto",idAttribute:"id_template_produtos",localStorage:t,localData:o,defaults:{},initialize:function(){}}),TemplateProdutos=Backbone.Collection.extend({model:TemplateProduto,localStorage:t,localData:o,url:"/services/template_produto"})}(jQuery);var TemplateRsvp=null;!function(e){var t=null,o=null;check_localstorage("data_template_rsvp")?t=new Backbone.LocalStorage("data_template_rsvp"):o=new Backbone.LocalData("data_template_rsvp"),TemplateRsvp=Backbone.Model.extend({urlRoot:"/services/template_rsvp",idAttribute:"id_template_rsvp",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateRsvpConfig=null;!function(e){var t=null,o=null;check_localstorage("data_template_rsvp_config")?t=new Backbone.LocalStorage("data_template_rsvp_config"):o=new Backbone.LocalData("data_template_rsvp_config"),TemplateRsvpConfig=Backbone.Model.extend({urlRoot:"/services/template_rsvp_config",idAttribute:"id_template_rsvp_config",localStorage:t,localData:o,defaults:{},initialize:function(){}})}(jQuery);var TemplateRsvpConvidado=null,TemplateRsvpConvidados=null;!function(e){var t=null,o=null;check_localstorage("data_template_rsvp_convidado")?t=new Backbone.LocalStorage("data_template_rsvp_convidado"):o=new Backbone.LocalData("data_template_rsvp_convidado"),TemplateRsvpConvidado=Backbone.Model.extend({urlRoot:"/services/template_rsvp_convidado",idAttribute:"id_convidado",localStorage:t,localData:o,defaults:{},initialize:function(){}}),TemplateRsvpConvidados=Backbone.Collection.extend({model:TemplateRsvpConvidado,localStorage:t,localData:o,url:"/services/template_rsvp_convidado"})}(jQuery);var UltimasFotos=null,UltimaFoto=null;!function(e){var t=null,o=null;check_localstorage("data_ultimas_fotos")?t=new Backbone.LocalStorage("data_ultimas_fotos"):o=new Backbone.LocalData("data_ultimas_fotos"),UltimaFoto=Backbone.Model.extend({urlRoot:"/services/ultimas_fotos",idAttribute:"id_template_album_fotos",localStorage:t,localData:o,defaults:{},initialize:function(){}}),UltimasFotos=Backbone.Collection.extend({model:UltimaFoto,localStorage:t,localData:o,url:"/services/ultimas_fotos"})}(jQuery);var AboutView=null;!function(e){AboutView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-about");o.get(0)?(this.setElement(o),this.options.onload&&this.options.onload.call(t)):(this.adopted=!1,render_template("template_about_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/about/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,about:this.options.about.attributes,pagina:this.options.pagina.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}})}(jQuery);var PhotoViewV2=null;!function(e){PhotoViewV2=BaseBackboneView.extend({events:{},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e("li[data-photoid='"+this.model.id_template_album_fotos+"']");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_album_photo_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/album/"+this.options.noivos.get("template_html_version")+"/load_more",{noivos:this.options.noivos.attributes,album:this.options.album,photo:this.options.model},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}})}(jQuery);var AlbumView=null;!function(e){AlbumView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-album-"+this.options.photos.get("album").id_template_album);o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_pagination_album_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/default",{noivos:this.options.noivos.attributes,pages_info:this.options.photos.get("pagination")},function(e){render_template("template_album_show_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/album/"+t.options.noivos.get("template_html_version")+"/show",{noivos:t.options.noivos.attributes,photos:t.options.photos.attributes,pages_html:e},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)})}))},render:function(){var t={theme:"facebook",slideshow:5e3,autoplay_slideshow:!1};return this.options.noivos.get("socialshare")||(t.social_tools=""),e("a[rel^='prettyPhoto']").prettyPhoto(t),this}})}(jQuery);var AlbumViewV2=null;!function(e){AlbumViewV2=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.photos_view=new Array;var o=e(".template-album-"+this.options.photos.get("album").id_template_album);o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_pagination_album_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+t.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.photos.get("pagination")},function(e){render_template("template_album_show_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/album/"+t.options.noivos.get("template_html_version")+"/show",{noivos:t.options.noivos.attributes,photos:t.options.photos.attributes,pages_html:e},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)})}))},init_slider:function(){var e={};this.options.noivos.get("socialshare")||(e.social_tools=""),this.$el.find("a[rel^='prettyPhoto']").prettyPhoto(e)},render:function(){var t=this,o=this.options.photos.get("photos");for(i in o){var a=o[i],n=new PhotoViewV2({model:a,noivos:this.options.noivos,onload:function(){this.render()}});this.photos_view[a.id_template_album_fotos]=n}return this.constructor.__super__.infinite_pagination("article.albuns > ul.row",function(o,a){var n=new TemplateAlbum;n.fetch({cache:!1,data:{id_noivo:t.options.noivos.get("id_noivo"),id:t.options.photos.get("album").id_template_album,page:a.page},success:function(){e("body > div.loading").jLoading("ignore",!1);var s=n.get("photos"),r=n.get("album");for(i in s){var l=s[i],c=new PhotoViewV2({model:l,album:r,noivos:t.options.noivos,onload:function(){var e=this.$el;a.container.append(e),t.render(),o.call(null)}});t.photos_view[l.id_template_album_fotos]=c}t.init_slider()},error:function(e,t,o){backbone_proccess_error(t)}})}),this.init_slider(),this}})}(jQuery);var BestmanView=null;!function(e){BestmanView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-bestman");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,
render_template("template_bestman_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/bestman/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,categories:this.options.categories.toJSON(),pagina:this.options.pagina.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){var t={theme:"facebook",slideshow:5e3,autoplay_slideshow:!1};return this.options.noivos.get("socialshare")||(t.social_tools=""),e("a[rel^='prettyPhoto']").prettyPhoto(t),this}})}(jQuery);var BlogView=null;!function(e){BlogView=BaseBackboneView.extend({events:{"click #close_write_window":"closeWriteWindow","click .ico-refresh":"changeCaptcha"},closeWriteWindow:function(){e("#write_window").hide()},changeCaptcha:function(){this.options.captcha.fetch({data:{object:"comment"},success:function(){}})},drawCaptcha:function(){e("input[name='captcha_key']").val(this.options.captcha.get("key")),e(".captcha img").attr("src",this.options.captcha.get("image"))},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.posts_view=new Array,this.options.captcha.on("change",this.drawCaptcha,this);var o=e(".template-blog-"+this.options.entries.get("pagination").pag_atual);o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_pagination_blog_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/default",{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(e){render_template("template_blog_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/blog/"+t.options.noivos.get("template_html_version")+"/index",{noivos:t.options.noivos.attributes,entries:t.options.entries.attributes,pages_html:e,pagina:t.options.pagina.attributes,captcha:t.options.captcha.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)})}))},render:function(){var t=this;t.drawCaptcha();var o=this.options.entries.get("entries");for(i in o){var a=o[i],n=new TemplateBlogPost(a),s=new PostView({model:n});this.posts_view[n.get("id_template_blog_post")]=s}return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){e("#comentario").formhelper({defaultField:"nome",autoRender:!1,onSubmitError:function(){e("#write_window").find(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e("#write_window").find(".def-result-message").addClass("error").removeClass("success"),e("#write_window").find(".def-result-message").show()},onSubmit:function(){var o=(this.getData(),t.options.noivos.get("id_noivo")),a=e("#comentario #id_template_blog_post").val(),n=e("#comentario #nome").val(),i=e("#comentario #email").val(),s=e("#comentario #comentario").val(),r=e("#comentario #captcha").val(),l=e("#comentario #captcha_key").val(),c=new TemplateBlogComentario;return window.loading.jLoading("block",!0),c.save({nome:n,email:i,message:s,captcha:r,captcha_key:l,id_noivo:o,id_template_blog_post:a},{wait:!0,success:function(o,a,n){window.loading.jLoading("block",!1),e("#comentario").formhelper("setvalue","nome",""),e("#comentario").formhelper("setvalue","email",""),e("#comentario").formhelper("setvalue","comentario",""),e("#comentario").formhelper("setvalue","captcha","");var i=I18n.t("blogs.comment_sent");if(0==c.get("status")&&(i+="<br/>"+I18n.t("blogs.comment_waiting")),e("#write_window").find(".def-result-message").removeClass("error").addClass("success"),e("#write_window").find(".def-result-message").html(i),e("#write_window").find(".def-result-message").show(),0!=c.get("status")){var s=t.posts_view[c.get("id_template_blog_post")],o=s.model;o.get("comentarios").push(c.attributes);var r=o.get("comentarios").length;s.$el.find(".comments_qtd").html(""+r);var l=render_template("template_blog_comment_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/blog/comment",{noivos:t.options.noivos.attributes,comentario:c.attributes});s.$el.find(".def-comments").prepend(e(l))}},error:function(t,o,a){window.loading.jLoading("block",!1);var n=o.responseText,i=JSON.parse(n);for(var s in i.errors){var r=i.errors[s];e("#comentario").formhelper("flagerror",r.key,r.value)}e("#write_window").find(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e("#write_window").find(".def-result-message").addClass("error").removeClass("success"),e("#write_window").find(".def-result-message").show()}}),!1}}),e("#comentario").formhelper("init")}),this}})}(jQuery);var BlogViewV2=null;!function(e){BlogViewV2=BaseBackboneView.extend({events:{"click #close_write_window":"closeWriteWindow"},closeWriteWindow:function(){e("#write_window").hide()},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.posts_view=new Array;var o=e(".template-blog");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_pagination_blog_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+t.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(e){render_template("template_blog_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/blog/"+t.options.noivos.get("template_html_version")+"/index",{noivos:t.options.noivos.attributes,entries:t.options.entries.attributes,pages_html:e,pagina:t.options.pagina.attributes,captcha:t.options.captcha.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)})}))},render:function(){e("#comentario").ready(function(){e("#comentario").keyup(function(){var t=this.value.length;4e3==t&&(this.value=this.value.substring(0,4e3)),e("#cnt-comentario").text(4e3-t+" caracteres restantes")})});var t=this;return load_js("//assets1.icasei.com.br/assets/plugins/validator.js",function(){var o=t.options.entries.get("entries");for(i in o){var a=o[i],n=new TemplateBlogPost(a),s=new PostViewV2({model:n,noivos:t.options.noivos,captcha:t.options.captcha});t.posts_view[n.get("id_template_blog_post")]=s}t.constructor.__super__.infinite_pagination("article.posts > div > div > ul.row",function(o,a){var n=new TemplateBlogPost;n.fetch({cache:!1,data:{id_noivo:t.options.noivos.get("id_noivo"),page:a.page},success:function(){e("body > div.loading").jLoading("ignore",!1);var s=n.get("entries");for(i in s){var r=s[i],l=new TemplateBlogPost(r),c=new PostViewV2({model:l,noivos:t.options.noivos,captcha:t.options.captcha,onload:function(){var e=this.$el;a.container.append(e),t.render(),o.call(null)}});t.posts_view[l.get("id_template_blog_post")]=c}},error:function(e,t,o){backbone_proccess_error(t)}})})}),this}})}(jQuery);var PostView=null;!function(e){PostView=BaseBackboneView.extend({events:{"click #comment_link":"toggleComments","click #close_comments":"toggleComments","click #write_comment":"writeComment"},writeComment:function(t){var o=e(t.currentTarget).attr("postid"),a=e("#write_window");this.$el.find(".def-post-footer").before(a);var n=e("div[commentpostid='"+o+"']");e("#write_window").find(".def-result-message").hide(),e("#comentario").formhelper("setvalue","nome",""),e("#comentario").formhelper("setvalue","email",""),e("#comentario").formhelper("setvalue","comentario",""),e("#comentario").formhelper("setvalue","captcha",""),a.attr("postid")==this.model.get("id_template_blog_post")?a.toggle():a.show(),n.is(":visible")&&a.is(":visible")&&n.hide(),a.find("#nome").focus(),a.attr("postid",this.model.get("id_template_blog_post")),a.find("#id_template_blog_post").val(this.model.get("id_template_blog_post"))},toggleComments:function(t){var o=e(t.currentTarget).attr("postid"),a=e("div[commentpostid='"+o+"']"),n=e("#write_window");a.toggle(),a.is(":visible")&&n.is(":visible")&&n.hide()},initialize:function(){this.constructor.__super__.initialize.call(this),this.adopted=!0;var t=e("div[postid='"+this.model.get("id_template_blog_post")+"']");!t.get(0),this.setElement(t)},render:function(){return this}})}(jQuery);var PostViewV2=null;!function(e){PostViewV2=BaseBackboneView.extend({events:{"click .comments-link":"toggleComments","click .close-comments":"toggleComments","click .write-comment":"writeComment","submit #comentario_form":"add_comment","click .ico-refresh":"changeCaptcha"},changeCaptcha:function(){this.options.captcha.fetch({data:{object:"comment"},success:function(){}})},drawCaptcha:function(){e("input[name='captcha_key']").val(this.options.captcha.get("key")),e(".captcha img").attr("src",this.options.captcha.get("image"))},writeComment:function(t){var o=e(t.currentTarget).attr("postid"),a=e("#write_window");this.$el.find(".write-window-area").prepend(a);var n=e("div[commentpostid='"+o+"']");a.find(".def-result-message").removeClass("error").removeClass("success").hide(),a.find("input[name='nome']").val(""),a.find("input[name='email']").val(""),a.find("input[name='comentario']").val(""),a.find("input[name='captcha']").val(""),a.find("*[data-field]").parent(".cnt").removeClass("error").find(".txt-error").hide(),a.attr("postid")==this.model.get("id_template_blog_post")?a.toggle():a.show(),n.is(":visible")&&a.is(":visible")&&n.hide(),a.find("#nome").focus(),a.attr("postid",this.model.get("id_template_blog_post")),a.find("#id_template_blog_post").val(this.model.get("id_template_blog_post")),this.delegateEvents(),this.changeCaptcha()},toggleComments:function(t){var o=e(t.currentTarget).attr("postid"),a=e("div[commentpostid='"+o+"']"),n=e("#write_window");a.toggle(),a.is(":visible")&&n.is(":visible")&&n.hide()},add_comment:function(){var t=this,o=this.options.noivos.get("id_noivo"),a=e("#comentario_form #id_template_blog_post").val(),n=e("#comentario_form #nome").val(),i=e("#comentario_form #email").val(),s=e("#comentario_form #comentario").val(),r=e("#comentario_form #captcha").val(),l=e("#comentario_form #captcha_key").val();e("*[data-field]").parent(".cnt").removeClass("error").find(".txt-error").hide();var c={nome:n,email:i,mensagem:s,captcha:r,captcha_key:l,id_noivo:o,id_template_blog_post:a},d=Validator.Assert,m=new Validator.Validator,p={nome:(new d).NotBlank(),email:(new d).Email(),mensagem:(new d).NotBlank(),captcha:(new d).NotBlank(),captcha_key:(new d).NotBlank(),id_noivo:(new d).NotNull(),id_template_blog_post:(new d).NotNull()},u=m.validate(c,p);if(1==u){var h=new TemplateBlogComentario;window.loading.jLoading("block",!0),h.save(c,{wait:!0,success:function(o,a,n){window.loading.jLoading("block",!1),e("#comentario_form #nome").val(""),e("#comentario_form #email").val(""),e("#comentario_form #comentario").val(""),e("#comentario_form #captcha").val(""),t.changeCaptcha();var i=I18n.t("blogs.comment_sent");if(0==h.get("status")&&(i+="<br/>"+I18n.t("blogs.comment_waiting")),e(".def-result-message").removeClass("error").addClass("success"),e(".def-result-message").html(i),e(".def-result-message").show(),0!=h.get("status")){var o=t.model;o.get("comentarios").push(h.attributes);var s=o.get("comentarios").length;t.$el.find(".comments-qtd").html(""+s);var r=render_template("template_blog_comment_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/blog/"+t.options.noivos.get("template_html_version")+"/comment",{noivos:t.options.noivos.attributes,comentario:h.attributes});t.$el.find(".msgs-area").prepend(e(r))}var l=t.$el.find(".write-comment").position().top;e("html,body").animate({scrollTop:l},200),e("#cnt-comentario").text("4000 caracteres restantes")},error:function(o,a,n){window.loading.jLoading("block",!1);var i=a.responseText,s=JSON.parse(i);for(var r in s.errors){var l=s.errors[r];e("*[data-field='"+l.key+"']").parent(".cnt").addClass("error").find(".txt-error").html(l.value).show()}e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show();var c=t.$el.find(".write-comment").position().top;e("html,body").animate({scrollTop:c},200)}})}else{for(validation in u){var _=validation;"mensagem"==_&&(_="comentario"),e("*[data-field='"+_+"']").parent(".cnt").addClass("error").find(".txt-error").html(I18n.t("validatorjs."+u[validation][0].assert.__class__.toLowerCase())).show()}e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show(),e("html,body").animate({scrollTop:0},200)}},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.options.captcha.on("change",this.drawCaptcha,this);var o=e("li[postid='"+this.model.get("id_template_blog_post")+"']");o.get(0)?this.setElement(o):(this.adopted=!1,render_template("template_blog_post_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/blog/"+this.options.noivos.get("template_html_version")+"/load_more",{noivos:this.options.noivos.attributes,post:this.options.model.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}})}(jQuery);var GiftView=null;!function(e){GiftView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-gifts");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_gift_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/gifts/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,gift:this.options.gift.attributes,pagina:this.options.pagina.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}})}(jQuery);var HomeView=null;!function(e){HomeView=BaseBackboneView.extend({events:{"click #votar":"votar"},mostrar:function(e){var t=this;t.options.enquete.fetch({data:{id_enquete:t.options.enquete.get("id_enquete"),id_noivo:t.options.noivos.get("id_noivo")},success:function(){render_template("template_enquete_resposta_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/home/"+t.options.noivos.get("template_html_version")+"/respostas",{noivos:t.options.noivos.attributes,images:t.options.imagens.toJSON(),home:t.options.home.attributes,enquete:t.options.enquete.attributes,respostas:e},function(e){change_content(e,function(){},{noivos:t.options.noivos,container:"#enquete",no_scroll:!0,destroy_view:!1})})},error:function(){Boxy.alert(I18n.t("poll.errors.error"),function(){},{title:"ERRO",closeText:"[Fechar]"})}})},votar:function(){var t=this;if("true"==e("meta[name='CD']").attr("content"))e(".def-result-message").addClass("error").removeClass("success").html(I18n.t("poll.errors.offline")).show(),t.mostrar({ret:1});else{var o=e("input[name='poll']:checked").val();if(!o||""==o)return void e(".def-result-message").addClass("error").removeClass("success").html(I18n.t("poll.errors.answer")).show();var a=new TemplateEnqueteUsuario;window.loading.jLoading("block",!0),a.save({id_noivo:t.options.noivos.get("id_noivo"),enquete:t.options.enquete.get("id_enquete"),resposta:o},{wait:!0,success:function(o,n,i){window.loading.jLoading("block",!1),o.get("warning")?e(".def-result-message").addClass("error").removeClass("success").html(o.get("message")).show():e(".def-result-message").html("").hide(),t.mostrar(a)},error:function(t,o,a){window.loading.jLoading("block",!1);var n=o.responseText,i=JSON.parse(n);e(".def-result-message").addClass("error").removeClass("success").html(i.message).show()}})}},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-home");o.get(0)?(this.setElement(o),this.options.onload&&this.options.onload.call(t)):(this.adopted=!1,render_template("template_home_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/home/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,images:this.options.imagens.toJSON(),home:this.options.home.attributes,enquete:this.options.enquete.attributes,pagina:t.options.pagina.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},before_remove:function(){this.options.noivos.get("slider")&&1!=this.options.noivos.get("slider")||e("#peKenBurns").kenburn({})},render:function(){var t=this,o=get_meta("slider");return load_css("//assets1.icasei.com.br/assets/"+o+".css"),load_js("//assets1.icasei.com.br/assets/"+o+".js",function(){var o=t.options.imagens.get("config");if(t.options.noivos.get("slider")&&1!=t.options.noivos.get("slider")){var a="/assets/sliders/layerslider/skins/",n=get_meta("CD");"true"==n&&(a="assets/sliders/layerslider/skins/"),e("#layerslider").layerSlider({width:"500px",height:"320px",responsive:!0,responsiveUnder:0,sublayerContainer:0,autoStart:!0,pauseOnHover:1==o.pause?!0:!1,firstLayer:1,animateFirstLayer:!0,randomSlideshow:1==o.random,twoWaySlideshow:!0,loops:0,forceLoopNum:!0,autoPlayVideos:!0,autoPauseSlideshow:"auto",youtubePreview:"maxresdefault.jpg",keybNav:!0,touchNav:!0,skin:o.theme,skinsPath:a,globalBGColor:"transparent",navPrevNext:!0,navStartStop:!0,navButtons:"none"!=o.thumb?!0:!1,hoverPrevNext:!0,hoverBottomNav:!0,showBarTimer:!1,showCircleTimer:!0,thumbnailNavigation:o.thumb,tnWidth:100,tnHeight:60,tnContainerWidth:"60%",tnActiveOpacity:35,tnInactiveOpacity:100,imgPreload:!0,yourLogo:!1,yourLogoStyle:"left: 10px; top: 10px;",yourLogoLink:!1,yourLogoTarget:"_self",cbInit:function(e){},cbStart:function(e){},cbStop:function(e){},cbPause:function(e){},cbAnimStart:function(e){},cbAnimStop:function(e){},cbPrev:function(e){},cbNext:function(e){}})}else e("#peKenBurns").kenburn({width:540,height:320,thumbWidth:80,thumbHeight:50,thumbAmount:6,thumbSpaces:1,thumbPadding:9,thumbStyle:o.thumb,bulletXOffset:0,bulletYOffset:"bullet"==o.thumb?-10:-369,shadow:1==o.shadow?"on":"off",repairChromeBug:"on",timerShow:"on",touchenabled:"on",pauseOnRollOverThumbs:"off",pauseOnRollOverMain:1==o.pause?"on":"off",preloadedSlides:6,timer:10,debug:"off"})}),this}})}(jQuery);var HomeViewV2=null;!function(e){HomeViewV2=BaseBackboneView.extend({events:{},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-home");o.get(0)?(this.setElement(o),this.options.onload&&this.options.onload.call(t)):(this.adopted=!1,render_template("template_home_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/home/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,images:this.options.imagens.toJSON(),home:this.options.home.attributes,pagina:this.options.pagina.attributes,enquete:this.options.enquete.attributes,ultimas_fotos:this.options.ultimas_fotos.toJSON(),template_rsvp:this.options.template_rsvp.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return e(".dropdown-menu li a").click(function(){"undefined"!=typeof revpause&&revpause.call()}),"undefined"!=typeof revresume&&revresume.call(),this}})}(jQuery);var IndexView=null;!function(e){IndexView=BaseBackboneView.extend({events:{"click #jump":"pular"},pular:function(){if(0!=e(".template-flash").length){var t=get_meta("root"),o=get_meta("first_page");Backbone.history.navigate(t+"/"+o,!0)}},initialize:function(){this.constructor.__super__.initialize.call(this),this.adopted=!0;var t=this,o=e(".template-flash");window.mobilecheck=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},mobilecheck()&&t.pular(),o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(render_template("template_index_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/index/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,imagem_home:this.options.imagem_home.attributes,flash:this.options.flash.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}),this.adopted=!1)},render:function(){var t=this,o="",a=Math.round((moment(date_format(this.options.noivos.get("data_casamento_dt"),"DD[/]MM[/]YYYY"),"DD[/]MM[/]YYYY").toDate()-moment(date_format(new Date,"DD[/]MM[/]YYYY"),"DD[/]MM[/]YYYY").toDate())/864e5);o=a>0?1==a?"\xc9 amanh\xe3!!!!":"Faltam "+a+" dias":0>a?-1==a?"Foi ontem!":"J\xe1 se passaram "+-1*a+" dias":"\xc9 HOJE!!!";var n="";this.options.imagem_home.get("images")&&this.options.imagem_home.get("images").length>0&&(n="imagens/home/"+this.options.imagem_home.get("images")[0].imagem);var i=I18n.t("flash.date",{day:moment(this.options.noivos.get("data_casamento_dt")).format("DD"),month:moment(this.options.noivos.get("data_casamento_dt")).format("MMMM"),year:moment(this.options.noivos.get("data_casamento_dt")).format("YYYY")}),s=this.options.flash.get("config_obj"),r=this.options.flash.get("custom"),l=this.options.flash.get("prw"),c=this.options.flash.get("id_home_flash");"true"==get_meta("CD")&&(s.imagen_1=s.imagen_1.replace(/\/assets/,"assets"),s.imagen_2=s.imagen_2.replace(/\/assets/,"assets")),s.sl1_l1=I18n_translate("flash.texts."+s.sl1_l1),s.sl1_l2=I18n_translate("flash.texts."+s.sl1_l2),s.sl2_l1=this.options.noivos.get("nome_casal"),s.sl2_l2=i,12==c&&(s.sl1_l1=I18n_translate("flash.texts.seja"),s.sl2_l2=moment(this.options.noivos.get("data_casamento_dt")).format("DD[/]MM[/]YYYY")),15==c&&(s.sl2_l2=moment(this.options.noivos.get("data_casamento_dt")).format("DD[.]MM[.]YYYY")),c>=7&&10>=c&&(s.imagen_1=n),14==c&&(s.sl2_l2=o);var d=!0;if((7==c||8==c||9==c||10==c)&&(d=!1),r){if(s.custom=r,r.imagen1){var m=r.imagen1;s.imagen_1=null!=m?"/assets/new_intro/pattern/"+m:null,1==r.imagen1_tp&&null!=m&&(s.imagen_1=user_image_thumb("/imagens/"+m,{login:this.options.noivos.get("login"),width:0,height:0,where:"public",effect:0,crop:1,scale:1}))}if(r.imagen2&&d){var p=r.imagen2;s.imagen_2=null!=p?"/assets/new_intro/pattern/"+p:null,p&&1==r.imagen2_tp&&null!=p&&(s.imagen_2=user_image_thumb("/imagens/"+p,{login:this.options.noivos.get("login"),width:0,height:0,where:"public",effect:0,crop:1,scale:1}))}}return s.onend=function(){t.pular()},l?(s.onend=function(){var e=window||document;e.location.reload()},e("html").css("zoom","0.52")):e("#skip,.footer,#lang,#music").show(),e("#flash").intros(s),this}})}(jQuery);var MessagesView=null;!function(e){MessagesView=BaseBackboneView.extend({events:{"click .ico-refresh":"changeCaptcha"},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.options.captcha.on("change",this.drawCaptcha,this),this.options.messages.on("add",this.addMessage,this);var o=e(".template-messages");o.get(0)?(this.messages=[],this.setElement(o),this.options.onload&&this.options.onload.call(t)):(this.adopted=!1,render_template("template_message_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/messages/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,messages:this.options.messages.toJSON(),pagina:this.options.pagina.attributes,captcha:this.options.captcha.attributes},function(e){t.messages=[],t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},addMessage:function(t,o,a){var n=this;new MessageView({noivos:this.options.noivos,message:t,onload:function(){this.render(),this.adopted||0!=t.get("aprovada")&&(e(".no-message").remove(),e(".def-messages").prepend(this.$el),this.$el.addClass("start_vertical_roll_animation")),n.messages[t.get("id_template_msg_noivos")]=this;var o=I18n.t("messages.message_sent");0==t.get("aprovada")&&(o+="<br/>"+I18n.t("messages.message_waiting")),e(".def-result-message").html(o),e(".def-result-message").removeClass("error").addClass("success"),e(".def-result-message").show()}})},changeCaptcha:function(){this.options.captcha.fetch({data:{object:"message"},success:function(){}})},drawCaptcha:function(){e("input[name='captcha_key']").val(this.options.captcha.get("key")),e(".captcha img").attr("src",this.options.captcha.get("image"))},render:function(){var t=this;return t.drawCaptcha(),this.options.messages.each(function(o){var a=new MessageView({noivos:t.options.noivos,message:o});a.render(),a.adopted||e(".def-messages").prepend(a.$el),t.messages[o.get("id_template_msg_noivos")]=a}),load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){e("#mensagem").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show(),e("html,body").animate({scrollTop:0},200)},onSubmit:function(){var o=(this.getData(),t.options.noivos.get("id_noivo")),a=e("#mensagem #nome").val(),n=e("#mensagem #email").val(),i=e("#mensagem #mensagem").val(),s=e("#mensagem #captcha").val(),r=e("#mensagem #captcha_key").val(),l=new TemplateMsgNoivo;return window.loading.jLoading("block",!0),l.save({nome:a,email:n,message:i,captcha:s,captcha_key:r,id_noivo:o},{wait:!0,success:function(o,a,n){window.loading.jLoading("block",!1),t.options.messages.add(l),e("#mensagem").formhelper("setvalue","nome",""),e("#mensagem").formhelper("setvalue","email",""),e("#mensagem").formhelper("setvalue","mensagem",""),e("#mensagem").formhelper("setvalue","captcha","")},error:function(t,o,a){window.loading.jLoading("block",!1);var n=o.responseText,i=JSON.parse(n);for(var s in i.errors){var r=i.errors[s];e("#mensagem").formhelper("flagerror",r.key,r.value)}e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show()}}),!1}}),e("#mensagem").formhelper("init")}),this}})}(jQuery);var MessagesViewV2=null;!function(e){MessagesViewV2=BaseBackboneView.extend({events:{"click .ico-refresh":"changeCaptcha","submit form":"sendMessage"},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.options.captcha.on("change",this.drawCaptcha,this),this.options.messages.on("add",this.addMessage,this);var o=e(".template-messages");o.get(0)?(this.messages=[],this.setElement(o),this.options.onload&&this.options.onload.call(t)):(this.adopted=!1,render_template("template_message_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/messages/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,messages:this.options.messages.toJSON(),pagina:this.options.pagina.attributes,captcha:this.options.captcha.attributes},function(e){t.messages=[],t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},sendMessage:function(){var t=this,o=this.options.noivos.get("id_noivo"),a=e(".mensagens #nome").val(),n=e(".mensagens #email").val(),i=e(".mensagens #mensagem").val(),s=e(".mensagens #captcha").val(),r=e(".mensagens #captcha_key").val();this.$el.find(".txt-error").hide(),this.$el.find(".cnt.error").removeClass("error");var l=Validator.Assert,c=new Validator.Validator,d={nome:(new l).NotBlank(),email:(new l).Email(),mensagem:(new l).NotBlank(),captcha:(new l).NotBlank(),captcha_key:(new l).NotBlank(),id_noivo:(new l).NotNull()},m={nome:a,email:n,mensagem:i,captcha:s,captcha_key:r,id_noivo:o},p=c.validate(m,d);if(1==p){var u=new TemplateMsgNoivo;window.loading.jLoading("block",!0),u.save(m,{wait:!0,success:function(o,a,n){window.loading.jLoading("block",!1),t.options.messages.add(u),e(".mensagens #nome").val(""),e(".mensagens #email").val(""),e(".mensagens #mensagem").val(""),e(".mensagens #captcha").val(""),e("#cnt-mensagem").text("4000 caracteres restantes"),t.changeCaptcha()},error:function(t,o,a){window.loading.jLoading("block",!1);var n=o.responseText,i=JSON.parse(n);for(var s in i.errors){var r=i.errors[s];e("*[data-field='"+r.key+"']").parent(".cnt").addClass("error").find(".txt-error").html(r.value).show()}e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show(),e("html,body").animate({scrollTop:0},200)}})}else{for(validation in p)e("*[data-field='"+validation+"']").parent(".cnt").addClass("error").find(".txt-error").html(I18n.t("validatorjs."+p[validation][0].assert.__class__.toLowerCase())).show();e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show(),e("html,body").animate({scrollTop:0},200)}},addMessage:function(t,o,a){var n=this;new MessageViewV2({noivos:this.options.noivos,message:t,onload:function(){this.render(),this.adopted||0!=t.get("aprovada")&&(e(".no-message").remove(),e(".msgs > .row > ul").prepend(this.$el),this.$el.addClass("start_vertical_roll_animation")),n.messages[t.get("id_template_msg_noivos")]=this;var o=I18n.t("messages.message_sent");0==t.get("aprovada")&&(o+=" "+I18n.t("messages.message_waiting")),e(".def-result-message").html(o),e(".def-result-message").removeClass("error").addClass("success"),e(".def-result-message").show()}})},changeCaptcha:function(){this.options.captcha.fetch({data:{object:"message"},success:function(){}})},drawCaptcha:function(){e("input[name='captcha_key']").val(this.options.captcha.get("key")),e(".captcha img").attr("src",this.options.captcha.get("image"))},render:function(){e("#mensagem").ready(function(){e("#mensagem").keyup(function(){var t=this.value.length;4e3==t&&(this.value=this.value.substring(0,4e3)),e("#cnt-mensagem").text(4e3-t+" caracteres restantes")})});var t=this;return load_js("//assets1.icasei.com.br/assets/plugins/validator.js",function(){t.drawCaptcha(),t.options.messages.each(function(o){var a=new MessageViewV2({noivos:t.options.noivos,message:o});a.render(),a.adopted||e(".def-messages").prepend(a.$el),t.messages[o.get("id_template_msg_noivos")]=a})}),this}})}(jQuery);var MessageView=null;!function(e){MessageView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e("div[messageid='"+this.options.message.get("id_template_msg_noivos")+"']");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_message_message_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/messages/"+this.options.noivos.get("template_html_version")+"/message",{noivos:this.options.noivos.attributes,message:this.options.message.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}});
}(jQuery);var MessageViewV2=null;!function(e){MessageViewV2=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e("li[messageid='"+this.options.message.get("id_template_msg_noivos")+"']");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_message_message_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/messages/"+this.options.noivos.get("template_html_version")+"/message",{noivos:this.options.noivos.attributes,message:this.options.message.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}})}(jQuery);var PagesView=null;!function(e){PagesView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-page-"+this.options.pagina.get("id_menu_noivo"));o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_pages_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pages/"+this.options.noivos.get("template_html_version")+"/show",{noivos:this.options.noivos.attributes,pagina:this.options.pagina.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}})}(jQuery);var PlacesView=null;!function(e){PlacesView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-local-"+this.options.local.get("id_template_local"));o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_places_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,local:this.options.local.attributes,pagina:this.options.pagina.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){var t=this;return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){e("#direction").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){Boxy.alert(I18n.t("formhelper.formhelper_invalid_values"),function(){},{title:"ERRO",closeText:"[Fechar]"})},onSubmit:function(){var o=e("#origem").val();e(".loading").jLoading("start"),t.find_address(o,function(o,a){if(o){var n={origin:a,destination:t.destination_address,travelMode:google.maps.TravelMode.DRIVING},i=new google.maps.DirectionsService;i.route(n,function(o,a){if(a==google.maps.DirectionsStatus.OK){t.directionsDisplay.setDirections(o);var n=null;if(o.routes.length>0){var i=o.routes[0];if(i.legs.length>0){var s=i.legs[0],r=new Array;for(var l in s.steps){var c=s.steps[l];r.push({info:c.instructions,distance:c.distance.text,duration:c.duration.text})}n={start_address:s.start_address,end_address:s.end_address,distance:s.distance.text,duration:s.duration.text,steps:r}}}render_template("template_places_direction_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/direction",{direction:n},function(t){e("#directions").empty(),e("#directions").append(e(t)),e("#directions").show(),e(".loading").jLoading("stop")})}else e(".loading").jLoading("stop"),Boxy.alert(I18n.t("places.errors.directions"),function(){},{title:"ERRO",closeText:"[Fechar]"})})}else e(".loading").jLoading("stop"),Boxy.alert(I18n.t("places.errors.address"),function(){},{title:"ERRO",closeText:"[Fechar]"})})}}),e("#direction").formhelper("init")}),e("body").unbind("gmap_loaded").bind("gmap_loaded",function(){if(t.geocoder=new google.maps.Geocoder,t.options.local.get("googlemaps"))if(null!==t.options.local.get("lat")&&null!==t.options.local.get("lng")){var e=new google.maps.LatLng(t.options.local.get("lat"),t.options.local.get("lng"));t.destination_address=e,t.initialize_gmaps(e,function(){setTimeout(function(){t.show_address_marker()},500)})}else{var o=t.options.local.get("endereco")+","+t.options.local.get("numero")+","+t.options.local.get("cidade")+","+t.options.local.get("estado")+","+t.options.local.get("pais");t.find_address(o,function(e,o){e&&(t.destination_address=o,t.initialize_gmaps(o,function(){setTimeout(function(){t.show_address_marker()},500)}))})}}),loadGoogleMapsApi(),this},get_address_html:function(e){render_template("template_places_address_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/address",{noivos:this.options.noivos.attributes,local:this.options.local.attributes,pagina:this.options.pagina.attributes},e)},show_address_marker:function(){var e=this;this.marker.info_window&&(this.marker.info_window.close(),this.marker.info_window=null),this.marker.info_window=new google.maps.InfoWindow,google.maps.event.addListener(this.marker.info_window,"closeclick",function(){e.marker.info_window=null}),this.get_address_html(function(t){e.marker.info_window.setContent(t),e.marker.info_window.open(e.map,e.marker)})},find_address:function(e,t){return e&&""!=e?void(this.geocoder&&this.geocoder.geocode({address:e},function(e,o){o==google.maps.GeocoderStatus.OK?t&&t(!0,e[0].geometry.location):t&&t(!1)})):void(t&&t(!1))},initialize_gmaps:function(t,o){var a=this,n={zoom:17,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(e(".map_canvas").get(0),n),this.directionsDisplay=new google.maps.DirectionsRenderer,this.directionsDisplay.setMap(this.map),this.marker=new google.maps.Marker({map:this.map,position:t,draggable:!1,zIndex:1e3}),this.marker.info_window=null,google.maps.event.addListener(this.marker,"position_changed",function(){}),google.maps.event.addListener(this.marker,"click",function(){a.show_address_marker()}),google.maps.event.addListener(this.map,"click",function(e){}),o&&o.call(this)}})}(jQuery);var PlacesViewV2=null;!function(e){PlacesViewV2=BaseBackboneView.extend({events:{"submit form":"trace_route"},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-local-"+this.options.local.get("id_template_local"));o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_places_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,local:this.options.local.attributes,pagina:this.options.pagina.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){var t=this;return e("body").unbind("gmap_loaded").bind("gmap_loaded",function(){if(t.geocoder=new google.maps.Geocoder,t.options.local.get("googlemaps"))if(null!==t.options.local.get("lat")&&null!==t.options.local.get("lng")){var e=new google.maps.LatLng(t.options.local.get("lat"),t.options.local.get("lng"));t.destination_address=e,t.initialize_gmaps(e,function(){setTimeout(function(){t.show_address_marker()},500)})}else{var o=t.options.local.get("endereco")+","+t.options.local.get("numero")+","+t.options.local.get("cidade")+","+t.options.local.get("estado")+","+t.options.local.get("pais");t.find_address(o,function(e,o){e&&(t.destination_address=o,t.initialize_gmaps(o,function(){setTimeout(function(){t.show_address_marker()},500)}))})}}),loadGoogleMapsApi(),this},trace_route:function(){var t=this,o=e("#origem").val();e(".loading").jLoading("start"),e(".def-result-message").html("").hide(),this.find_address(o,function(o,a){if(o){var n={origin:a,destination:t.destination_address,travelMode:google.maps.TravelMode.DRIVING},i=new google.maps.DirectionsService;i.route(n,function(o,a){if(a==google.maps.DirectionsStatus.OK){t.directionsDisplay.setDirections(o);var n=null;if(o.routes.length>0){var i=o.routes[0];if(i.legs.length>0){var s=i.legs[0],r=new Array;for(var l in s.steps){var c=s.steps[l];r.push({info:c.instructions,distance:c.distance.text,duration:c.duration.text})}n={start_address:s.start_address,end_address:s.end_address,distance:s.distance.text,duration:s.duration.text,steps:r}}}render_template("template_places_direction_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/places/"+t.options.noivos.get("template_html_version")+"/direction",{direction:n},function(t){e("#directions").empty(),e("#directions").append(e(t)),e("#directions").show(),e(".loading").jLoading("stop")})}else e(".loading").jLoading("stop"),e(".def-result-message").html(I18n.t("places.errors.directions")).addClass("error").show()})}else e(".loading").jLoading("stop"),e(".def-result-message").html(I18n.t("places.errors.address")).addClass("error").show()})},get_address_html:function(e){render_template("template_places_address_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/places/"+this.options.noivos.get("template_html_version")+"/address",{noivos:this.options.noivos.attributes,local:this.options.local.attributes,pagina:this.options.pagina.attributes},e)},show_address_marker:function(){var e=this;this.marker.info_window&&(this.marker.info_window.close(),this.marker.info_window=null),this.marker.info_window=new google.maps.InfoWindow,google.maps.event.addListener(this.marker.info_window,"closeclick",function(){e.marker.info_window=null}),this.get_address_html(function(t){e.marker.info_window.setContent(t),e.marker.info_window.open(e.map,e.marker)})},find_address:function(e,t){return e&&""!=e?void(this.geocoder&&this.geocoder.geocode({address:e},function(e,o){o==google.maps.GeocoderStatus.OK?t&&t(!0,e[0].geometry.location):t&&t(!1)})):void(t&&t(!1))},initialize_gmaps:function(t,o){var a=this,n={zoom:17,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(e(".map_canvas").get(0),n),this.directionsDisplay=new google.maps.DirectionsRenderer,this.directionsDisplay.setMap(this.map),this.marker=new google.maps.Marker({map:this.map,position:t,draggable:!1,zIndex:1e3}),this.marker.info_window=null,google.maps.event.addListener(this.marker,"position_changed",function(){}),google.maps.event.addListener(this.marker,"click",function(){a.show_address_marker()}),google.maps.event.addListener(this.map,"click",function(e){});var i,s;i=e(".map_canvas"),s=e('<div class="cover"></div>'),i.append(s),s.on("click",function(){s.remove()}),o&&o.call(this)}})}(jQuery);var ProtectedView=null;!function(e){ProtectedView=BaseBackboneView.extend({events:{"click #button":"check","submit #form1":"check"},check:function(){var t=e("#senha").val(),o={password:t},a=e.param(o),n=e("meta[name='root']").attr("content");return jQuery.ajax({url:n+"/protected/login",data:a,dataType:"json",type:"POST",success:function(e,t){if(1==e.code){var o=unescape(e.goto_url);o||(o=n+"/index"),window.location.href=o}else Boxy.alert(I18n.t("protected.error.password"),null,{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})},error:function(e,t,o){Boxy.alert(I18n.t("protected.error.error"),null,{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}}),!1},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e("#template-protected");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_protected_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/protected/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}})}(jQuery);var RsvpView=null;!function(e){RsvpView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-rsvp");if(o.get(0))this.setElement(o),t.options.onload&&t.options.onload.call(t);else{var a=null;this.adopted=!1,render_template("template_rsvp_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/rsvp/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,rsvp_config:this.options.rsvp_config.attributes,pagina:this.options.pagina.attributes,convidado:a},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)})}},change_pessoas:function(t){var o=e("#rsvp select[name='adultos'] option:selected").val();if(""!=o){try{o=parseInt(o)}catch(a){o=0}1==o?e("#mensagem").attr("ignore","true"):e("#mensagem").removeAttr("ignore")}},save_rsvp:function(){var t=this,o=e("#rsvp input[name='nome']").val(),a=e("#rsvp input[name='evento']:checked").val(),n=e("#rsvp select[name='adultos'] option:selected").val(),i=e("#rsvp select[name='criancas'] option:selected").val(),s=e("#rsvp input[name='email']").val(),r=e("#rsvp input[name='ddd']").val(),l=e("#rsvp input[name='telefone']").val(),c=e("#rsvp textarea[name='mensagem']").val(),d=0;t.options.convidado&&(d=t.options.convidado.get("id_convidado"));var m=new TemplateRsvp;window.loading.jLoading("block",!0),m.save({id_noivo:t.options.noivos.get("id_noivo"),nome:o,evento:a,qtd_pessoas:n,criancas:i,convidado:"noiva",email:s,ddd:r,telefone:l,acompanhantes:c,id_convidado:d},{wait:!0,success:function(){window.loading.jLoading("block",!1),t.options.convidado=null;render_template("template_rsvp_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/rsvp/"+t.options.noivos.get("template_html_version")+"/index",{noivos:t.options.noivos.attributes,rsvp_config:t.options.rsvp_config.attributes,pagina:t.options.pagina.attributes,convidado:null},function(o){t.setElement(o),change_content(o,function(){t.render(),e(".def-result-message").addClass("success").removeClass("error"),e(".def-result-message").html(I18n.t("rsvp.messages.success.success")),e(".def-result-message").show()},{template:"front",noivos:t.options.noivos})})},error:function(t,o,a){window.loading.jLoading("block",!1);var n=o.responseText,i=JSON.parse(n);for(var s in i.errors){var r=i.errors[s];e("#rsvp").formhelper("flagerror",r.key,r.value)}e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show()}})},render:function(){var t=this;return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){e("#rsvp").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onChangeCompleted:function(o){"adultos"==e(o).attr("id")&&t.change_pessoas()},onSubmitError:function(){e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show(),e("html,body").animate({scrollTop:0},200)},onSubmit:function(){if(1!=t.options.rsvp_config.get("aberto")||t.options.convidado)t.save_rsvp();else{var o=e("#nome").val(),a=new TemplateRsvpConvidado;window.loading.jLoading("block",!0),a.fetch({data:{id_noivo:t.options.noivos.get("id_noivo"),nome:o},success:function(){if(window.loading.jLoading("block",!1),a.get("error"))e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("rsvp.messages.error.not_found")),e(".def-result-message").show(),e("html,body").animate({scrollTop:0},200);else if(e(".def-result-message").hide(),t.options.convidado=a,t.options.convidado){var o=new EJS({url:"/templates/backbone/"+t.options.noivos.get("id_noivo")+"/rsvp/"+t.options.noivos.get("template_html_version")+"/index"}).render({noivos:t.options.noivos.attributes,rsvp_config:t.options.rsvp_config.attributes,pagina:t.options.pagina.attributes,convidado:t.options.convidado.attributes});t.setElement(o),change_content(o,function(){t.render()},{template:"front",noivos:t.options.noivos})}},error:function(){window.loading.jLoading("block",!1),e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("rsvp.messages.error.error")),e(".def-result-message").show(),e("html,body").animate({scrollTop:0},200)}})}return!1}}),e("#rsvp").formhelper("init"),t.change_pessoas()}),this}})}(jQuery);var RsvpViewV2=null;!function(e){RsvpViewV2=BaseBackboneView.extend({events:{"click  .send-form":"submitForm"},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-rsvp");if(o.get(0))this.setElement(o),t.options.onload&&t.options.onload.call(t);else{var a=null;this.adopted=!1,render_template("template_rsvp_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/rsvp/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,rsvp_config:this.options.rsvp_config.attributes,pagina:this.options.pagina.attributes,convidado:a},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)})}},save_rsvp:function(){var t=this,o=e(".confirmacao input[name='nome']").val(),a=e(".confirmacao input[name='evento']:checked").val(),n=e(".confirmacao select[name='adultos'] option:selected").val(),i=e(".confirmacao select[name='criancas'] option:selected").val(),s=e(".confirmacao input[name='email']").val(),r=e(".confirmacao input[name='ddd']").val(),l=e(".confirmacao input[name='telefone']").val(),c=e(".confirmacao textarea[name='mensagem']").val(),d=0;t.options.convidado&&(d=t.options.convidado.get("id_convidado"));var m=Validator.Assert,p=new Validator.Validator,u={id_noivo:(new m).NotNull(),nome:(new m).NotBlank(),email:(new m).Email(),evento:(new m).NotNull(),qtd_pessoas:(new m).NotNull(),ddd:(new m).NotBlank(),telefone:(new m).NotBlank()},h={id_noivo:t.options.noivos.get("id_noivo"),nome:o,evento:a,qtd_pessoas:n,criancas:i,convidado:"noiva",email:s,ddd:r,telefone:l,acompanhantes:c,id_convidado:d},_=p.validate(h,u);if(1==_){var g=new TemplateRsvp;window.loading.jLoading("block",!0),g.save(h,{wait:!0,success:function(){window.loading.jLoading("block",!1),t.options.convidado=null;render_template("template_rsvp_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/rsvp/"+t.options.noivos.get("template_html_version")+"/index",{noivos:t.options.noivos.attributes,rsvp_config:t.options.rsvp_config.attributes,pagina:t.options.pagina.attributes,convidado:null},function(o){t.setElement(o),change_content(o,function(){t.render(),e(".send-form").off("click").on("click",function(){t.submitForm()}),e(".def-result-message").addClass("success").removeClass("error"),e(".def-result-message").html(I18n.t("rsvp.messages.success.success")),e(".def-result-message").show()},{template:"front",noivos:t.options.noivos,destroy_view:!1})})},error:function(t,o,a){window.loading.jLoading("block",!1);var n=o.responseText,i=JSON.parse(n);for(var s in i.errors){var r=i.errors[s];e("*[data-field='"+r.key+"']").parent(".cnt").addClass("error").find(".txt-error").html(r.value).show()}e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show();var l=e(".txt-anchor").offset().top;e("html,body").animate({scrollTop:l},200)}})}else{for(validation in _)e("*[data-field='"+validation+"']").parent(".cnt").addClass("error").find(".txt-error").html(I18n.t("validatorjs."+_[validation][0].assert.__class__.toLowerCase())).show();e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show();var f=e(".txt-anchor").offset().top;e("html,body").animate({scrollTop:f},200)}},submitForm:function(){var t=this;if(1!=t.options.rsvp_config.get("aberto")||t.options.convidado)t.save_rsvp();else{var o=e(".confirmacao #nome").val(),a=Validator.Assert,n=new Validator.Validator,i={nome:(new a).NotBlank()},s=n.validate({nome:o},i);if(1==s){var r=new TemplateRsvpConvidado;window.loading.jLoading("block",!0),r.fetch({data:{id_noivo:t.options.noivos.get("id_noivo"),nome:o},success:function(){if(window.loading.jLoading("block",!1),r.get("error")){e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("rsvp.messages.error.not_found")),e(".def-result-message").show();var o=e(".txt-anchor").offset().top;e("html,body").animate({scrollTop:o},200)}else e(".def-result-message").hide(),t.options.convidado=r,t.options.convidado&&render_template("template_rsvp_form_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/rsvp/"+t.options.noivos.get("template_html_version")+"/index",{noivos:t.options.noivos.attributes,rsvp_config:t.options.rsvp_config.attributes,pagina:t.options.pagina.attributes,convidado:t.options.convidado.attributes},function(o){change_content(o,function(){t.setElement(o),t.render();var a=e(".txt-anchor").offset().top;e("html,body").animate({scrollTop:a},200),e(".send-form").off("click").on("click",function(){t.save_rsvp()})},{template:"front",noivos:t.options.noivos,destroy_view:!1})})},error:function(){window.loading.jLoading("block",!1),e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("rsvp.messages.error.error")),e(".def-result-message").show();var t=e(".txt-anchor").offset().top;e("html,body").animate({scrollTop:t},200)}})}else{for(validation in s)e("*[data-field='"+validation+"']").parent(".cnt").addClass("error").find(".txt-error").html(I18n.t("validatorjs."+s[validation][0].assert.__class__.toLowerCase())).show();e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show();var l=e(".txt-anchor").offset().top;e("html,body").animate({scrollTop:l},200)}}},render:function(){var e=this;return load_js("//assets1.icasei.com.br/assets/plugins/validator.js",function(){e.delegateEvents()}),this}})}(jQuery);var CartView=null;!function(e){CartView=BaseBackboneView.extend({events:{"click .goto-store":"back_store"},back_store:function(e){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/index/"+this.options.id_loja+"?id_loja="+id_loja_sel,!0)},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.cart_items=new CartProducts,this.cart_items.reset(this.options.cart.get("products")),this.cart_items.on("remove",this.on_remove,this),this.cart_items.on("change",this.on_change,this),this.views=[];var o=e(".template-cart");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_store_cart_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/cart",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},update_value:function(){for(var t=0,o=0;o<this.cart_items.length;o++){var a=this.cart_items.at(o),n=a.get("product").cotas>1?a.get("product").valor/a.get("product").cotas:a.get("product").valor;n*=a.get("qtd"),t+=n}e(".total-value").html(Globalize.format(t,"c"))},on_change:function(e,t,o){this.update_value()},on_remove:function(t,o,a){this.update_value(),e("#tiptip_holder").hide(),0==this.cart_items.length&&Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/index/"+this.options.id_loja+"?id_loja="+id_loja_sel,!0)},render:function(){var t=this;return t.cart_items.each(function(e){var o=new CartItemView({noivos:t.options.noivos.attributes,model:e,loja_dados:t.options.loja_dados});o.render(),t.views[e.get("id_loja_produtos")]=o}),e(".tTipT").tipTip({defaultPosition:"top"}),e("div.cart-link").hide(),this}})}(jQuery);var CartInfoView=null;!function(e){CartInfoView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-cart-info");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(render_template("template_store_cart_info_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/cart_info",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}),this.adopted=!1)},render:function(){var t=this;return load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){e("#cart_info").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show(),e("html,body").animate({scrollTop:0},200)},onSubmit:function(){var o=e("#cart_info #nome").val(),a=e("#cart_info #email").val(),n=e("#cart_info #ddd").val(),i=e("#cart_info #telefone").val(),s=e("#cart_info #mensagem").val(),r=e("#cart_info #documento").val(),l=new Cart;return l.save({nome:o,email:a,mensagem:s,ddd:n,telefone:i,documento:r},{wait:!0,success:function(){Backbone.history.navigate("/"+t.options.noivos.get("login")+"/store/payment",!0)},error:function(t,o,a){var n=o.responseText,i=JSON.parse(n);for(var s in i.errors){var r=i.errors[s];e("#cart_info").formhelper("flagerror",r.key,r.value)}e(".def-result-message").addClass("error").removeClass("success"),e(".def-result-message").html(I18n.t("formhelper.formhelper_invalid_values")),e(".def-result-message").show()}}),!1}}),e("#cart_info").formhelper("init")}),e("div.cart-link").hide(),this}})}(jQuery);var CartItemView=null;!function(e){CartItemView=BaseBackboneView.extend({events:{"click .cart-remove":"remove_item","click .update-prod":"update_item","blur input[name='qtd']":"update_item"},update_item:function(e){var t=this,o=0;try{o=parseInt(this.$el.find("input[name='qtd']").val())}catch(a){o=0}if(isNaN(o)&&(alert(o),o=1,this.$el.find("input[name='qtd']").val(o)),0==o)return void t.remove_item(e);var n=this.model.get("product").quantidade>this.model.get("product").cotas?this.model.get("product").quantidade_restantes:this.model.get("product").cotas_restantes;return this.options.loja_dados&&0==this.options.loja_dados.get("comprado")&&(n=this.model.get("product").quantidade>this.model.get("product").cotas?this.model.get("product").quantidade:this.model.get("product").cotas),o>n?void Boxy.alert(n>1?I18n_translate("store.cart.wrong_quantities",{qtd:n}):I18n_translate("store.cart.wrong_quantity",{qtd:n}),function(){t.$el.find("input[name='qtd']").val(t.model.get("qtd"))},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")}):(window.loading.jLoading("block",!0),void this.model.save({qtd:o},{wait:!0,success:function(e,t,o){window.loading.jLoading("block",!1)},error:function(e,t,o){window.loading.jLoading("block",!1),Boxy.alert(I18n.t("store.cart.error_save"),function(){},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}}))},remove_item:function(e){var t=this;window.loading.jLoading("block",!0),this.model.destroy({wait:!0,success:function(e,o,a){window.loading.jLoading("block",!1),t.$el.remove()},error:function(e,t,o){window.loading.jLoading("block",!1),Boxy.alert(I18n.t("store.cart.error_remove"),function(){},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}})},change_item:function(e,t){var o=this.model.get("product").cotas>1?this.model.get("product").valor/this.model.get("product").cotas:this.model.get("product").valor;o*=this.model.get("qtd"),this.$el.find(".product-value").html(Globalize.format(o,"c"))},initialize:function(){this.constructor.__super__.initialize.call(this),this.adopted=!0,this.model.on("change",this.change_item,this);var t=e("tr[productid='"+this.model.get("product").id_loja_produtos+"']");!t.get(0),this.setElement(t)},render:function(){return this}})}(jQuery);var ConfirmView=null;!function(e){ConfirmView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-confirm");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_store_confirm_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/confirm",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes,loja_dado:this.options.loja_dado.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){if(e("div.cart-link").hide(),void 0!==window.ga){var t=this.options.cart.get("payment"),o=get_meta("ga_dominio");window.ga("create","UA-1786921-1","auto",{allowLinker:!0}),window.ga("require","linker"),window.ga("linker:autoLink",o);var a=t.valor_total-t.valor_total_liquido;window.ga("event","Compra","Presente","Noivos",t.valor_total),window.ga("require","ecommerce","ecommerce.js"),window.ga("ecommerce:addTransaction",{id:t.id_template_pedidos,affiliation:"Loja Site dos Noivos",revenue:t.valor_total_liquido,shipping:0,tax:a});var n=this.options.cart.get("products");for(var i in n){var s=n[i].product,r=n[i].qtd,l=s.cotas>1?s.valor/s.cotas:s.valor;window.ga("ecommerce:addItem",{id:t.id_template_pedidos,name:s.id_template_produtos,sku:s.produto,category:"Presente Virtual - Front",price:l,quantity:r})}window.ga("ecommerce:send")}return this}})}(jQuery);var StoreView=null;!function(e){StoreView=BaseBackboneView.extend({events:{"click .price-ascend":"price_ascend","click .price-descend":"price_descend","change #select_categorias":"categoria_change","click .add_cart":"add_cart"},redirect:function(e){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/cart",!0),e.off("change")},add_cart:function(t){var o=this;e(t.currentTarget).removeClass("add_cart");var a=e(t.currentTarget).attr("productid"),n=new Cart;n.on("change",this.redirect,this),n.save({id_noivo:o.options.noivos.get("id_noivo"),id_loja_produtos:a,id_loja_sel:o.options.info.id_loja_sel},{wait:!0,error:function(e,t,o){msg=I18n.t("store.error_add"),"true"==get_meta("CD")&&(msg="Loja desativada"),Boxy.alert(msg,function(){},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})}})},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.options.produtos.on("change",this.redraw,this);var o=e(".template-store");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_store_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,pagina:this.options.pagina.attributes,produtos:this.options.produtos.toJSON(),loja_dados:this.options.loja_dados.attributes,categorias:this.options.categorias.toJSON(),info:this.options.info,only_products:!1,cart:this.options.cart.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},redraw:function(){var t=this;render_template("template_store_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,pagina:this.options.pagina.attributes,produtos:this.options.produtos.toJSON(),loja_dados:this.options.loja_dados.attributes,categorias:this.options.categorias.toJSON(),info:this.options.info,only_products:!0,cart:this.options.cart.attributes},function(o){var a={};a=e("#list-loja").length>0?{noivos:t.options.noivos,container:"#list-loja",no_scroll:!0,destroy_view:!1}:{noivos:t.options.noivos,container:"#list-loja-v2",no_scroll:!0,destroy_view:!1},change_content(o,function(){e(document).trigger("icasei_content_change")},a)})},render:function(){if(load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){e(".sort-select select").chosen()}),this.options.cart.has("products")&&this.options.cart.get("products").length>0){var t=I18n.t("store.cart_item");this.options.cart.get("products").length>1&&(t=I18n.t("store.cart_items")),e("span.cart-items-label").html(t),e("span.cart-items").html(this.options.cart.get("products").length),e("div.cart-link").show()}else e("div.cart-link").hide();return this},categoria_change:function(){6==this.options.info.order?this.price_ascend():this.price_descend()},price_ascend:function(){var t=this,o=this.options.produtos;
try{t.options.info.id_loja_categoria=parseInt(e("#select_categorias").val())}catch(a){t.options.info.id_loja_categoria=-2}o.fetch({data:{id_noivo:this.options.noivos.get("id_noivo"),id:this.options.pagina.get("recurso").id_tipo_loja,order:6,id_loja_categoria:t.options.info.id_loja_categoria,id_loja:this.options.info.id_loja_sel},success:function(){o.trigger("change"),e(".price-ascend").addClass("active"),e(".price-descend").removeClass("active"),t.options.info.order=6},error:function(){}})},price_descend:function(){var t=this,o=this.options.produtos;try{t.options.info.id_loja_categoria=parseInt(e("#select_categorias").val())}catch(a){t.options.info.id_loja_categoria=-2}o.fetch({data:{id_noivo:this.options.noivos.get("id_noivo"),id:this.options.pagina.get("recurso").id_tipo_loja,order:5,id_loja_categoria:t.options.info.id_loja_categoria,id_loja:this.options.info.id_loja_sel},success:function(){o.trigger("change"),e(".price-ascend").removeClass("active"),e(".price-descend").addClass("active"),t.options.info.order=5},error:function(){}})}})}(jQuery);var PaymentView=null;!function(e){PaymentView=BaseBackboneView.extend({events:{"click label[name='paymentMethod']":"payment_click","click .def-payment":"submit_payment_click"},submit_payment_click:function(t){e(t.currentTarget).removeClass("def-payment").addClass("def-payment-true"),e("#pagamento").formhelper("submit",e(t.currentTarget),!0)},payment_click:function(t){var o=e("input:radio",t.currentTarget);switch(o.attr("name")){case"paymentMethod":if(o.is(":checked")){e(".payment-active").removeClass("payment-active"),o.parents("label").addClass("payment-active");var a=o.val();switch(a){case"deposito":e(".payment-deposito").show(),e(".payment-boleto").hide(),e(".payment-card").hide(),this.emptyFields(a),e("input[name*='instalments']").attr("ignore","true"),e("#ccNumber").attr("ignore","true"),e("#ccName").attr("ignore","true"),e("#ccValidityMonth").attr("ignore","true"),e("#ccValidityYear").attr("ignore","true"),e("#ccSecurityCode").attr("ignore","true"),e("input[name='instalments_"+a+"']").attr("ignore","true");break;case"boleto":e(".payment-boleto").show(),e(".payment-deposito").hide(),e(".payment-card").hide(),this.emptyFields(a),e("input[name*='instalments']").attr("ignore","true"),e("#ccNumber").attr("ignore","true"),e("#ccName").attr("ignore","true"),e("#ccValidityMonth").attr("ignore","true"),e("#ccValidityYear").attr("ignore","true"),e("#ccSecurityCode").attr("ignore","true"),e("input[name='instalments_"+a+"']").attr("ignore","true");break;default:this.setMask(a),this.emptyFields(a),e(".payment-boleto").hide(),e(".payment-deposito").hide(),e(".payment-card").show(),e(".dados-radio-right > div").hide(),e(".taxas-parcelas-"+a).show(),e("."+a+"1").after(e(".payment-card")),"amex"==a?(e(".tooltipamex").show(),e(".tooltipdefault").hide()):(e(".tooltipamex").hide(),e(".tooltipdefault").show()),e("input[name*='instalments']").attr("ignore","true"),e("#ccNumber").removeAttr("ignore"),e("#ccName").removeAttr("ignore"),e("#ccValidityMonth").removeAttr("ignore"),e("#ccValidityYear").removeAttr("ignore"),e("#ccSecurityCode").removeAttr("ignore"),e("input[name='instalments_"+a+"']").removeAttr("ignore")}}else o.parents("label").removeClass("payment-active");break;case"ccName":break;case"ccValidityMonth":break;case"ccValidityYear":break;case"instalments":}},emptyFields:function(t){e("#pagamento").formhelper("setvalue","ccNumber","",!1),e("#pagamento").formhelper("setvalue","ccName","",!1),e("#pagamento").formhelper("setvalue","ccValidityMonth","",!1),e("#pagamento").formhelper("setvalue","ccValidityYear","",!1),e("#pagamento").formhelper("setvalue","ccSecurityCode","",!1),e("#pagamento").formhelper("setvalue","instalments_"+t,1,!1),e("#instalments_error").addClass("inpt-label-info").html(I18n.t("store.payment.errors.installments")),e(".chzn-single.chzn-default span").html("")},setMask:function(t){e("#ccNumber").attr("association",t),e("#ccSecurityCode").attr("association",t);var o="9999 9999 9999 9999",a="999";"amex"==t&&(o="9999 999999 99999",a="9999"),e("#ccNumber").mask(o),e("#ccSecurityCode").mask(a)},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-payment");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_payment_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/payment",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes,loja_dado:this.options.loja_dado.attributes,tipos_pagamentos:this.options.tipos_pagamentos.models[0].get("tipos_pagamentos"),taxas_pagamentos:this.options.tipos_pagamentos.models[0].get("taxas_pagamentos")},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){var t=this;return e(".tTipT").tipTip({defaultPosition:"top"}),e(".tTipR").tipTip({defaultPosition:"right"}),load_css("//assets1.icasei.com.br/assets/formhelper.css"),load_js("//assets1.icasei.com.br/assets/formhelper.js",function(){e("#pagamento").formhelper({defaultField:"nome",autoRender:!1,messages:form_helper_messages,onSubmitError:function(){0!=e(".def-payment-true").length&&e(".def-payment-true").addClass("def-payment").removeClass("def-payment-true"),Boxy.alert(I18n.t("formhelper.formhelper_invalid_values"),function(){e("html,body").animate({scrollTop:0},200)},{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")})},onSubmit:function(){window.loading.jLoading("block",!0);var o=e("#pagamento input[name='paymentMethod']:checked").val(),a=e("#ccNumber").val(),n=e("#ccName").val(),i=e("#ccValidityMonth").val(),s=e("#ccValidityYear").val(),r=e("#ccSecurityCode").val(),l=e("#pagamento input[name*='instalments']:checked").val(),c={tipo_pagamento:o,cc_number:a,cc_name:n,ccValidityMonth:i,ccValidityYear:s,ccSecurityCode:r,instalments:l},d=jQuery.param(c);return jQuery.ajax({url:"/"+t.options.noivos.get("login")+"/store/do_payment",data:d,dataType:"json",type:"POST",timeout:12e5,success:function(o,a){window.loading.jLoading("block",!1),1==o.code?Backbone.history.navigate("/"+t.options.noivos.get("login")+"/store/confirm",!0):Boxy.alert(o.message,null,{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")}),0!=e(".def-payment-true").length&&e(".def-payment-true").addClass("def-payment").removeClass("def-payment-true")},error:function(t,o,a){window.loading.jLoading("block",!1),Boxy.alert(I18n.t("store.payment.errors.payment"),null,{title:I18n.t("layout.boxy.error_title"),closeText:I18n.t("layout.boxy.close")}),0!=e(".def-payment-true").length&&e(".def-payment-true").addClass("def-payment").removeClass("def-payment-true")}}),!1}}),e("#pagamento").formhelper("init")}),e("div.cart-link").hide(),this}})}(jQuery);var SuppliersView=null;!function(e){SuppliersView=BaseBackboneView.extend({initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0;var o=e(".template-suppliers");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_suppliers_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/suppliers/"+this.options.noivos.get("template_html_version")+"/index",{noivos:this.options.noivos.attributes,fornecedores:this.options.fornecedores.toJSON(),pagina:this.options.pagina.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},render:function(){return this}})}(jQuery),$(function(){"true"!=get_meta("CD")&&(("undefined"==typeof console||"undefined"==typeof console.info||"undefined"==typeof console.log)&&(console={},window.console=console),console.error=function(){var e=params_to_string(arguments);_icasei_log.call(this,"error",e)},console.warn=function(){},console.log=function(){},console.info=function(){},console.trace=function(){var e=params_to_string(arguments);_icasei_log.call(this,"trace",e)}),$("#menu ul li").on("click",function(){$(this).parent().find("li").removeClass("select"),$(this).addClass("select");var e=$("#punch");e.prop("checked",e?!1:!0)});var e=1*$("#menu").height(),t=1*$("body").height();e>t?$("body").height(e+150):$("#menu").height(e)});