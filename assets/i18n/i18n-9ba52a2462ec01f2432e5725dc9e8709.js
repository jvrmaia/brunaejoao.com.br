Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),o=t.length>>>0;if(0===o)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=o)return-1;for(var a=n>=0?n:Math.max(o-Math.abs(n),0);o>a;a++)if(a in t&&t[a]===e)return a;return-1});var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.fallbackRules={},I18n.pluralizationRules={en:function(e){return 0==e?["zero","none","other"]:1==e?"one":"other"}},I18n.getFallbacks=function(e){if(e===I18n.defaultLocale)return[];if(!I18n.fallbackRules[e]){for(var t=[],o=e.split("-"),n=1;n<o.length;n++)t.push(o.slice(0,n).join("-"));t.push(I18n.defaultLocale),I18n.fallbackRules[e]=t}return I18n.fallbackRules[e]},I18n.isValidNode=function(e,t,o){return null!==e[t]&&e[t]!==o},I18n.lookup=function(e,t){var o,t=t||{},n=e,a=this.prepareOptions(I18n.translations),i=t.locale||I18n.currentLocale(),s=a[i]||{},t=this.prepareOptions(t);for("object"==typeof e&&(e=e.join(this.defaultSeparator)),t.scope&&(e=t.scope.toString()+this.defaultSeparator+e),e=e.split(this.defaultSeparator);s&&e.length>0;)o=e.shift(),s=s[o];if(!s){if(I18n.fallbacks)for(var r=this.getFallbacks(i),l=0;l<r.length&&!(s=I18n.lookup(n,this.prepareOptions({locale:r[l]},t)));r++);!s&&this.isValidNode(t,"defaultValue")&&(s=t.defaultValue)}return s},I18n.prepareOptions=function(){for(var e,t={},o=arguments.length,n=0;o>n;n++)if(e=arguments[n])for(var a in e)this.isValidNode(t,a)||(t[a]=e[a]);return t},I18n.interpolate=function(e,t){t=this.prepareOptions(t);var o,n,a,i=e.match(this.PLACEHOLDER);if(!i)return e;for(var s=0;o=i[s];s++)a=o.replace(this.PLACEHOLDER,"$1"),n=t[a],this.isValidNode(t,a)||(n="[missing "+o+" value]"),regex=new RegExp(o.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(regex,n);return e},I18n.translate=function(e,t){t=this.prepareOptions(t);var o=this.lookup(e,t);try{return"object"==typeof o?"number"==typeof t.count?this.pluralize(t.count,e,t):o:this.interpolate(o,t)}catch(n){return this.missingTranslation(e)}},I18n.localize=function(e,t){switch(e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:return e.match(/^(date|time)/)?this.toTime(e,t):t.toString()}},I18n.parseDate=function(e){var t,o;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(var n=1;6>=n;n++)t[n]=parseInt(t[n],10)||0;t[2]-=1,o=t[7]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6])):new Date(t[1],t[2],t[3],t[4],t[5],t[6])}else"number"==typeof e?(o=new Date,o.setTime(e)):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(o=new Date,o.setTime(Date.parse(e))):(o=new Date,o.setTime(Date.parse(e)));return o},I18n.toTime=function(e,t){var o=this.parseDate(t),n=this.lookup(e);return o.toString().match(/invalid/i)?o.toString():n?this.strftime(o,n):o.toString()},I18n.strftime=function(e,t){var o=this.lookup("date");if(!o)return e.toString();o.meridian=o.meridian||["AM","PM"];var n=e.getDay(),a=e.getDate(),i=e.getFullYear(),s=e.getMonth()+1,r=e.getHours(),l=r,c=r>11?1:0,d=e.getSeconds(),u=e.getMinutes(),p=e.getTimezoneOffset(),h=Math.floor(Math.abs(p/60)),m=Math.abs(p)-60*h,f=(p>0?"-":"+")+(h.toString().length<2?"0"+h:h)+(m.toString().length<2?"0"+m:m);l>12?l-=12:0===l&&(l=12);var g=function(e){var t="0"+e.toString();return t.substr(t.length-2)},_=t;return _=_.replace("%a",o.abbr_day_names[n]),_=_.replace("%A",o.day_names[n]),_=_.replace("%b",o.abbr_month_names[s]),_=_.replace("%B",o.month_names[s]),_=_.replace("%d",g(a)),_=_.replace("%e",a),_=_.replace("%-d",a),_=_.replace("%H",g(r)),_=_.replace("%-H",r),_=_.replace("%I",g(l)),_=_.replace("%-I",l),_=_.replace("%m",g(s)),_=_.replace("%-m",s),_=_.replace("%M",g(u)),_=_.replace("%-M",u),_=_.replace("%p",o.meridian[c]),_=_.replace("%S",g(d)),_=_.replace("%-S",d),_=_.replace("%w",n),_=_.replace("%y",g(i)),_=_.replace("%-y",g(i).replace(/^0+/,"")),_=_.replace("%Y",i),_=_.replace("%z",f)},I18n.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var o,n,a=0>e,i=Math.abs(e).toFixed(t.precision).toString(),s=i.split("."),r=[];for(e=s[0],o=s[1];e.length>0;)r.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);if(n=r.join(t.delimiter),t.precision>0&&(n+=t.separator+s[1]),a&&(n="-"+n),t.strip_insignificant_zeros){var l={separator:new RegExp(t.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};n=n.replace(l.zeros,"").replace(l.separator,"")}return n},I18n.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),e=this.toNumber(e,t),e=t.format.replace("%u",t.unit).replace("%n",e)},I18n.toHumanSize=function(e,t){for(var o,n,a=1024,i=e,s=0;i>=a&&4>s;)i/=a,s+=1;return 0===s?(o=this.t("number.human.storage_units.units.byte",{count:i}),n=0):(o=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][s]),n=i-Math.floor(i)===0?0:1),t=this.prepareOptions(t,{precision:n,format:"%n%u",delimiter:""}),e=this.toNumber(i,t),e=t.format.replace("%u",o).replace("%n",e)},I18n.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),e=this.toNumber(e,t),e+"%"},I18n.pluralizer=function(e){return pluralizer=this.pluralizationRules[e],void 0!==pluralizer?pluralizer:this.pluralizationRules.en},I18n.findAndTranslateValidNode=function(e,t){for(i=0;i<e.length;i++)if(key=e[i],this.isValidNode(t,key))return t[key];return null},I18n.pluralize=function(e,t,o){var n;try{n=this.lookup(t,o)}catch(a){}if(!n)return this.missingTranslation(t);var i;return o=this.prepareOptions(o),o.count=e.toString(),pluralizer=this.pluralizer(this.currentLocale()),key=pluralizer(Math.abs(e)),keys="object"==typeof key&&key instanceof Array?key:[key],i=this.findAndTranslateValidNode(keys,n),null==i&&(i=this.missingTranslation(t,keys[0])),this.interpolate(i,o)},I18n.missingTranslation=function(){for(var e='[missing "'+this.currentLocale(),t=arguments.length,o=0;t>o;o++)e+="."+arguments[o];return e+='" translation]'},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize;