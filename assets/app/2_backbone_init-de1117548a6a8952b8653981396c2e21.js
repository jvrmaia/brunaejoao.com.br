function init_I18n(){form_helper_messages={empty:"",chars:I18n.t("formhelper.chars"),"waiting-validation":I18n.t("formhelper.waiting_validation"),"error-required":I18n.t("formhelper.error_required"),"success-required":I18n.t("formhelper.success_required"),"email-invalid-format":I18n.t("formhelper.email_invalid_format"),"email-ok":I18n.t("formhelper.email_ok"),"fullname-invalid-format":I18n.t("formhelper.fullname_invalid_format"),"fullname-ok":I18n.t("formhelper.fullname_ok"),"name-invalid-format":I18n.t("formhelper.name_invalid_format"),"name-ok":I18n.t("formhelper.name_ok"),"cpf-invalid-format":I18n.t("formhelper.cpf_invalid_format"),"cpf-ok":I18n.t("formhelper.cpf_ok"),"date-invalid-format":I18n.t("formhelper.date_invalid_format"),"date-ok":I18n.t("formhelper.date_ok"),"password-rep-ok":I18n.t("formhelper.password_rep_ok"),"password-rep-invalid":I18n.t("formhelper.password_rep_invalid"),"date-invalid-old":I18n.t("formhelper.date_invalid_old"),"password-too-short":I18n.t("formhelper.password_too_short"),"password-weak":I18n.t("formhelper.password_weak"),"password-good":I18n.t("formhelper.password_good"),"password-power":I18n.t("formhelper.password_power"),"chosen-not-found":I18n.t("formhelper.chosen_not_found"),"main-element-is-not-a-form":I18n.t("formhelper.main_element_is_not_a_form"),"template-not-found":I18n.t("formhelper.template_not_found"),"creditcard-fail":I18n.t("formhelper.creditcard_fail"),"creditcard-number-ok":I18n.t("formhelper.creditcard_number_ok"),"creditcard-number-fail0-visa":I18n.t("formhelper.creditcard_number_fail0_visa"),"creditcard-number-fail0-master":I18n.t("formhelper.creditcard_number_fail0_master"),"creditcard-number-fail0-amex":I18n.t("formhelper.creditcard_number_fail0_amex"),"creditcard-number-fail0-elo":I18n.t("formhelper.creditcard_number_fail0_elo"),"creditcard-number-fail1":I18n.t("formhelper.creditcard_number_fail1"),"creditcard-securitycode-ok":I18n.t("formhelper.creditcard_securitycode_ok"),"creditcard-securitycode-fail-visa":I18n.t("formhelper.creditcard_securitycode_fail_visa"),"creditcard-securitycode-fail-master":I18n.t("formhelper.creditcard_securitycode_fail_master"),"creditcard-securitycode-fail-amex":I18n.t("formhelper.creditcard_securitycode_fail_amex"),"creditcard-securitycode-fail-elo":I18n.t("formhelper.creditcard_securitycode_fail_elo")}}function backbone_proccess_error(e){if(!e.getAllResponseHeaders())return!1;var t=e.responseText;try{var n=JSON.parse(t);n.code&&99==n.code||Boxy.alert("Erro ao carregar informa\xe7\xf5es.",function(){},{title:"ERRO",closeText:"[Fechar]"})}catch(a){}return!0}function getfu(e){var t=null;return(test=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(location.search))&&(t=1*decodeURIComponent(test[1])),t||(test=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(Backbone.history.fragment))&&(t=1*decodeURIComponent(test[1])),t}function get_meta(e,t){var n="";if(meta_content_cache[e]&&!t)n=meta_content_cache[e];else{var a=$("meta[name='"+e+"']");a.get(0)&&(n=$("meta[name='"+e+"']").attr("content"),meta_content_cache[e]=n)}return n}function set_meta(e,t){$('meta[name="'+e+'"]').attr("content",t)}function loadGoogleMapsApi(){var e=get_meta("lang");if(e=e.replace("_","-"),"undefined"==typeof google){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyD2UiOa9DmVjfpHnVHoz8yAJyh4LkQ2AQ8&sensor=true&channel=icasei-front&language="+e+"&callback=loadGoogleMapsApiReady",t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)}else loadGoogleMapsApiReady()}function loadGoogleMapsApiReady(){$("body").trigger("gmap_loaded")}function load_css(e){if("true"!=get_meta("CD")){var t=document.createElement("LINK");t.rel="stylesheet",t.type="text/css",t.href=e;var n=document.getElementsByTagName("HEAD");null!=n[0]&&n[0].appendChild(t)}}function load_js(e,t,n){if("true"==get_meta("CD"))return void(null!=t&&t.call(this));var a=$("head script[src~='"+e+"']");if(n&&a.get(0)&&a.remove(),a=$("head script[src~='"+e+"']"),a.get(0))null!=t&&t.call(this);else{var r=document.createElement("SCRIPT");r.type="text/javascript",r.src=e,r.async=!0,r.defer=!0;var o=t;null!=o&&(r.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&o&&(o.call(this),o=null)},r.onload=function(){o&&(o.call(this),o=null)});var i=document.getElementsByTagName("HEAD");null!=i[0]&&i[0].appendChild(r)}}function load_noivos(e,t){var n="";e&&(n=e),"true"==get_meta("CD")&&(n=get_meta("noivos"));var a=new Noivo;a.fetch({cache:!1,data:{login:n},success:function(){set_meta("csrf-token",a.get("csrf")),window.noivo=a,t&&t.call(a,!0)},error:function(e,t,n){if("true"!=get_meta("CD"))backbone_proccess_error(t);else{var a=t.responseText;console.error(a)}}})}function check_localdata(e){var t=$("script[id='"+e+"']");return t.get(0)?!0:!1}function check_localstorage(e){return"true"==get_meta("CD")?!0:!1}function render_template(e,t,n,a){var r=null,o="",i=$("#"+e);if(i.get(0))return o=i.html(),r=new EJS({text:o}).render(n),void a.call(null,r);var c={lang:get_meta("lang")},l=$.param(c);return a?$.ajax({url:t,type:"GET",dataType:"text",data:l,success:function(e,t){r=new EJS({text:e}).render(n),a.call(null,r)}}):($.ajax({url:t,type:"GET",dataType:"text",async:!1,data:l,success:function(e,t){o=e}}),r=new EJS({text:o}).render(n)),r}function loadCss(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function load_start(){new Date}function load_end(){new Date}function get_main_container(){return $(".inner-content")}function change_content(e,t,n){var a=function(){window.animating=!0;var a=get_main_container();n.container&&(a=$(n.container));var r=!0;"undefined"!=typeof n.destroy_view&&(r=n.destroy_view);var o=500;"undefined"!=typeof n.animation_time&&(o=n.animation_time),n.no_scroll||$("body,html").animate({scrollTop:0},400),a.animate({opacity:0},o,function(){App&&App.current_view&&r&&(App.current_view.remove&&App.current_view.remove(),App.current_view=null),a.empty(),AngularHelper.compile(a,e),$(document).trigger("icasei_content_change"),t&&t.call(this),a.animate({opacity:1},o,function(){window.animating=!1})});var i=1*$("#menu").height(),c=1*$("body").height();i>c?$("body").height(i+150):$("#menu").height(i)};if(n.template){var r=$(".template-layout-"+n.template);r.get(0)?a():render_template("template_main_"+n.template+"_id","/templates/backbone/"+n.noivos.get("id_noivo")+"/layout/"+n.noivos.get("template_html_version")+"/"+n.template,{noivos:n.noivos.attributes},function(e){$("#main_template").empty().append($(e)),$(document).trigger("icasei_template_change"),a()})}else a()}var backboneObjects=new Object,meta_content_cache=new Array,form_helper_messages={},App=function(){};!function(e){BaseBackboneView=Backbone.View.extend({initialize:function(){var e=this;this.render=_.wrap(this.render,function(t){this.beforeRender(),t.call(e),this.afterRender()}),this.remove=_.wrap(this.remove,function(t){e.before_remove.call(e),t.call(e),e.after_remove.call(e)})},infinite_pagination:function(t,n){var a=this;e(".infinite-pagination").data("loading");e(".infinite-pagination a").length>1&&(e(".infinite-pagination").append('<ul class="temp" />'),e(window).scroll(function(){clearTimeout(e.data(this,"scrollTimer")),e.data(this,"scrollTimer",setTimeout(function(){var r=e(".infinite-loading"),o=e(".infinite-pagination");if(o.find(">a.active").length>=1){var i=o.find(">a").length,c=o.find(">a.active").index(".infinite-pagination>a")+1;if(i>c){var l=o.find("a:eq("+c+")"),d=l.data("page"),s=(o.find(".temp"),e(t)),p=s.height()+s.offset().top,m=e(document).scrollTop()+e(window).height();m>p&&r.is(":hidden")&&r.fadeIn(300,function(){e("body > div.loading").jLoading("ignore",!0),n.call(a,function(){r.hide(),o.find(">a").removeClass("active"),l.addClass("active"),c==i-1&&e(".after-pagination").show()},{page:d,container:s})})}}},250))}))},beforeRender:function(){},afterRender:function(){},before_remove:function(){},after_remove:function(){}}),Backbone.Model.prototype.toJSON=function(){if(this._isSerializing)return this.id||this.cid;this._isSerializing=!0;var e=_.clone(this.attributes);return _.each(e,function(t,n){t&&t.toJSON&&_.isFunction(t.toJSON)&&(e[n]=t.toJSON())}),this._isSerializing=!1,e},"true"!=get_meta("CD")&&(Backbone.History.oldLoadUrl=Backbone.History.prototype.loadUrl,Backbone.History.prototype.loadUrl=function(e){var t=this.fragment=this.getFragment(e);if(void 0!==window.ga){var n=get_meta("noivos"),a=get_meta("ga_dominio");window.ga("create","UA-1786921-1","auto",{allowLinker:!0}),window.ga("require","linker"),window.ga("linker:autoLink",a),window.ga("set",{dimension1:"front"}),window.ga("send","event","Site","Front",n),window.ga("send","pageview","/"+t);var r=get_meta("custom_google_tc");""!=r&&(window.ga("create",r,"auto",{name:"noivo"}),window.ga("noivo.send","pageview","/"+t))}else console.error("Google analytics not initialized");return Backbone.History.oldLoadUrl.call(this,e)})}(jQuery),$(document).ajaxError(function(e,t,n,a){if(!t.getAllResponseHeaders()||0===t.status)return e.stopPropagation(),!1;var r=t.responseText,o=null;try{"/services/error"!=n.url&&console.error("Erro global ("+n.url+"): "+a+"<br/>"+r),o=JSON.parse(r)}catch(e){o=null}if(o&&o.code&&99==o.code){var i=get_meta("root");return Backbone.history.navigate(i+"/protected",!0),e.stopPropagation(),!1}}),$(document).ready(function(){init_I18n(),window.loading=$(".loading"),window.loading.jLoading(),"true"==get_meta("CD")?Backbone.history.start({pushState:!1,hashChange:!0,root:"/",replace:!1}):Backbone.history.start({pushState:!0,hashChange:!0,root:"/",replace:!1}),$(document).delegate("a","click",function(e){var t=$(this).attr("backbone");if(!t||"false"!=t){var n=$(this).data("selectedclass"),a=$(this).data("menuselector"),r=$(this).attr("href");r&&(r.indexOf("://")>=0||r.indexOf("javascript:")>=0||r.indexOf("mailto:")>=0)||(window.last_href!=r&&window.loading.jLoading("abortAllConnections"),e.preventDefault(),Backbone.history.navigate(r,{trigger:!0}),window.last_href=r,n&&a&&($(a).removeClass(n),$(this).parent().addClass(n)))}})}),jQuery.extend({backboneParseQueryString:function(){var e={},t=window.location.search.replace("?",""),n=t.split("&");return $.each(n,function(t,n){var a=n.split("=");e[a[0]]=a[1]}),e}});