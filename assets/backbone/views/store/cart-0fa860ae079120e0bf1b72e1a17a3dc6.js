var CartView=null;!function(e){CartView=BaseBackboneView.extend({events:{"click .goto-store":"back_store"},back_store:function(e){Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/index/"+this.options.id_loja+"?id_loja="+id_loja_sel,!0)},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.cart_items=new CartProducts,this.cart_items.reset(this.options.cart.get("products")),this.cart_items.on("remove",this.on_remove,this),this.cart_items.on("change",this.on_change,this),this.views=[];var o=e(".template-cart");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_store_cart_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/store/"+this.options.noivos.get("template_html_version")+"/cart",{noivos:this.options.noivos.attributes,cart:this.options.cart.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)}))},update_value:function(){for(var t=0,o=0;o<this.cart_items.length;o++){var n=this.cart_items.at(o),a=n.get("product").cotas>1?n.get("product").valor/n.get("product").cotas:n.get("product").valor;a*=n.get("qtd"),t+=a}e(".total-value").html(Globalize.format(t,"c"))},on_change:function(e,t,o){this.update_value()},on_remove:function(t,o,n){this.update_value(),e("#tiptip_holder").hide(),0==this.cart_items.length&&Backbone.history.navigate("/"+this.options.noivos.get("login")+"/store/index/"+this.options.id_loja+"?id_loja="+id_loja_sel,!0)},render:function(){var t=this;return t.cart_items.each(function(e){var o=new CartItemView({noivos:t.options.noivos.attributes,model:e,loja_dados:t.options.loja_dados});o.render(),t.views[e.get("id_loja_produtos")]=o}),e(".tTipT").tipTip({defaultPosition:"top"}),e("div.cart-link").hide(),this}})}(jQuery);