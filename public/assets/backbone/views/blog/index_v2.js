var BlogViewV2=null;!function(e){BlogViewV2=BaseBackboneView.extend({events:{"click #close_write_window":"closeWriteWindow"},closeWriteWindow:function(){e("#write_window").hide()},initialize:function(){this.constructor.__super__.initialize.call(this);var t=this;this.adopted=!0,this.posts_view=new Array;var o=e(".template-blog");o.get(0)?(this.setElement(o),t.options.onload&&t.options.onload.call(t)):(this.adopted=!1,render_template("template_pagination_blog_id","/templates/backbone/"+this.options.noivos.get("id_noivo")+"/pagination/"+t.options.noivos.get("template_html_version"),{noivos:this.options.noivos.attributes,pages_info:this.options.entries.get("pagination")},function(e){render_template("template_blog_id","/templates/backbone/"+t.options.noivos.get("id_noivo")+"/blog/"+t.options.noivos.get("template_html_version")+"/index",{noivos:t.options.noivos.attributes,entries:t.options.entries.attributes,pages_html:e,pagina:t.options.pagina.attributes,captcha:t.options.captcha.attributes},function(e){t.setElement(e),t.options.onload&&t.options.onload.call(t)})}))},render:function(){e("#comentario").ready(function(){e("#comentario").keyup(function(){var t=this.value.length;4e3==t&&(this.value=this.value.substring(0,4e3)),e("#cnt-comentario").text(4e3-t+" caracteres restantes")})});var t=this;return load_js("//assets1.icasei.com.br/assets/plugins/validator.js",function(){var o=t.options.entries.get("entries");for(i in o){var n=o[i],a=new TemplateBlogPost(n),r=new PostViewV2({model:a,noivos:t.options.noivos,captcha:t.options.captcha});t.posts_view[a.get("id_template_blog_post")]=r}t.constructor.__super__.infinite_pagination("article.posts > div > div > ul.row",function(o,n){var a=new TemplateBlogPost;a.fetch({cache:!1,data:{id_noivo:t.options.noivos.get("id_noivo"),page:n.page},success:function(){e("body > div.loading").jLoading("ignore",!1);var r=a.get("entries");for(i in r){var s=r[i],l=new TemplateBlogPost(s),c=new PostViewV2({model:l,noivos:t.options.noivos,captcha:t.options.captcha,onload:function(){var e=this.$el;n.container.append(e),t.render(),o.call(null)}});t.posts_view[l.get("id_template_blog_post")]=c}},error:function(e,t,o){backbone_proccess_error(t)}})})}),this}})}(jQuery);